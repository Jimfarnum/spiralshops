import{c as X,r as o,j as e,e as I,B as x,C as r,a as c,b as i,d as l,F as Z,J as q,K as h,M as j,q as p,s as f}from"./index-sTi6BLPu.js";import{A as J,a as K}from"./alert-BVbwNNU_.js";import{P as k}from"./progress-Cf362TSq.js";import{M as V}from"./monitor-Db0OONNE.js";import{Z as P}from"./zap-1vep6Tn5.js";import{A as T}from"./activity-_qjqvmcS.js";import{S}from"./shield-DYGAM3k4.js";import{T as M}from"./triangle-alert-CgctdoVb.js";import{T as Q}from"./trending-up-CRcGIWQN.js";import{C as W}from"./circle-x-WVieisiF.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=X("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),oe=()=>{const[D,R]=o.useState("bottlenecks"),[t,U]=o.useState(null),[g,L]=o.useState([]),[N,B]=o.useState([]),[n,z]=o.useState(null),[O,y]=o.useState(!0),[d,$]=o.useState(!0),m=async()=>{try{const[s,a,E,G]=await Promise.all([fetch("/api/internal-monitor/health"),fetch("/api/internal-monitor/bottlenecks?timeframe=1h"),fetch("/api/internal-monitor/corrections?limit=20"),fetch("/api/internal-monitor/metrics")]),[b,w,A,C]=await Promise.all([s.json(),a.json(),E.json(),G.json()]);b.success&&U(b.health),w.success&&L(w.bottlenecks),A.success&&B(A.corrections),C.success&&z(C.metrics),y(!1)}catch(s){console.error("Failed to fetch dashboard data:",s),y(!1)}},F=async()=>{try{(await(await fetch("/api/internal-monitor/start",{method:"POST"})).json()).success&&m()}catch(s){console.error("Failed to start monitoring:",s)}},v=async()=>{try{const a=await(await fetch("/api/internal-monitor/analyze",{method:"POST"})).json();a.success&&(console.log("Analysis triggered:",a.analysis),m())}catch(s){console.error("Failed to trigger analysis:",s)}};o.useEffect(()=>{if(m(),d){const s=setInterval(m,3e4);return()=>clearInterval(s)}},[d]);const u=s=>{switch(s){case"healthy":case"good":case"fast":case"low":return"text-green-600";case"degraded":case"slow":case"high":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}},H=s=>{switch(s){case"healthy":case"good":case"fast":case"low":return e.jsx(f,{className:"h-4 w-4 text-green-600"});case"degraded":case"slow":case"high":return e.jsx(M,{className:"h-4 w-4 text-yellow-600"});case"critical":return e.jsx(W,{className:"h-4 w-4 text-red-600"});default:return e.jsx(T,{className:"h-4 w-4 text-gray-600"})}};return O?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading Internal Platform Monitor..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Internal Platform Monitor"}),e.jsx("p",{className:"text-gray-600",children:"AI-powered continuous monitoring and auto-correction"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(I,{variant:t!=null&&t.monitoring?"default":"secondary",children:t!=null&&t.monitoring?"Active":"Inactive"}),e.jsxs(x,{onClick:F,size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Start Monitor"]}),e.jsxs(x,{onClick:v,size:"sm",variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"AI Analysis"]}),e.jsx(x,{onClick:()=>$(!d),size:"sm",variant:d?"default":"outline",children:"Auto Refresh"})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Overall Health"}),H(t.overall)]}),e.jsxs(l,{children:[e.jsx("div",{className:`text-2xl font-bold ${u(t.overall)}`,children:t.overall.toUpperCase()}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Last check: ",Math.round(t.lastCheck/1e3),"s ago"]})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"API Performance"}),e.jsx(Y,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(l,{children:[e.jsx("div",{className:`text-2xl font-bold ${u(t.api)}`,children:t.api.toUpperCase()}),e.jsx(k,{value:t.api==="good"?85:45,className:"mt-2"})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Memory Usage"}),e.jsx(T,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(l,{children:[e.jsx("div",{className:`text-2xl font-bold ${u(t.memory)}`,children:t.memory.toUpperCase()}),e.jsx(k,{value:t.memory==="good"?60:85,className:"mt-2"})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Auto-Corrections"}),e.jsx(S,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.corrections}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.bottlenecks," active bottlenecks"]})]})]})]}),(t==null?void 0:t.overall)==="critical"&&e.jsxs(J,{variant:"destructive",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(K,{children:"Critical issues detected. Platform AI Agent is actively correcting bottlenecks and crash points."})]}),e.jsxs(Z,{value:D,onValueChange:R,className:"space-y-4",children:[e.jsxs(q,{children:[e.jsx(h,{value:"bottlenecks",children:"Bottlenecks"}),e.jsx(h,{value:"corrections",children:"Auto-Corrections"}),e.jsx(h,{value:"metrics",children:"Real-time Metrics"}),e.jsx(h,{value:"analysis",children:"AI Analysis"})]}),e.jsx(j,{value:"bottlenecks",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(i,{children:"Recent Bottlenecks"}),e.jsx(p,{children:"Detected performance bottlenecks in the last hour"})]}),e.jsx(l,{children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),"No bottlenecks detected in the last hour"]}):e.jsx("div",{className:"space-y-3",children:g.slice(0,10).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{variant:s.severity==="critical"?"destructive":"secondary",children:s.severity}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.type}),e.jsx("p",{className:"text-sm text-gray-500",children:s.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:[s.value,"ms"]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleTimeString()})]})]},a))})})]})}),e.jsx(j,{value:"corrections",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(i,{children:"Auto-Corrections History"}),e.jsx(p,{children:"Recent automated fixes applied by the Platform AI Agent"})]}),e.jsx(l,{children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(S,{className:"h-12 w-12 mx-auto mb-4"}),"No corrections needed recently"]}):e.jsx("div",{className:"space-y-3",children:N.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.action}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.type," at ",s.location]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleTimeString()})})]},a))})})]})}),e.jsx(j,{value:"metrics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(i,{children:"API Performance"})}),e.jsx(l,{children:n!=null&&n.api?e.jsx("div",{className:"space-y-2",children:Object.entries(n.api).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("span",{className:"text-sm font-medium",children:a.length>0?`${Math.round(a[a.length-1].duration)}ms`:"N/A"})]},s))}):e.jsx("p",{className:"text-gray-500",children:"No API metrics available"})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(i,{children:"UI Performance"})}),e.jsx(l,{children:n!=null&&n.ui?e.jsx("div",{className:"space-y-2",children:Object.entries(n.ui).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("span",{className:"text-sm font-medium",children:a.length>0?`${Math.round(a[a.length-1].duration)}ms`:"N/A"})]},s))}):e.jsx("p",{className:"text-gray-500",children:"No UI metrics available"})})]})]})}),e.jsx(j,{value:"analysis",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(i,{children:"AI-Powered Analysis"}),e.jsx(p,{children:"Intelligent platform monitoring and optimization recommendations"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Continuous AI Monitoring Active"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"The Platform AI Agent continuously monitors all aspects of the SPIRAL platform, including UI/UX performance, API response times, onboarding flows, and user experience. It automatically detects and corrects bottlenecks and crash points in real-time."}),e.jsxs(x,{onClick:v,className:"mt-4",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Trigger Deep Analysis"]})]})})]})})]})]})};export{oe as default};
