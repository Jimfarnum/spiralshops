var An=Object.defineProperty;var In=(r,t,s)=>t in r?An(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var o=(r,t,s)=>In(r,typeof t!="symbol"?t+"":t,s);import{c as q,r as M,u as me,j as e,C as O,a as oe,b as de,d as U,I as G,B as I,e as J,f as Ee,L as T,D as We,g as Ze,h as Je,i as Xe,S as X,k as li,X as ni,l as Pn,G as _e,m as Be,n as oi,o as Tn,H as ye,p as Ke,q as di,s as fe,t as ci,v as Cn,R as Mn,w as Ln}from"./index-sTi6BLPu.js";import{u as Ae}from"./useQuery-4av79AcX.js";import{S as H}from"./skeleton-BuZXPxt6.js";import{S as kn,a as Dn,A as ot,b as Fn,c as Rn,d as En,H as Bn}from"./header-DCxgILpP.js";import{F as zn}from"./footer-BkibQi5K.js";import{S as ui,a as mi,b as pi,c as hi,d as te}from"./select-U2_IWgob.js";import{B as qn}from"./building-2-CmMn_uHF.js";import{S as On}from"./search-BDvTlR0f.js";import{N as xi}from"./navigation-C4cgsc30.js";import{M as Y}from"./map-pin-DZnENn3K.js";import{U as ce}from"./users-n91sDYUr.js";import{T as Ye}from"./textarea-DwFaTdzp.js";import{L as se}from"./label-DXgakF6_.js";import{C as $e}from"./camera-D0xJbwXJ.js";import{U as fi}from"./upload-BkvHDh3T.js";import{M as dt}from"./message-circle-DYSFoP14.js";import{V as Vn}from"./VerifiedBadge-Y98Gviuo.js";import{B as Un,D as Kn,E as $n,I as Hn,N as Qn,O as Gn,P as Wn,Z as qe,a as Zn,b as Jn,c as Xn,d as Yn,e as eo,f as to,g as so,h as ro,i as ao,j as ct,k as io,l as lo,m as no,n as oo,o as co,p as uo,q as mo,r as po,s as ho,t as xo,u as fo,v as go,w as yo,x as No,y as vo,z as bo,A as jo,C as wo,F as _o,G as So,H as Ao,J as Io,K as Po,L as To,M as Co,Q as Mo,R as Lo,S as ko,T as Do,U as Fo,V as Ro,W as Ce,X as gi,Y as Eo,_ as yi,$ as Bo,a0 as Ni,a1 as zo,a2 as qo,a3 as Oo,a4 as Vo,a5 as ut,a6 as Uo,a7 as Ko,a8 as $o,a9 as Ho,aa as Qo,ab as Go,ac as Wo,ad as Zo,ae as Jo,af as Xo,ag as Yo,ah as ed,ai as td,aj as sd,ak as rd,al as ad,am as id,an as ld,ao as vi,ap as nd,aq as bi,ar as ji,as as od,at as dd,au as cd,av as ud,aw as md,ax as pd,ay as hd,az as xd,aA as fd,aB as wi,aC as gd,aD as yd,aE as Nd,aF as _i,aG as vd,aH as bd,aI as jd,aJ as et,aK as wd,aL as _d,aM as Sd,aN as Ad,aO as Id,aP as re,aQ as ae,aR as ie,aS as le,aT as ne,aU as Pd}from"./form-MzfRCZUy.js";import{u as Td}from"./useMutation-DaiJly-X.js";import{T as tt}from"./trending-up-CRcGIWQN.js";import{S as st}from"./smartphone-CbteIkmi.js";import{P as mt}from"./phone-BLNZn_t1.js";import{M as Cd}from"./mail-DqqPECWJ.js";import{S as rt}from"./shopping-cart-DjSog6GS.js";import{R as Md}from"./refresh-cw-bGZJGN_p.js";import{P as Pe}from"./progress-Cf362TSq.js";import{Z as at}from"./zap-1vep6Tn5.js";import{A as pt}from"./activity-_qjqvmcS.js";import{M as Ld}from"./monitor-Db0OONNE.js";import{D as kd}from"./download-DcxnRBbC.js";import{S as Dd}from"./slider-ChWMMbUW.js";import{P as Si}from"./palette-DAGqGm_D.js";import{S as Se}from"./sparkles-BuZ9UEHA.js";import{S as He}from"./shopping-bag-B6bbBeT-.js";import{H as Fd}from"./house-CU825Ekn.js";import{E as ht}from"./eye-BfDIBTgL.js";import{C as Rd}from"./calendar-CZXggfH7.js";import{T as Ed}from"./tag-CqFZGnDZ.js";import{A as Bd}from"./arrow-right-BiMhyQ9i.js";import{S as zd}from"./separator-BcewAmr9.js";import{B as qd}from"./brain-Iy1Wa04O.js";import{I as Od}from"./info-CHxOX6WX.js";import"./authStore-CZi0z4It.js";import"./user-DzNM48-o.js";import"./truck-CNzMFiRQ.js";import"./store-fvM_Wsk5.js";import"./rocket-45aKcxBS.js";import"./shield-DYGAM3k4.js";import"./credit-card-B1A0ZWNg.js";import"./check-Cok4To_4.js";import"./globe-xPv-iFng.js";import"./wallet-CrGmaB25.js";import"./index-BdQq_4o_.js";import"./chevron-down-BDj7HIg7.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=q("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=q("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=q("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=q("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=q("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=q("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=q("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=q("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=q("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=q("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=q("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=q("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=q("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=q("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=q("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=q("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=q("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=q("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=q("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=q("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Te=[{id:"westfield-valley-fair",name:"Westfield Valley Fair",address:"2855 Stevens Creek Blvd",city:"Santa Clara",state:"CA",zipCode:"95050",storeCount:240,type:"shopping_center",features:["SPIRAL Center","Food Court","Valet Parking","Family Lounge"],hours:"Mon-Sat 10AM-9PM, Sun 11AM-7PM",phone:"(408) 248-4451"},{id:"stanford-shopping-center",name:"Stanford Shopping Center",address:"660 Stanford Shopping Center",city:"Palo Alto",state:"CA",zipCode:"94304",storeCount:140,type:"lifestyle",features:["SPIRAL Center","Outdoor Dining","Tesla Supercharger","Pet Friendly"],hours:"Mon-Sat 10AM-9PM, Sun 11AM-6PM",phone:"(650) 617-8200"},{id:"santana-row",name:"Santana Row",address:"377 Santana Row",city:"San Jose",state:"CA",zipCode:"95128",storeCount:70,type:"lifestyle",features:["SPIRAL Center","Residential","Nightlife","Events"],hours:"Daily 10AM-10PM",phone:"(408) 551-4611"},{id:"great-mall",name:"Great Mall",address:"447 Great Mall Dr",city:"Milpitas",state:"CA",zipCode:"95035",storeCount:200,type:"outlet",features:["SPIRAL Center","Outlet Stores","Movie Theater","Arcade"],hours:"Mon-Sat 10AM-9PM, Sun 11AM-8PM",phone:"(408) 956-2033"}];function nc({onMallSelect:r,showLocator:t=!0,className:s=""}){const[i,d]=M.useState(""),[u,c]=M.useState(null),[m,v]=M.useState([]),[S,h]=M.useState(!1),[w,f]=M.useState(!1),{toast:A}=me(),P=()=>{if(!i.trim()){A({title:"Enter ZIP Code",description:"Please enter your ZIP code to find nearby malls.",variant:"destructive"});return}if(!/^\d{5}$/.test(i.trim())){A({title:"Invalid ZIP Code",description:"Please enter a valid 5-digit ZIP code.",variant:"destructive"});return}const x=Te.map(F=>({...F,distance:Math.floor(Math.random()*25)+1})).sort((F,xe)=>F.distance-xe.distance);v(x),f(!0),A({title:"Malls Found",description:`Found ${x.length} malls near ${i}`})},j=()=>{h(!0),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(x=>{const F=Te.map(xe=>({...xe,distance:Math.floor(Math.random()*15)+1})).sort((xe,Sn)=>xe.distance-Sn.distance);v(F),f(!0),h(!1),A({title:"Location Found",description:`Found ${F.length} malls near your location`})},()=>{h(!1),A({title:"Location Access Denied",description:"Please enter your ZIP code to find nearby malls.",variant:"destructive"})}):(h(!1),A({title:"Location Not Supported",description:"Please enter your ZIP code to find nearby malls.",variant:"destructive"}))},E=x=>{c(x),f(!1),r==null||r(x),A({title:"Mall Selected",description:`Now browsing ${x.name}`})},he=x=>{switch(x){case"shopping_center":return"bg-blue-100 text-blue-800";case"outlet":return"bg-green-100 text-green-800";case"lifestyle":return"bg-purple-100 text-purple-800";case"strip_mall":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:`relative ${s}`,children:e.jsxs(O,{className:"shadow-lg border-0 bg-white",children:[e.jsx(oe,{className:"pb-4",children:e.jsxs(de,{className:"flex items-center gap-2 text-[var(--spiral-navy)]",children:[e.jsx(qn,{className:"h-5 w-5"}),"Mall Directory & Locator"]})}),e.jsxs(U,{className:"space-y-4",children:[t&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"Enter ZIP code",value:i,onChange:x=>d(x.target.value),className:"flex-1",maxLength:5}),e.jsx(I,{onClick:P,size:"sm",variant:"outline",children:e.jsx(On,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 border-t border-gray-200"}),e.jsx("span",{className:"text-sm text-gray-500",children:"or"}),e.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),e.jsxs(I,{onClick:j,disabled:S,variant:"outline",className:"w-full",size:"sm",children:[e.jsx(xi,{className:`h-4 w-4 mr-2 ${S?"animate-spin":""}`}),S?"Finding Your Location...":"Use My Location"]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs(ui,{onValueChange:x=>{const F=Te.find(xe=>xe.id===x);F&&E(F)},children:[e.jsx(mi,{children:e.jsx(pi,{placeholder:"Select a mall to browse"})}),e.jsx(hi,{children:Te.map(x=>e.jsx(te,{value:x.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:x.name}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[x.city,", ",x.state]})]})},x.id))})]})}),u&&e.jsx(O,{className:"bg-[var(--spiral-cream)] border-[var(--spiral-coral)]",children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-[var(--spiral-navy)]",children:u.name}),e.jsx(J,{className:he(u.type),children:u.type.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),u.address,", ",u.city,", ",u.state]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),u.storeCount," stores"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ee,{className:"h-3 w-3"}),u.hours]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(T,{to:`/mall/${u.id}`,children:e.jsx(I,{size:"sm",className:"button-primary",children:"Visit Mall Page"})}),e.jsx(I,{size:"sm",variant:"outline",onClick:()=>c(null),children:"Clear Selection"})]})]})}),w&&m.length>0&&e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[e.jsx("h4",{className:"font-medium text-sm text-[var(--spiral-navy)]",children:"Nearby Malls"}),m.map(x=>e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:border-[var(--spiral-coral)]",onClick:()=>E(x),children:e.jsxs(U,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h5",{className:"font-medium text-sm",children:x.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:he(x.type),variant:"secondary",children:x.type.replace("_"," ")}),x.distance&&e.jsxs("span",{className:"text-xs text-gray-500",children:[x.distance," mi"]})]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[x.city,", ",x.state," • ",x.storeCount," stores"]}),e.jsx("div",{className:"flex gap-1 mt-2",children:x.features.slice(0,2).map(F=>e.jsx(J,{variant:"outline",className:"text-xs",children:F},F))})]})},x.id))]})]})]})})}function oc({isOpen:r,onClose:t}){const[s,i]=M.useState({name:"",location:"",storeName:"",story:"",photo:null}),[d,u]=M.useState(!1),{toast:c}=me(),m=w=>{w.preventDefault(),c({title:"Story submitted successfully!",description:"Thank you for sharing your SPIRAL experience. It will be reviewed and may appear on our homepage."}),i({name:"",location:"",storeName:"",story:"",photo:null}),t()},v=w=>{w.preventDefault(),w.stopPropagation(),w.type==="dragenter"||w.type==="dragover"?u(!0):w.type==="dragleave"&&u(!1)},S=w=>{w.preventDefault(),w.stopPropagation(),u(!1),w.dataTransfer.files&&w.dataTransfer.files[0]&&i({...s,photo:w.dataTransfer.files[0]})},h=w=>{w.target.files&&w.target.files[0]&&i({...s,photo:w.target.files[0]})};return e.jsx(We,{open:r,onOpenChange:t,children:e.jsxs(Ze,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Je,{children:[e.jsxs(Xe,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(X,{className:"h-6 w-6 text-[var(--spiral-gold)]"}),"Share Your SPIRAL Story"]}),e.jsx(li,{children:"Tell us about your amazing local shopping experience and inspire others in the community"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{htmlFor:"name",children:"Your Name (First name + last initial)"}),e.jsx(G,{id:"name",value:s.name,onChange:w=>i({...s,name:w.target.value}),placeholder:"e.g., Sarah M.",required:!0})]}),e.jsxs("div",{children:[e.jsx(se,{htmlFor:"location",children:"Your Area"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(G,{id:"location",value:s.location,onChange:w=>i({...s,location:w.target.value}),placeholder:"e.g., Downtown, Riverside",className:"pl-10",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx(se,{htmlFor:"storeName",children:"Store/Business Name"}),e.jsx(G,{id:"storeName",value:s.storeName,onChange:w=>i({...s,storeName:w.target.value}),placeholder:"e.g., Local Roasters Co., Artisan Corner",required:!0})]}),e.jsxs("div",{children:[e.jsx(se,{htmlFor:"story",children:"Your SPIRAL Story"}),e.jsx(Ye,{id:"story",value:s.story,onChange:w=>i({...s,story:w.target.value}),placeholder:"Tell us about your experience! What made it special? How did the store owners make you feel? What did you discover?",rows:4,maxLength:300,required:!0}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.story.length,"/300 characters"]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Add a Photo (Optional)"}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${d?"border-[var(--spiral-coral)] bg-[var(--spiral-coral)]/5":"border-gray-300 hover:border-[var(--spiral-coral)]"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:S,children:s.photo?e.jsxs("div",{className:"space-y-2",children:[e.jsx($e,{className:"h-8 w-8 text-[var(--spiral-coral)] mx-auto"}),e.jsx("p",{className:"text-sm font-medium",children:s.photo.name}),e.jsx(I,{type:"button",variant:"outline",size:"sm",onClick:()=>i({...s,photo:null}),children:"Remove Photo"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(fi,{className:"h-8 w-8 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Drag and drop a photo here, or"}),e.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"hidden",id:"photo-upload"}),e.jsx(se,{htmlFor:"photo-upload",className:"cursor-pointer",children:e.jsx(I,{type:"button",variant:"outline",size:"sm",className:"mt-2",children:"Choose File"})})]})]})})]}),e.jsx(O,{className:"bg-[var(--spiral-cream)] border-[var(--spiral-coral)]/20",children:e.jsxs(U,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)] mb-2",children:"Preview"}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[var(--spiral-coral)]/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-[var(--spiral-navy)]",children:s.name?s.name.charAt(0).toUpperCase():"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name||"Your Name"}),e.jsx("p",{className:"text-xs text-gray-500",children:s.location||"Your Area"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("span",{className:"text-xs px-2 py-1 bg-[var(--spiral-gold)] text-white rounded-full",children:"SPIRAL Story"})})]}),e.jsxs("p",{className:"text-sm text-gray-700 italic mb-2",children:['"',s.story||"Your story will appear here...",'"']}),e.jsx("p",{className:"text-xs text-[var(--spiral-coral)] font-medium",children:s.storeName||"Store Name"})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(I,{type:"submit",className:"button-primary flex-1",disabled:!s.name||!s.location||!s.storeName||!s.story,children:"Share My Story"})]})]})]})})}function dc(){const[r,t]=M.useState(!1),[s,i]=M.useState(!1),[d,u]=M.useState(""),[c,m]=M.useState([{id:1,text:"Hi! Welcome to SPIRAL. I'm here to help you with any questions about local shopping, SPIRALs, or our platform. How can I assist you today?",sender:"agent",timestamp:new Date(Date.now()-2e3),name:"Maya - SPIRAL Support"}]),[v,S]=M.useState(!1),h=M.useRef(null),w=()=>{var P;(P=h.current)==null||P.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{w()},[c]);const f=()=>{if(d.trim()){const P={id:c.length+1,text:d,sender:"user",timestamp:new Date,name:"You"};m([...c,P]),u(""),S(!0),setTimeout(()=>{const j=["Thanks for your message! For questions about SPIRALs, you earn 5 points per $100 spent online and 10 points per $100 in-store. Is there something specific you'd like to know?","I'd be happy to help you find local stores! What type of business are you looking for and in which area?","Great question! Local retailers love SPIRAL because it helps them connect with community members. Would you like me to connect you with our retailer onboarding team?","I can help you with that! For account-related questions, you can also visit your profile settings or contact our support team directly.","That sounds like a wonderful SPIRAL story! Have you considered sharing it on our homepage? You can use the 'Share My SPIRAL Story' button."],E=j[Math.floor(Math.random()*j.length)],he={id:c.length+2,text:E,sender:"agent",timestamp:new Date,name:"Maya - SPIRAL Support"};m(x=>[...x,he]),S(!1)},1500)}},A=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),f())};return r?e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(O,{className:`w-80 bg-white shadow-2xl border-0 transition-all duration-300 ${s?"h-16":"h-96"}`,children:[e.jsx(oe,{className:"p-4 bg-[var(--spiral-coral)] text-white rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(dt,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(de,{className:"text-sm font-semibold",children:"SPIRAL Support"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-90",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:"Online now"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>i(!s),className:"h-6 w-6 p-0 text-white hover:bg-white/20",children:e.jsx(Gd,{className:"h-3 w-3"})}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"h-6 w-6 p-0 text-white hover:bg-white/20",children:e.jsx(ni,{className:"h-3 w-3"})})]})]})}),!s&&e.jsxs(U,{className:"p-0 flex flex-col h-80",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c.map(P=>e.jsx("div",{className:`flex ${P.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${P.sender==="user"?"order-2":"order-1"}`,children:[P.sender==="agent"&&e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:P.name}),e.jsx("div",{className:`rounded-lg px-3 py-2 text-sm ${P.sender==="user"?"bg-[var(--spiral-coral)] text-white":"bg-gray-100 text-gray-800"}`,children:P.text}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:P.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},P.id)),v&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 rounded-lg px-3 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),e.jsx("div",{ref:h})]}),e.jsxs("div",{className:"border-t p-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:d,onChange:P=>u(P.target.value),onKeyPress:A,placeholder:"Type your message...",className:"flex-1 text-sm border-gray-200 focus:border-[var(--spiral-coral)]"}),e.jsx(I,{onClick:f,disabled:!d.trim(),className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90 text-white px-3",children:e.jsx(Xd,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>u("How do SPIRALs work?"),className:"text-xs px-2 py-1 h-6",children:"SPIRALs Help"}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>u("Find local stores"),className:"text-xs px-2 py-1 h-6",children:"Find Stores"})]})]})]})]})}):e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsx(I,{onClick:()=>t(!0),className:"h-14 w-14 rounded-full bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90 text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center",children:e.jsx(dt,{className:"h-6 w-6"})}),e.jsx("div",{className:"absolute -top-1 -right-1",children:e.jsx(J,{className:"bg-[var(--spiral-gold)] text-white text-xs px-1.5 py-0.5 animate-pulse",children:"💬"})})]})}function cc({store:r}){return e.jsxs(O,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:r.imageUrl||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400",alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),e.jsx("span",{className:"text-sm text-gray-500",children:"0.3 mi"})]}),e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx(Vn,{isVerified:r.isVerified||!1,tier:r.verificationTier}),r.isVerified&&e.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx("span",{children:"🛡️"}),e.jsx("span",{children:"Verified Business"})]})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,s)=>e.jsx(X,{className:"h-4 w-4 fill-current"},s))}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[r.rating," (",r.reviewCount," reviews)"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:r.address})]}),e.jsx(T,{to:`/store/${r.id}`,children:e.jsx(I,{className:"w-full bg-spiral-blue text-white hover:bg-spiral-blue-dark",children:"View Store"})})]})]})}const p=Symbol.for("drizzle:entityKind");function $(r,t){if(!r||typeof r!="object")return!1;if(r instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,p))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(r).constructor;if(s)for(;s;){if(p in s&&s[p]===t[p])return!0;s=Object.getPrototypeOf(s)}return!1}var _t;_t=p;class be{constructor(t,s){o(this,"name");o(this,"keyAsName");o(this,"primary");o(this,"notNull");o(this,"default");o(this,"defaultFn");o(this,"onUpdateFn");o(this,"hasDefault");o(this,"isUnique");o(this,"uniqueName");o(this,"uniqueType");o(this,"dataType");o(this,"columnType");o(this,"enumValues");o(this,"generated");o(this,"generatedIdentity");o(this,"config");this.table=t,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}o(be,_t,"Column");var St;St=p;class Ai{constructor(t,s,i){o(this,"config");o(this,"$default",this.$defaultFn);o(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}o(Ai,St,"ColumnBuilder");const Ne=Symbol.for("drizzle:Name");var At;At=p;class Ii{constructor(t,s){o(this,"reference");o(this,"_onUpdate","no action");o(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:d,foreignColumns:u}=t();return{name:i,columns:d,foreignTable:u[0].table,foreignColumns:u}},s&&(this._onUpdate=s.onUpdate,this._onDelete=s.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new Pi(t,this)}}o(Ii,At,"PgForeignKeyBuilder");var It;It=p;class Pi{constructor(t,s){o(this,"reference");o(this,"onUpdate");o(this,"onDelete");this.table=t,this.reference=s.reference,this.onUpdate=s._onUpdate,this.onDelete=s._onDelete}getName(){const{name:t,columns:s,foreignColumns:i}=this.reference(),d=s.map(m=>m.name),u=i.map(m=>m.name),c=[this.table[Ne],...d,i[0].table[Ne],...u];return t??`${c.join("_")}_fk`}}o(Pi,It,"PgForeignKey");function uc(r,...t){return r(...t)}function mc(r,t){return`${r[Ne]}_${t.join("_")}_unique`}function ft(r,t,s){for(let i=t;i<r.length;i++){const d=r[i];if(d==="\\"){i++;continue}if(d==='"')return[r.slice(t,i).replace(/\\/g,""),i+1];if(!s&&(d===","||d==="}"))return[r.slice(t,i).replace(/\\/g,""),i]}return[r.slice(t).replace(/\\/g,""),r.length]}function Ti(r,t=0){const s=[];let i=t,d=!1;for(;i<r.length;){const u=r[i];if(u===","){(d||i===t)&&s.push(""),d=!0,i++;continue}if(d=!1,u==="\\"){i+=2;continue}if(u==='"'){const[v,S]=ft(r,i+1,!0);s.push(v),i=S;continue}if(u==="}")return[s,i+1];if(u==="{"){const[v,S]=Ti(r,i+1);s.push(v),i=S;continue}const[c,m]=ft(r,i,!1);s.push(c),i=m}return[s,i]}function pc(r){const[t]=Ti(r,1);return t}function Ci(r){return`{${r.map(t=>Array.isArray(t)?Ci(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var Pt,Tt;class k extends(Tt=Ai,Pt=p,Tt){constructor(){super(...arguments);o(this,"foreignKeyConfigs",[])}array(s){return new Li(this.config.name,this,s)}references(s,i={}){return this.foreignKeyConfigs.push({ref:s,actions:i}),this}unique(s,i){return this.config.isUnique=!0,this.config.uniqueName=s,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(s){return this.config.generated={as:s,type:"always",mode:"stored"},this}buildForeignKeys(s,i){return this.foreignKeyConfigs.map(({ref:d,actions:u})=>uc((c,m)=>{const v=new Ii(()=>{const S=c();return{columns:[s],foreignColumns:[S]}});return m.onUpdate&&v.onUpdate(m.onUpdate),m.onDelete&&v.onDelete(m.onDelete),v.build(i)},d,u))}buildExtraConfigColumn(s){return new Mi(s,this.config)}}o(k,Pt,"PgColumnBuilder");var Ct,Mt;class C extends(Mt=be,Ct=p,Mt){constructor(t,s){s.uniqueName||(s.uniqueName=mc(t,[s.name])),super(t,s),this.table=t}}o(C,Ct,"PgColumn");var Lt,kt;class Mi extends(kt=C,Lt=p,kt){constructor(){super(...arguments);o(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});o(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(s){return this.indexConfig.opClass=s,this}}o(Mi,Lt,"ExtraConfigColumn");var Dt,Ft;class Li extends(Ft=k,Dt=p,Ft){constructor(t,s,i){super(t,"array","PgArray"),this.config.baseBuilder=s,this.config.size=i}build(t){const s=this.config.baseBuilder.build(t);return new Qe(t,this.config,s)}}o(Li,Dt,"PgArrayBuilder");var Rt,Et;const Re=class Re extends(Et=C,Rt=p,Et){constructor(s,i,d,u){super(s,i);o(this,"size");this.baseColumn=d,this.range=u,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(s){return typeof s=="string"&&(s=pc(s)),s.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(s,i=!1){const d=s.map(u=>u===null?null:$(this.baseColumn,Re)?this.baseColumn.mapToDriverValue(u,!0):this.baseColumn.mapToDriverValue(u));return i?d:Ci(d)}};o(Re,Rt,"PgArray");let Qe=Re;const gt=Symbol.for("drizzle:isPgEnum");function hc(r){return!!r&&typeof r=="function"&&gt in r&&r[gt]===!0}var Bt;Bt=p;class it{constructor(t,s,i,d=!1){this._={brand:"Subquery",sql:t,selectedFields:s,alias:i,isWith:d}}}o(it,Bt,"Subquery");const xc={startActiveSpan(r,t){return t()}},ve=Symbol.for("drizzle:ViewBaseConfig"),Oe=Symbol.for("drizzle:Schema"),yt=Symbol.for("drizzle:Columns"),Nt=Symbol.for("drizzle:ExtraConfigColumns"),Ve=Symbol.for("drizzle:OriginalName"),Ue=Symbol.for("drizzle:BaseName"),Me=Symbol.for("drizzle:IsAlias"),vt=Symbol.for("drizzle:ExtraConfigBuilder"),ki=Symbol.for("drizzle:IsDrizzleTable");var zt,qt,Ot,Vt,Ut,Kt,$t,Ht,Qt,Gt;Gt=p,Qt=Ne,Ht=Ve,$t=Oe,Kt=yt,Ut=Nt,Vt=Ue,Ot=Me,qt=ki,zt=vt;class Q{constructor(t,s,i){o(this,Qt);o(this,Ht);o(this,$t);o(this,Kt);o(this,Ut);o(this,Vt);o(this,Ot,!1);o(this,qt,!0);o(this,zt);this[Ne]=this[Ve]=t,this[Oe]=s,this[Ue]=i}}o(Q,Gt,"Table"),o(Q,"Symbol",{Name:Ne,Schema:Oe,OriginalName:Ve,Columns:yt,ExtraConfigColumns:Nt,BaseName:Ue,IsAlias:Me,ExtraConfigBuilder:vt});function Di(r){return typeof r=="object"&&r!==null&&ki in r}function fc(r){return r!=null&&typeof r.getSQL=="function"}function gc(r){var s;const t={sql:"",params:[]};for(const i of r)t.sql+=i.sql,t.params.push(...i.params),(s=i.typings)!=null&&s.length&&(t.typings||(t.typings=[]),t.typings.push(...i.typings));return t}var Wt;Wt=p;class Z{constructor(t){o(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new V([this])}}o(Z,Wt,"StringChunk");var Zt;Zt=p;const ge=class ge{constructor(t){o(this,"decoder",Fi);o(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return xc.startActiveSpan("drizzle.buildSQL",s=>{const i=this.buildQueryFromSourceParams(this.queryChunks,t);return s==null||s.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(t,s){const i=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:d,escapeName:u,escapeParam:c,prepareTyping:m,inlineParams:v,paramStartIndex:S}=i;return gc(t.map(h=>{var w;if($(h,Z))return{sql:h.value.join(""),params:[]};if($(h,Le))return{sql:u(h.value),params:[]};if(h===void 0)return{sql:"",params:[]};if(Array.isArray(h)){const f=[new Z("(")];for(const[A,P]of h.entries())f.push(P),A<h.length-1&&f.push(new Z(", "));return f.push(new Z(")")),this.buildQueryFromSourceParams(f,i)}if($(h,ge))return this.buildQueryFromSourceParams(h.queryChunks,{...i,inlineParams:v||h.shouldInlineParams});if($(h,Q)){const f=h[Q.Symbol.Schema],A=h[Q.Symbol.Name];return{sql:f===void 0||h[Me]?u(A):u(f)+"."+u(A),params:[]}}if($(h,be)){const f=d.getColumnCasing(h);if(s.invokeSource==="indexes")return{sql:u(f),params:[]};const A=h.table[Q.Symbol.Schema];return{sql:h.table[Me]||A===void 0?u(h.table[Q.Symbol.Name])+"."+u(f):u(A)+"."+u(h.table[Q.Symbol.Name])+"."+u(f),params:[]}}if($(h,Bi)){const f=h[ve].schema,A=h[ve].name;return{sql:f===void 0||h[ve].isAlias?u(A):u(f)+"."+u(A),params:[]}}if($(h,lt)){if($(h.value,De))return{sql:c(S.value++,h),params:[h],typings:["none"]};const f=h.value===null?null:h.encoder.mapToDriverValue(h.value);if($(f,ge))return this.buildQueryFromSourceParams([f],i);if(v)return{sql:this.mapInlineParam(f,i),params:[]};let A=["none"];return m&&(A=[m(h.encoder)]),{sql:c(S.value++,f),params:[f],typings:A}}return $(h,De)?{sql:c(S.value++,h),params:[h],typings:["none"]}:$(h,ge.Aliased)&&h.fieldAlias!==void 0?{sql:u(h.fieldAlias),params:[]}:$(h,it)?h._.isWith?{sql:u(h._.alias),params:[]}:this.buildQueryFromSourceParams([new Z("("),h._.sql,new Z(") "),new Le(h._.alias)],i):hc(h)?h.schema?{sql:u(h.schema)+"."+u(h.enumName),params:[]}:{sql:u(h.enumName),params:[]}:fc(h)?(w=h.shouldOmitSQLParens)!=null&&w.call(h)?this.buildQueryFromSourceParams([h.getSQL()],i):this.buildQueryFromSourceParams([new Z("("),h.getSQL(),new Z(")")],i):v?{sql:this.mapInlineParam(h,i),params:[]}:{sql:c(S.value++,h),params:[h],typings:["none"]}}))}mapInlineParam(t,{escapeString:s}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return s(t);if(typeof t=="object"){const i=t.toString();return s(i==="[object Object]"?JSON.stringify(t):i)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new ge.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};o(ge,Zt,"SQL");let V=ge;var Jt;Jt=p;class Le{constructor(t){o(this,"brand");this.value=t}getSQL(){return new V([this])}}o(Le,Jt,"Name");const Fi={mapFromDriverValue:r=>r},Ri={mapToDriverValue:r=>r};({...Fi,...Ri});var Xt;Xt=p;class lt{constructor(t,s=Ri){o(this,"brand");this.value=t,this.encoder=s}getSQL(){return new V([this])}}o(lt,Xt,"Param");function ke(r,...t){const s=[];(t.length>0||r.length>0&&r[0]!=="")&&s.push(new Z(r[0]));for(const[i,d]of t.entries())s.push(d,new Z(r[i+1]));return new V(s)}(r=>{function t(){return new V([])}r.empty=t;function s(v){return new V(v)}r.fromList=s;function i(v){return new V([new Z(v)])}r.raw=i;function d(v,S){const h=[];for(const[w,f]of v.entries())w>0&&S!==void 0&&h.push(S),h.push(f);return new V(h)}r.join=d;function u(v){return new Le(v)}r.identifier=u;function c(v){return new De(v)}r.placeholder=c;function m(v,S){return new lt(v,S)}r.param=m})(ke||(ke={}));(r=>{var s;s=p;const i=class i{constructor(u,c){o(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=c}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};o(i,s,"SQL.Aliased");let t=i;r.Aliased=t})(V||(V={}));var Yt;Yt=p;class De{constructor(t){this.name=t}getSQL(){return new V([this])}}o(De,Yt,"Placeholder");const Ei=Symbol.for("drizzle:IsDrizzleView");var es,ts,ss;ss=p,ts=ve,es=Ei;class Bi{constructor({name:t,schema:s,selectedFields:i,query:d}){o(this,ts);o(this,es,!0);this[ve]={name:t,originalName:t,schema:s,selectedFields:i,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new V([this])}}o(Bi,ss,"View");function yc(r){return typeof r=="object"&&r!==null&&Ei in r}be.prototype.getSQL=function(){return new V([this])};Q.prototype.getSQL=function(){return new V([this])};it.prototype.getSQL=function(){return new V([this])};function Nc(r){return r[Q.Symbol.Columns]}function vc(r){return r[ve].selectedFields}function K(r,t){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:t}}var rs,as;class Ie extends(as=k,rs=p,as){generatedAlwaysAsIdentity(t){if(t){const{name:s,...i}=t;this.config.generatedIdentity={type:"always",sequenceName:s,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:s,...i}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:s,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}o(Ie,rs,"PgIntColumnBaseBuilder");var is,ls;class zi extends(ls=Ie,is=p,ls){constructor(t){super(t,"number","PgBigInt53")}build(t){return new qi(t,this.config)}}o(zi,is,"PgBigInt53Builder");var ns,os;class qi extends(os=C,ns=p,os){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}o(qi,ns,"PgBigInt53");var ds,cs;class Oi extends(cs=Ie,ds=p,cs){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new Vi(t,this.config)}}o(Oi,ds,"PgBigInt64Builder");var us,ms;class Vi extends(ms=C,us=p,ms){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}o(Vi,us,"PgBigInt64");function bc(r,t){const{name:s,config:i}=K(r,t);return i.mode==="number"?new zi(s):new Oi(s)}var ps,hs;class Ui extends(hs=k,ps=p,hs){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Ki(t,this.config)}}o(Ui,ps,"PgBigSerial53Builder");var xs,fs;class Ki extends(fs=C,xs=p,fs){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}o(Ki,xs,"PgBigSerial53");var gs,ys;class $i extends(ys=k,gs=p,ys){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new Hi(t,this.config)}}o($i,gs,"PgBigSerial64Builder");var Ns,vs;class Hi extends(vs=C,Ns=p,vs){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}o(Hi,Ns,"PgBigSerial64");function jc(r,t){const{name:s,config:i}=K(r,t);return i.mode==="number"?new Ui(s):new $i(s)}var bs,js;class Qi extends(js=k,bs=p,js){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new Gi(t,this.config)}}o(Qi,bs,"PgBooleanBuilder");var ws,_s;class Gi extends(_s=C,ws=p,_s){getSQLType(){return"boolean"}}o(Gi,ws,"PgBoolean");function N(r){return new Qi(r??"")}var Ss,As;class Wi extends(As=k,Ss=p,As){constructor(t,s){super(t,"string","PgChar"),this.config.length=s.length,this.config.enumValues=s.enum}build(t){return new Zi(t,this.config)}}o(Wi,Ss,"PgCharBuilder");var Is,Ps;class Zi extends(Ps=C,Is=p,Ps){constructor(){super(...arguments);o(this,"length",this.config.length);o(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}o(Zi,Is,"PgChar");function wc(r,t={}){const{name:s,config:i}=K(r,t);return new Wi(s,i)}var Ts,Cs;class Ji extends(Cs=k,Ts=p,Cs){constructor(t){super(t,"string","PgCidr")}build(t){return new Xi(t,this.config)}}o(Ji,Ts,"PgCidrBuilder");var Ms,Ls;class Xi extends(Ls=C,Ms=p,Ls){getSQLType(){return"cidr"}}o(Xi,Ms,"PgCidr");function _c(r){return new Ji(r??"")}var ks,Ds;class Yi extends(Ds=k,ks=p,Ds){constructor(t,s,i){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=s,this.config.customTypeParams=i}build(t){return new el(t,this.config)}}o(Yi,ks,"PgCustomColumnBuilder");var Fs,Rs;class el extends(Rs=C,Fs=p,Rs){constructor(s,i){super(s,i);o(this,"sqlName");o(this,"mapTo");o(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}o(el,Fs,"PgCustomColumn");function Sc(r){return(t,s)=>{const{name:i,config:d}=K(t,s);return new Yi(i,d,r)}}var Es,Bs;class je extends(Bs=k,Es=p,Bs){defaultNow(){return this.default(ke`now()`)}}o(je,Es,"PgDateColumnBaseBuilder");var zs,qs;class tl extends(qs=je,zs=p,qs){constructor(t){super(t,"date","PgDate")}build(t){return new sl(t,this.config)}}o(tl,zs,"PgDateBuilder");var Os,Vs;class sl extends(Vs=C,Os=p,Vs){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}o(sl,Os,"PgDate");var Us,Ks;class rl extends(Ks=je,Us=p,Ks){constructor(t){super(t,"string","PgDateString")}build(t){return new al(t,this.config)}}o(rl,Us,"PgDateStringBuilder");var $s,Hs;class al extends(Hs=C,$s=p,Hs){getSQLType(){return"date"}}o(al,$s,"PgDateString");function Ac(r,t){const{name:s,config:i}=K(r,t);return(i==null?void 0:i.mode)==="date"?new tl(s):new rl(s)}var Qs,Gs;class il extends(Gs=k,Qs=p,Gs){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new ll(t,this.config)}}o(il,Qs,"PgDoublePrecisionBuilder");var Ws,Zs;class ll extends(Zs=C,Ws=p,Zs){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}o(ll,Ws,"PgDoublePrecision");function Ic(r){return new il(r??"")}var Js,Xs;class nl extends(Xs=k,Js=p,Xs){constructor(t){super(t,"string","PgInet")}build(t){return new ol(t,this.config)}}o(nl,Js,"PgInetBuilder");var Ys,er;class ol extends(er=C,Ys=p,er){getSQLType(){return"inet"}}o(ol,Ys,"PgInet");function Pc(r){return new nl(r??"")}var tr,sr;class dl extends(sr=Ie,tr=p,sr){constructor(t){super(t,"number","PgInteger")}build(t){return new cl(t,this.config)}}o(dl,tr,"PgIntegerBuilder");var rr,ar;class cl extends(ar=C,rr=p,ar){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}o(cl,rr,"PgInteger");function l(r){return new dl(r??"")}var ir,lr;class ul extends(lr=k,ir=p,lr){constructor(t,s){super(t,"string","PgInterval"),this.config.intervalConfig=s}build(t){return new ml(t,this.config)}}o(ul,ir,"PgIntervalBuilder");var nr,or;class ml extends(or=C,nr=p,or){constructor(){super(...arguments);o(this,"fields",this.config.intervalConfig.fields);o(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const s=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${s}${i}`}}o(ml,nr,"PgInterval");function Tc(r,t={}){const{name:s,config:i}=K(r,t);return new ul(s,i)}var dr,cr;class pl extends(cr=k,dr=p,cr){constructor(t){super(t,"json","PgJson")}build(t){return new hl(t,this.config)}}o(pl,dr,"PgJsonBuilder");var ur,mr;class hl extends(mr=C,ur=p,mr){constructor(t,s){super(t,s)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}o(hl,ur,"PgJson");function Cc(r){return new pl(r??"")}var pr,hr;class xl extends(hr=k,pr=p,hr){constructor(t){super(t,"json","PgJsonb")}build(t){return new fl(t,this.config)}}o(xl,pr,"PgJsonbBuilder");var xr,fr;class fl extends(fr=C,xr=p,fr){constructor(t,s){super(t,s)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}o(fl,xr,"PgJsonb");function R(r){return new xl(r??"")}var gr,yr;class gl extends(yr=k,gr=p,yr){constructor(t){super(t,"array","PgLine")}build(t){return new yl(t,this.config)}}o(gl,gr,"PgLineBuilder");var Nr,vr;class yl extends(vr=C,Nr=p,vr){getSQLType(){return"line"}mapFromDriverValue(t){const[s,i,d]=t.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(i),Number.parseFloat(d)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}o(yl,Nr,"PgLine");var br,jr;class Nl extends(jr=k,br=p,jr){constructor(t){super(t,"json","PgLineABC")}build(t){return new vl(t,this.config)}}o(Nl,br,"PgLineABCBuilder");var wr,_r;class vl extends(_r=C,wr=p,_r){getSQLType(){return"line"}mapFromDriverValue(t){const[s,i,d]=t.slice(1,-1).split(",");return{a:Number.parseFloat(s),b:Number.parseFloat(i),c:Number.parseFloat(d)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}o(vl,wr,"PgLineABC");function Mc(r,t){const{name:s,config:i}=K(r,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new gl(s):new Nl(s)}var Sr,Ar;class bl extends(Ar=k,Sr=p,Ar){constructor(t){super(t,"string","PgMacaddr")}build(t){return new jl(t,this.config)}}o(bl,Sr,"PgMacaddrBuilder");var Ir,Pr;class jl extends(Pr=C,Ir=p,Pr){getSQLType(){return"macaddr"}}o(jl,Ir,"PgMacaddr");function Lc(r){return new bl(r??"")}var Tr,Cr;class wl extends(Cr=k,Tr=p,Cr){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new _l(t,this.config)}}o(wl,Tr,"PgMacaddr8Builder");var Mr,Lr;class _l extends(Lr=C,Mr=p,Lr){getSQLType(){return"macaddr8"}}o(_l,Mr,"PgMacaddr8");function kc(r){return new wl(r??"")}var kr,Dr;class Sl extends(Dr=k,kr=p,Dr){constructor(t,s,i){super(t,"string","PgNumeric"),this.config.precision=s,this.config.scale=i}build(t){return new Al(t,this.config)}}o(Sl,kr,"PgNumericBuilder");var Fr,Rr;class Al extends(Rr=C,Fr=p,Rr){constructor(s,i){super(s,i);o(this,"precision");o(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}o(Al,Fr,"PgNumeric");function Il(r,t){const{name:s,config:i}=K(r,t);return new Sl(s,i==null?void 0:i.precision,i==null?void 0:i.scale)}const b=Il;var Er,Br;class Pl extends(Br=k,Er=p,Br){constructor(t){super(t,"array","PgPointTuple")}build(t){return new Tl(t,this.config)}}o(Pl,Er,"PgPointTupleBuilder");var zr,qr;class Tl extends(qr=C,zr=p,qr){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[s,i]=t.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(i)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}o(Tl,zr,"PgPointTuple");var Or,Vr;class Cl extends(Vr=k,Or=p,Vr){constructor(t){super(t,"json","PgPointObject")}build(t){return new Ml(t,this.config)}}o(Cl,Or,"PgPointObjectBuilder");var Ur,Kr;class Ml extends(Kr=C,Ur=p,Kr){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[s,i]=t.slice(1,-1).split(",");return{x:Number.parseFloat(s),y:Number.parseFloat(i)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}o(Ml,Ur,"PgPointObject");function Dc(r,t){const{name:s,config:i}=K(r,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new Pl(s):new Cl(s)}function Fc(r){const t=[];for(let s=0;s<r.length;s+=2)t.push(Number.parseInt(r.slice(s,s+2),16));return new Uint8Array(t)}function bt(r,t){const s=new ArrayBuffer(8),i=new DataView(s);for(let d=0;d<8;d++)i.setUint8(d,r[t+d]);return i.getFloat64(0,!0)}function Ll(r){const t=Fc(r);let s=0;const i=t[s];s+=1;const d=new DataView(t.buffer),u=d.getUint32(s,i===1);if(s+=4,u&536870912&&(d.getUint32(s,i===1),s+=4),(u&65535)===1){const c=bt(t,s);s+=8;const m=bt(t,s);return s+=8,[c,m]}throw new Error("Unsupported geometry type")}var $r,Hr;class kl extends(Hr=k,$r=p,Hr){constructor(t){super(t,"array","PgGeometry")}build(t){return new Dl(t,this.config)}}o(kl,$r,"PgGeometryBuilder");var Qr,Gr;class Dl extends(Gr=C,Qr=p,Gr){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return Ll(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}o(Dl,Qr,"PgGeometry");var Wr,Zr;class Fl extends(Zr=k,Wr=p,Zr){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new Rl(t,this.config)}}o(Fl,Wr,"PgGeometryObjectBuilder");var Jr,Xr;class Rl extends(Xr=C,Jr=p,Xr){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const s=Ll(t);return{x:s[0],y:s[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}o(Rl,Jr,"PgGeometryObject");function Rc(r,t){const{name:s,config:i}=K(r,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new kl(s):new Fl(s)}var Yr,ea;class El extends(ea=k,Yr=p,ea){constructor(t,s){super(t,"number","PgReal"),this.config.length=s}build(t){return new Bl(t,this.config)}}o(El,Yr,"PgRealBuilder");var ta,sa;class Bl extends(sa=C,ta=p,sa){constructor(s,i){super(s,i);o(this,"mapFromDriverValue",s=>typeof s=="string"?Number.parseFloat(s):s)}getSQLType(){return"real"}}o(Bl,ta,"PgReal");function Ec(r){return new El(r??"")}var ra,aa;class zl extends(aa=k,ra=p,aa){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new ql(t,this.config)}}o(zl,ra,"PgSerialBuilder");var ia,la;class ql extends(la=C,ia=p,la){getSQLType(){return"serial"}}o(ql,ia,"PgSerial");function y(r){return new zl(r??"")}var na,oa;class Ol extends(oa=Ie,na=p,oa){constructor(t){super(t,"number","PgSmallInt")}build(t){return new Vl(t,this.config)}}o(Ol,na,"PgSmallIntBuilder");var da,ca;class Vl extends(ca=C,da=p,ca){constructor(){super(...arguments);o(this,"mapFromDriverValue",s=>typeof s=="string"?Number(s):s)}getSQLType(){return"smallint"}}o(Vl,da,"PgSmallInt");function Bc(r){return new Ol(r??"")}var ua,ma;class Ul extends(ma=k,ua=p,ma){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Kl(t,this.config)}}o(Ul,ua,"PgSmallSerialBuilder");var pa,ha;class Kl extends(ha=C,pa=p,ha){getSQLType(){return"smallserial"}}o(Kl,pa,"PgSmallSerial");function zc(r){return new Ul(r??"")}var xa,fa;class $l extends(fa=k,xa=p,fa){constructor(t,s){super(t,"string","PgText"),this.config.enumValues=s.enum}build(t){return new Hl(t,this.config)}}o($l,xa,"PgTextBuilder");var ga,ya;class Hl extends(ya=C,ga=p,ya){constructor(){super(...arguments);o(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}o(Hl,ga,"PgText");function a(r,t={}){const{name:s,config:i}=K(r,t);return new $l(s,i)}var Na,va;class Ql extends(va=je,Na=p,va){constructor(t,s,i){super(t,"string","PgTime"),this.withTimezone=s,this.precision=i,this.config.withTimezone=s,this.config.precision=i}build(t){return new Gl(t,this.config)}}o(Ql,Na,"PgTimeBuilder");var ba,ja;class Gl extends(ja=C,ba=p,ja){constructor(s,i){super(s,i);o(this,"withTimezone");o(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}o(Gl,ba,"PgTime");function qc(r,t={}){const{name:s,config:i}=K(r,t);return new Ql(s,i.withTimezone??!1,i.precision)}var wa,_a;class Wl extends(_a=je,wa=p,_a){constructor(t,s,i){super(t,"date","PgTimestamp"),this.config.withTimezone=s,this.config.precision=i}build(t){return new Zl(t,this.config)}}o(Wl,wa,"PgTimestampBuilder");var Sa,Aa;class Zl extends(Aa=C,Sa=p,Aa){constructor(s,i){super(s,i);o(this,"withTimezone");o(this,"precision");o(this,"mapFromDriverValue",s=>new Date(this.withTimezone?s:s+"+0000"));o(this,"mapToDriverValue",s=>s.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}o(Zl,Sa,"PgTimestamp");var Ia,Pa;class Jl extends(Pa=je,Ia=p,Pa){constructor(t,s,i){super(t,"string","PgTimestampString"),this.config.withTimezone=s,this.config.precision=i}build(t){return new Xl(t,this.config)}}o(Jl,Ia,"PgTimestampStringBuilder");var Ta,Ca;class Xl extends(Ca=C,Ta=p,Ca){constructor(s,i){super(s,i);o(this,"withTimezone");o(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}o(Xl,Ta,"PgTimestampString");function n(r,t={}){const{name:s,config:i}=K(r,t);return(i==null?void 0:i.mode)==="string"?new Jl(s,i.withTimezone??!1,i.precision):new Wl(s,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var Ma,La;class Yl extends(La=k,Ma=p,La){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(ke`gen_random_uuid()`)}build(t){return new en(t,this.config)}}o(Yl,Ma,"PgUUIDBuilder");var ka,Da;class en extends(Da=C,ka=p,Da){getSQLType(){return"uuid"}}o(en,ka,"PgUUID");function Oc(r){return new Yl(r??"")}var Fa,Ra;class tn extends(Ra=k,Fa=p,Ra){constructor(t,s){super(t,"string","PgVarchar"),this.config.length=s.length,this.config.enumValues=s.enum}build(t){return new sn(t,this.config)}}o(tn,Fa,"PgVarcharBuilder");var Ea,Ba;class sn extends(Ba=C,Ea=p,Ba){constructor(){super(...arguments);o(this,"length",this.config.length);o(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}o(sn,Ea,"PgVarchar");function D(r,t={}){const{name:s,config:i}=K(r,t);return new tn(s,i)}var za,qa;class rn extends(qa=k,za=p,qa){constructor(t,s){super(t,"string","PgBinaryVector"),this.config.dimensions=s.dimensions}build(t){return new an(t,this.config)}}o(rn,za,"PgBinaryVectorBuilder");var Oa,Va;class an extends(Va=C,Oa=p,Va){constructor(){super(...arguments);o(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}o(an,Oa,"PgBinaryVector");function Vc(r,t){const{name:s,config:i}=K(r,t);return new rn(s,i)}var Ua,Ka;class ln extends(Ka=k,Ua=p,Ka){constructor(t,s){super(t,"array","PgHalfVector"),this.config.dimensions=s.dimensions}build(t){return new nn(t,this.config)}}o(ln,Ua,"PgHalfVectorBuilder");var $a,Ha;class nn extends(Ha=C,$a=p,Ha){constructor(){super(...arguments);o(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}o(nn,$a,"PgHalfVector");function Uc(r,t){const{name:s,config:i}=K(r,t);return new ln(s,i)}var Qa,Ga;class on extends(Ga=k,Qa=p,Ga){constructor(t,s){super(t,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(t){return new dn(t,this.config)}}o(on,Qa,"PgSparseVectorBuilder");var Wa,Za;class dn extends(Za=C,Wa=p,Za){constructor(){super(...arguments);o(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}o(dn,Wa,"PgSparseVector");function Kc(r,t){const{name:s,config:i}=K(r,t);return new on(s,i)}var Ja,Xa;class cn extends(Xa=k,Ja=p,Xa){constructor(t,s){super(t,"array","PgVector"),this.config.dimensions=s.dimensions}build(t){return new un(t,this.config)}}o(cn,Ja,"PgVectorBuilder");var Ya,ei;class un extends(ei=C,Ya=p,ei){constructor(){super(...arguments);o(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}o(un,Ya,"PgVector");function $c(r,t){const{name:s,config:i}=K(r,t);return new cn(s,i)}function Hc(){return{bigint:bc,bigserial:jc,boolean:N,char:wc,cidr:_c,customType:Sc,date:Ac,doublePrecision:Ic,inet:Pc,integer:l,interval:Tc,json:Cc,jsonb:R,line:Mc,macaddr:Lc,macaddr8:kc,numeric:Il,point:Dc,geometry:Rc,real:Ec,serial:y,smallint:Bc,smallserial:zc,text:a,time:qc,timestamp:n,uuid:Oc,varchar:D,bit:Vc,halfvec:Uc,sparsevec:Kc,vector:$c}}const Ge=Symbol.for("drizzle:PgInlineForeignKeys"),jt=Symbol.for("drizzle:EnableRLS");var ti,si,ri,ai,ii;class Fe extends(ii=Q,ai=p,ri=Ge,si=jt,ti=Q.Symbol.ExtraConfigBuilder,ii){constructor(){super(...arguments);o(this,ri,[]);o(this,si,!1);o(this,ti)}}o(Fe,ai,"PgTable"),o(Fe,"Symbol",Object.assign({},Q.Symbol,{InlineForeignKeys:Ge,EnableRLS:jt}));function Qc(r,t,s,i,d=r){const u=new Fe(r,i,d),c=typeof t=="function"?t(Hc()):t,m=Object.fromEntries(Object.entries(c).map(([h,w])=>{const f=w;f.setName(h);const A=f.build(u);return u[Ge].push(...f.buildForeignKeys(A,u)),[h,A]})),v=Object.fromEntries(Object.entries(c).map(([h,w])=>{const f=w;f.setName(h);const A=f.buildExtraConfigColumn(u);return[h,A]})),S=Object.assign(u,m);return S[Q.Symbol.Columns]=m,S[Q.Symbol.ExtraConfigColumns]=v,Object.assign(S,{enableRLS:()=>(S[Fe.Symbol.EnableRLS]=!0,S)})}const g=(r,t,s)=>Qc(r,t,s,void 0),Gc=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Un,DIRTY:Kn,EMPTY_PATH:$n,INVALID:Hn,NEVER:Qn,OK:Gn,ParseStatus:Wn,Schema:qe,ZodAny:Zn,ZodArray:Jn,ZodBigInt:Xn,ZodBoolean:Yn,ZodBranded:eo,ZodCatch:to,ZodDate:so,ZodDefault:ro,ZodDiscriminatedUnion:ao,ZodEffects:ct,ZodEnum:io,ZodError:lo,get ZodFirstPartyTypeKind(){return no},ZodFunction:oo,ZodIntersection:co,ZodIssueCode:uo,ZodLazy:mo,ZodLiteral:po,ZodMap:ho,ZodNaN:xo,ZodNativeEnum:fo,ZodNever:go,ZodNull:yo,ZodNullable:No,ZodNumber:vo,ZodObject:bo,ZodOptional:jo,ZodParsedType:wo,ZodPipeline:_o,ZodPromise:So,ZodReadonly:Ao,ZodRecord:Io,ZodSchema:qe,ZodSet:Po,ZodString:To,ZodSymbol:Co,ZodTransformer:ct,ZodTuple:Mo,ZodType:qe,ZodUndefined:Lo,ZodUnion:ko,ZodUnknown:Do,ZodVoid:Fo,addIssueToContext:Ro,any:Ce,array:gi,bigint:Eo,boolean:yi,coerce:Bo,custom:Ni,date:zo,datetimeRegex:qo,defaultErrorMap:Oo,discriminatedUnion:Vo,effect:ut,enum:Uo,function:Ko,getErrorMap:$o,getParsedType:Ho,instanceof:Qo,intersection:Go,isAborted:Wo,isAsync:Zo,isDirty:Jo,isValid:Xo,late:Yo,lazy:ed,literal:td,makeIssue:sd,map:rd,nan:ad,nativeEnum:id,never:ld,null:vi,nullable:nd,number:bi,object:ji,get objectUtil(){return od},oboolean:dd,onumber:cd,optional:ud,ostring:md,pipeline:pd,preprocess:hd,promise:xd,quotelessJson:fd,record:wi,set:gd,setErrorMap:yd,strictObject:Nd,string:_i,symbol:vd,transformer:ut,tuple:bd,undefined:jd,union:et,unknown:wd,get util(){return _d},void:Sd},Symbol.toStringTag,{value:"Module"})),B={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function z(r,t){return t.includes(r.columnType)}function Wc(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}const Zc=et([_i(),bi(),yi(),vi()]),Jc=et([Zc,wi(Ce()),gi(Ce())]),Xc=Ni(r=>r instanceof Buffer);function mn(r,t){const s=(t==null?void 0:t.zodInstance)??Gc,i=(t==null?void 0:t.coerce)??{};let d;return Wc(r)&&(d=r.enumValues.length?s.enum(r.enumValues):s.string()),d||(z(r,["PgGeometry","PgPointTuple"])?d=s.tuple([s.number(),s.number()]):z(r,["PgGeometryObject","PgPointObject"])?d=s.object({x:s.number(),y:s.number()}):z(r,["PgHalfVector","PgVector"])?(d=s.array(s.number()),d=r.dimensions?d.length(r.dimensions):d):z(r,["PgLine"])?d=s.tuple([s.number(),s.number(),s.number()]):z(r,["PgLineABC"])?d=s.object({a:s.number(),b:s.number(),c:s.number()}):z(r,["PgArray"])?(d=s.array(mn(r.baseColumn,s)),d=r.size?d.length(r.size):d):r.dataType==="array"?d=s.array(s.any()):r.dataType==="number"?d=Yc(r,s,i):r.dataType==="bigint"?d=eu(r,s,i):r.dataType==="boolean"?d=i===!0||i.boolean?s.coerce.boolean():s.boolean():r.dataType==="date"?d=i===!0||i.date?s.coerce.date():s.date():r.dataType==="string"?d=tu(r,s,i):r.dataType==="json"?d=Jc:r.dataType==="custom"?d=s.any():r.dataType==="buffer"&&(d=Xc)),d||(d=s.any()),d}function Yc(r,t,s){let i=r.getSQLType().includes("unsigned"),d,u,c=!1;z(r,["MySqlTinyInt","SingleStoreTinyInt"])?(d=i?0:B.INT8_MIN,u=i?B.INT8_UNSIGNED_MAX:B.INT8_MAX,c=!0):z(r,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(d=i?0:B.INT16_MIN,u=i?B.INT16_UNSIGNED_MAX:B.INT16_MAX,c=!0):z(r,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(d=i?0:B.INT24_MIN,u=i?B.INT24_UNSIGNED_MAX:B.INT24_MAX,c=z(r,["MySqlMediumInt","SingleStoreMediumInt"])):z(r,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(d=i?0:B.INT32_MIN,u=i?B.INT32_UNSIGNED_MAX:B.INT32_MAX,c=!0):z(r,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(d=i?0:B.INT48_MIN,u=i?B.INT48_UNSIGNED_MAX:B.INT48_MAX):z(r,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||z(r,["MySqlSerial","SingleStoreSerial"]),d=i?0:Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,c=!0):z(r,["MySqlYear","SingleStoreYear"])?(d=1901,u=2155,c=!0):(d=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER);let m=s===!0||s!=null&&s.number?t.coerce.number():t.number();return m=m.min(d).max(u),c?m.int():m}function eu(r,t,s){const i=r.getSQLType().includes("unsigned"),d=i?0n:B.INT64_MIN,u=i?B.INT64_UNSIGNED_MAX:B.INT64_MAX;return(s===!0||s!=null&&s.bigint?t.coerce.bigint():t.bigint()).min(d).max(u)}function tu(r,t,s){if(z(r,["PgUUID"]))return t.string().uuid();let i,d,u=!1;z(r,["PgVarchar","SQLiteText"])?i=r.length:z(r,["MySqlVarChar","SingleStoreVarChar"])?i=r.length??B.INT16_UNSIGNED_MAX:z(r,["MySqlText","SingleStoreText"])&&(r.textType==="longtext"?i=B.INT32_UNSIGNED_MAX:r.textType==="mediumtext"?i=B.INT24_UNSIGNED_MAX:r.textType==="text"?i=B.INT16_UNSIGNED_MAX:i=B.INT8_UNSIGNED_MAX),z(r,["PgChar","MySqlChar","SingleStoreChar"])&&(i=r.length,u=!0),z(r,["PgBinaryVector"])&&(d=/^[01]+$/,i=r.dimensions);let c=s===!0||s!=null&&s.string?t.coerce.string():t.string();return c=d?c.regex(d):c,i&&u?c.length(i):i?c.max(i):c}function pn(r){return Di(r)?Nc(r):vc(r)}function hn(r,t,s,i){const d={};for(const[u,c]of Object.entries(r)){if(!$(c,be)&&!$(c,V)&&!$(c,V.Aliased)&&typeof c=="object"){const w=Di(c)||yc(c)?pn(c):c;d[u]=hn(w,t[u]??{},s,i);continue}const m=t[u];if(m!==void 0&&typeof m!="function"){d[u]=m;continue}const v=$(c,be)?c:void 0,S=v?mn(v,i):Ce(),h=typeof m=="function"?m(S):S;s.never(v)||(d[u]=h,v&&(s.nullable(v)&&(d[u]=d[u].nullable()),s.optional(v)&&(d[u]=d[u].optional())))}return ji(d)}const su={never:r=>{var t,s;return((t=r==null?void 0:r.generated)==null?void 0:t.type)==="always"||((s=r==null?void 0:r.generatedIdentity)==null?void 0:s.type)==="always"},optional:r=>!r.notNull||r.notNull&&r.hasDefault,nullable:r=>!r.notNull},_=(r,t)=>{const s=pn(r);return hn(s,{},su)},ru=g("retailer_products",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull(),sku:a("sku").notNull(),name:a("name").notNull(),description:a("description"),category:a("category").notNull(),subcategory:a("subcategory"),brand:a("brand"),price:b("price",{precision:10,scale:2}).notNull(),compareAtPrice:b("compare_at_price",{precision:10,scale:2}),costPrice:b("cost_price",{precision:10,scale:2}),stockQuantity:l("stock_quantity").default(0),lowStockThreshold:l("low_stock_threshold").default(5),isInStock:N("is_in_stock").default(!0),isActive:N("is_active").default(!0),weight:b("weight",{precision:8,scale:2}),dimensions:R("dimensions"),images:a("images").array(),tags:a("tags").array(),metaTitle:a("meta_title"),metaDescription:a("meta_description"),slug:a("slug"),externalId:a("external_id"),lastSyncedAt:n("last_synced_at"),syncStatus:a("sync_status").default("pending"),syncErrors:R("sync_errors"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("retailer_inventory_updates",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull(),productId:l("product_id").notNull(),updateType:a("update_type").notNull(),oldValue:R("old_value"),newValue:R("new_value"),sourceSystem:a("source_system"),batchId:a("batch_id"),processed:N("processed").default(!1),processedAt:n("processed_at"),errorMessage:a("error_message"),createdAt:n("created_at").defaultNow()});const au=g("retailer_integrations",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull(),integrationType:a("integration_type").notNull(),integrationName:a("integration_name"),apiEndpoint:a("api_endpoint"),apiKey:a("api_key"),webhookUrl:a("webhook_url"),syncFrequency:a("sync_frequency").default("hourly"),fieldMappings:R("field_mappings"),categoryMappings:R("category_mappings"),isActive:N("is_active").default(!0),lastSyncAt:n("last_sync_at"),nextSyncAt:n("next_sync_at"),syncStatus:a("sync_status").default("pending"),syncErrors:R("sync_errors"),autoSync:N("auto_sync").default(!0),notifyOnErrors:N("notify_on_errors").default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),iu=g("product_categories",{id:y("id").primaryKey(),name:a("name").notNull(),slug:a("slug").notNull(),description:a("description"),parentId:l("parent_id"),level:l("level").default(0),sortOrder:l("sort_order").default(0),isActive:N("is_active").default(!0),metaTitle:a("meta_title"),metaDescription:a("meta_description"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("retailer_data_imports",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull(),importType:a("import_type").notNull(),fileName:a("file_name"),filePath:a("file_path"),totalRecords:l("total_records").default(0),processedRecords:l("processed_records").default(0),successfulRecords:l("successful_records").default(0),failedRecords:l("failed_records").default(0),status:a("status").default("pending"),startedAt:n("started_at"),completedAt:n("completed_at"),importResults:R("import_results"),errorLog:R("error_log"),uploadedBy:l("uploaded_by"),createdAt:n("created_at").defaultNow()});_(ru).omit({id:!0,createdAt:!0,updatedAt:!0});_(au).omit({id:!0,createdAt:!0,updatedAt:!0});_(iu).omit({id:!0,createdAt:!0,updatedAt:!0});const W=g("stores",{id:y("id").primaryKey(),name:a("name").notNull(),description:a("description").notNull(),category:a("category").notNull(),address:a("address").notNull(),phone:a("phone").notNull(),email:a("email").notNull(),zipCode:a("zip_code").notNull(),rating:b("rating",{precision:2,scale:1}).default("0.0"),reviewCount:l("review_count").default(0),isOpen:N("is_open").default(!0),hours:a("hours"),imageUrl:a("image_url"),perks:a("perks").array(),isVerified:N("is_verified").default(!1),verificationStatus:a("verification_status").default("pending"),verificationTier:a("verification_tier").default("Unverified"),verificationDocumentPath:a("verification_document_path"),submittedAt:n("submitted_at").defaultNow(),reviewedAt:n("reviewed_at"),rejectionReason:a("rejection_reason"),website:a("website"),isLargeRetailer:N("is_large_retailer").default(!1)}),we=g("retailers",{id:y("id").primaryKey(),businessName:a("business_name").notNull(),firstName:a("first_name").notNull(),lastName:a("last_name").notNull(),email:a("email").notNull(),phone:a("phone").notNull(),address:a("address").notNull(),category:a("category").notNull(),description:a("description"),zipCode:a("zip_code").notNull(),approved:N("approved").default(!1),plan:a("plan").notNull().default("free"),mallName:a("mall_name"),stripeAccountId:a("stripe_account_id"),onboardingStatus:a("onboarding_status").default("pending"),latitude:b("latitude",{precision:10,scale:8}),longitude:b("longitude",{precision:11,scale:8}),allowPartnerFulfillment:N("allow_partner_fulfillment").default(!0),fulfillmentRadius:l("fulfillment_radius").default(25),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("cross_retailer_inventory",{id:y("id").primaryKey(),retailerId:l("retailer_id").references(()=>we.id).notNull(),sku:a("sku").notNull(),title:a("title").notNull(),quantity:l("quantity").notNull().default(0),price:b("price",{precision:10,scale:2}).notNull(),category:a("category"),brand:a("brand"),condition:a("condition").default("new"),isActive:N("is_active").default(!0),lastUpdated:n("last_updated").defaultNow(),reservedQuantity:l("reserved_quantity").default(0)});g("order_routing",{id:y("id").primaryKey(),orderId:a("order_id").notNull(),customerId:l("customer_id").references(()=>L.id),requestedSku:a("requested_sku").notNull(),requestedQuantity:l("requested_quantity").notNull(),customerLatitude:b("customer_latitude",{precision:10,scale:8}),customerLongitude:b("customer_longitude",{precision:11,scale:8}),selectedRetailerId:l("selected_retailer_id").references(()=>we.id),routingReason:a("routing_reason"),alternatives:R("alternatives"),estimatedDeliveryTime:l("estimated_delivery_time"),actualDeliveryTime:l("actual_delivery_time"),status:a("status").default("pending"),createdAt:n("created_at").defaultNow(),fulfilledAt:n("fulfilled_at")});const lu=g("ai_retailer_applications",{id:y("id").primaryKey(),storeName:a("store_name").notNull(),email:a("email").notNull(),phone:a("phone").notNull(),address:a("address").notNull(),category:a("category").notNull(),hours:a("hours").notNull(),description:a("description").notNull(),logoPath:a("logo_path"),storefrontPhotoPath:a("storefront_photo_path"),businessLicensePath:a("business_license_path"),utilityBillPath:a("utility_bill_path"),additionalDocPath:a("additional_doc_path"),status:a("status").notNull().default("pending_review"),aiReviewStatus:a("ai_review_status").default("pending"),verificationStatus:a("verification_status").default("pending"),approvalStatus:a("approval_status").default("pending"),aiReviewResult:R("ai_review_result"),verificationResult:R("verification_result"),approvalResult:R("approval_result"),adminOverride:R("admin_override"),submittedAt:n("submitted_at").defaultNow(),reviewedAt:n("reviewed_at"),approvedAt:n("approved_at")});_(lu).omit({id:!0,submittedAt:!0,reviewedAt:!0,approvedAt:!0});_(W).omit({id:!0,rating:!0,reviewCount:!0});const nu=_(we).omit({id:!0,approved:!0}),L=g("users",{id:y("id").primaryKey(),email:a("email").notNull().unique(),username:a("username").notNull().unique(),passwordHash:a("password_hash").notNull(),userType:a("user_type").notNull().default("shopper"),firstName:a("first_name"),lastName:a("last_name"),name:a("name").notNull(),profileImageUrl:a("profile_image_url"),socialHandle:a("social_handle").unique(),spiralBalance:l("spiral_balance").default(0),totalEarned:l("total_earned").default(0),totalRedeemed:l("total_redeemed").default(0),inviteCode:a("invite_code").unique(),referredBy:a("referred_by"),totalReferrals:l("total_referrals").default(0),referralEarnings:l("referral_earnings").default(0),isEmailVerified:N("is_email_verified").default(!1),isActive:N("is_active").default(!0),lastLogin:n("last_login"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ou=g("spiral_transactions",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),type:a("type").notNull(),amount:l("amount").notNull(),source:a("source").notNull(),description:a("description").notNull(),orderId:a("order_id"),storeId:l("store_id").references(()=>W.id),mallId:a("mall_id"),eventId:l("event_id"),multiplier:b("multiplier",{precision:3,scale:2}).default("1.00"),promotionId:l("promotion_id"),createdAt:n("created_at").defaultNow()}),du=g("promotions",{id:y("id").primaryKey(),code:a("code").unique().notNull(),name:a("name").notNull(),multiplier:b("multiplier",{precision:3,scale:2}).default("5.00"),partners:a("partners").array().default([]),categories:a("categories").array().default([]),storeIds:a("store_ids").array().default([]),mallIds:a("mall_ids").array().default([]),startsAt:n("starts_at").notNull(),endsAt:n("ends_at").notNull(),active:N("active").default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),cu=g("promotion_requests",{id:y("id").primaryKey(),requesterType:a("requester_type").notNull(),requesterName:a("requester_name").notNull(),requesterId:a("requester_id"),contactEmail:a("contact_email").notNull(),desiredMultiplier:b("desired_multiplier",{precision:3,scale:2}).notNull(),desiredStartsAt:n("desired_starts_at").notNull(),desiredEndsAt:n("desired_ends_at").notNull(),targetCategories:a("target_categories").array().default([]),targetStoreIds:a("target_store_ids").array().default([]),targetMallIds:a("target_mall_ids").array().default([]),expectedGMV:b("expected_gmv",{precision:12,scale:2}).default("0"),sponsorCoveragePct:b("sponsor_coverage_pct",{precision:5,scale:2}).default("0"),description:a("description"),status:a("status").default("pending"),valuationScore:b("valuation_score",{precision:5,scale:2}).default("0"),valuationRisk:a("valuation_risk").default("medium"),effectiveCostPct:b("effective_cost_pct",{precision:5,scale:2}).default("0"),recommendedMultiplier:b("recommended_multiplier",{precision:3,scale:2}),recommendedDurationDays:l("recommended_duration_days"),valuationNotes:a("valuation_notes"),decidedBy:a("decided_by"),decidedAt:n("decided_at"),decisionReason:a("decision_reason"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ee=g("orders",{id:y("id").primaryKey(),orderNumber:a("order_number").notNull().unique(),userId:l("user_id").references(()=>L.id),total:b("total",{precision:10,scale:2}).notNull(),status:a("status").default("pending"),spiralsEarned:l("spirals_earned").default(0),createdAt:n("created_at").defaultNow()}),uu=g("order_items",{id:y("id").primaryKey(),orderId:l("order_id").notNull().references(()=>ee.id),productId:a("product_id").notNull(),productName:a("product_name").notNull(),productPrice:b("product_price",{precision:10,scale:2}).notNull(),quantity:l("quantity").notNull(),storeId:l("store_id").references(()=>W.id),storeName:a("store_name").notNull(),fulfillmentMethod:a("fulfillment_method").notNull(),fulfillmentStatus:a("fulfillment_status").default("processing"),estimatedDelivery:a("estimated_delivery"),trackingNumber:a("tracking_number"),mallId:l("mall_id"),mallName:a("mall_name"),createdAt:n("created_at").defaultNow()}),mu=g("fulfillment_groups",{id:y("id").primaryKey(),orderId:l("order_id").notNull().references(()=>ee.id),fulfillmentMethod:a("fulfillment_method").notNull(),storeId:l("store_id").references(()=>W.id),mallId:l("mall_id"),groupTotal:b("group_total",{precision:10,scale:2}).notNull(),shippingCost:b("shipping_cost",{precision:10,scale:2}).default("0.00"),estimatedDelivery:a("estimated_delivery").notNull(),status:a("status").default("processing"),trackingNumber:a("tracking_number"),createdAt:n("created_at").defaultNow()}),pu=g("user_follows",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id,{onDelete:"cascade"}),retailerId:l("retailer_id").notNull().references(()=>we.id,{onDelete:"cascade"}),followedAt:n("followed_at").defaultNow()}),xn=g("wishlist_items",{id:y("id").primaryKey(),shopperId:a("shopper_id").notNull(),productId:a("product_id").notNull(),addedAt:n("added_at").defaultNow(),alertPreferences:R("alert_preferences").$type().notNull().default({priceDrop:!0,restock:!0}),lastPrice:b("last_price",{precision:10,scale:2}),isActive:N("is_active").default(!0)}),hu=g("price_alerts",{id:y("id").primaryKey(),wishlistItemId:l("wishlist_item_id").references(()=>xn.id),shopperId:a("shopper_id").notNull(),productId:a("product_id").notNull(),originalPrice:b("original_price",{precision:10,scale:2}).notNull(),currentPrice:b("current_price",{precision:10,scale:2}).notNull(),percentageChange:b("percentage_change",{precision:5,scale:2}),alertType:a("alert_type").notNull(),alertSent:N("alert_sent").default(!1),sentAt:n("sent_at"),createdAt:n("created_at").defaultNow()});_(L).omit({id:!0,spiralBalance:!0,totalEarned:!0,totalRedeemed:!0,createdAt:!0});_(ou).omit({id:!0,createdAt:!0});_(ee).omit({id:!0,createdAt:!0});_(uu).omit({id:!0,createdAt:!0});_(mu).omit({id:!0,createdAt:!0});_(pu).omit({id:!0,followedAt:!0});_(xn).omit({id:!0,addedAt:!0});_(hu).omit({id:!0,createdAt:!0,sentAt:!0});const xu=g("invite_codes",{id:y("id").primaryKey(),code:a("code").unique().notNull(),creatorUserId:l("creator_user_id").notNull().references(()=>L.id),usedByUserId:l("used_by_user_id").references(()=>L.id),spiralsAwarded:l("spirals_awarded").default(20),maxUses:l("max_uses").default(1),currentUses:l("current_uses").default(0),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow(),usedAt:n("used_at")}),fu=g("leaderboard_entries",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),category:a("category").notNull(),score:l("score").notNull(),rank:l("rank"),period:a("period").notNull(),updatedAt:n("updated_at").defaultNow()});_(xu);_(fu);const pe=g("malls",{id:y("id").primaryKey(),name:a("name").notNull(),description:a("description").notNull(),address:a("address").notNull(),city:a("city").notNull(),state:a("state").notNull(),zipCode:a("zip_code").notNull(),phone:a("phone").notNull(),website:a("website"),hours:a("hours").notNull(),storeCount:l("store_count").default(0),type:a("type").notNull(),rating:b("rating",{precision:2,scale:1}).default("0.0"),reviewCount:l("review_count").default(0),features:a("features").array(),amenities:a("amenities").array(),spiralCenterLocation:a("spiral_center_location"),spiralCenterHours:a("spiral_center_hours"),spiralCenterServices:a("spiral_center_services").array(),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow()}),ze=g("retailer_accounts",{id:y("id").primaryKey(),email:a("email").unique().notNull(),passwordHash:a("password_hash").notNull(),businessName:a("business_name").notNull(),contactName:a("contact_name").notNull(),phone:a("phone"),website:a("website"),logoUrl:a("logo_url"),address:a("address").notNull(),city:a("city").notNull(),state:a("state").notNull(),zipCode:a("zip_code").notNull(),bio:a("bio"),socialLinks:a("social_links").array(),taxId:a("tax_id"),preferredMallId:l("preferred_mall_id").references(()=>pe.id),storeCount:l("store_count").default(1),annualRevenue:l("annual_revenue").default(0),isLargeRetailer:N("is_large_retailer").default(!1),isApproved:N("is_approved").default(!1).notNull(),isActive:N("is_active").default(!0).notNull(),lastLoginAt:n("last_login_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),gu=g("onboarding_status",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull().references(()=>ze.id),step:a("step").notNull(),status:a("status").default("pending").notNull(),notes:a("notes"),completedAt:n("completed_at"),createdAt:n("created_at").defaultNow()}),yu=g("retailer_products",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull().references(()=>ze.id),title:a("title").notNull(),description:a("description"),price:b("price",{precision:10,scale:2}).notNull(),category:a("category").notNull(),subcategory:a("subcategory"),brand:a("brand"),sku:a("sku"),stock:l("stock").default(0).notNull(),imageUrl:a("image_url"),imageUrls:a("image_urls").array(),weight:b("weight",{precision:8,scale:2}),dimensions:a("dimensions"),tags:a("tags").array(),isActive:N("is_active").default(!0).notNull(),isFeatured:N("is_featured").default(!1).notNull(),salePrice:b("sale_price",{precision:10,scale:2}),saleStartDate:n("sale_start_date"),saleEndDate:n("sale_end_date"),spiralBonus:l("spiral_bonus").default(0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Nu=g("product_upload_batches",{id:y("id").primaryKey(),retailerId:l("retailer_id").notNull().references(()=>ze.id),filename:a("filename").notNull(),totalRows:l("total_rows").notNull(),successRows:l("success_rows").default(0).notNull(),errorRows:l("error_rows").default(0).notNull(),status:a("status").default("processing").notNull(),errors:a("errors").array(),createdAt:n("created_at").defaultNow(),completedAt:n("completed_at")});_(ze).omit({id:!0,createdAt:!0,updatedAt:!0,lastLoginAt:!0});_(gu).omit({id:!0,createdAt:!0,completedAt:!0});_(yu).omit({id:!0,createdAt:!0,updatedAt:!0});_(Nu).omit({id:!0,createdAt:!0,completedAt:!0});const vu=g("wishlist_trackers",{id:y("id").primaryKey(),userId:l("user_id").references(()=>L.id).notNull(),productId:l("product_id").notNull(),originalPrice:b("original_price",{precision:10,scale:2}).notNull(),alertType:a("alert_type").notNull(),lastAlertedAt:n("last_alerted_at"),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),bu=g("user_notification_preferences",{id:y("id").primaryKey(),userId:l("user_id").references(()=>L.id).notNull().unique(),emailEnabled:N("email_enabled").default(!0),smsEnabled:N("sms_enabled").default(!1),browserEnabled:N("browser_enabled").default(!0),alertFrequency:a("alert_frequency").default("immediate"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ju=g("notification_history",{id:y("id").primaryKey(),userId:l("user_id").references(()=>L.id).notNull(),productId:l("product_id").notNull(),notificationType:a("notification_type").notNull(),deliveryMethod:a("delivery_method").notNull(),status:a("status").default("sent"),metadata:a("metadata"),sentAt:n("sent_at").defaultNow()});_(vu).omit({id:!0,createdAt:!0,updatedAt:!0});_(bu).omit({id:!0,createdAt:!0,updatedAt:!0});_(ju).omit({id:!0,sentAt:!0});const wu=g("retailer_analytics_snapshots",{id:y("id").primaryKey(),retailerId:l("retailer_id").references(()=>W.id).notNull(),sales:b("sales",{precision:12,scale:2}).notNull(),orders:l("orders").notNull(),avgOrderValue:b("avg_order_value",{precision:10,scale:2}).notNull(),repeatCustomers:l("repeat_customers").notNull(),timeframe:D("timeframe",{length:50}).notNull(),createdAt:n("created_at").defaultNow()}),_u=g("mall_analytics",{id:y("id").primaryKey(),mallId:l("mall_id").references(()=>pe.id).notNull(),totalRevenue:b("total_revenue",{precision:12,scale:2}).notNull(),storeMetrics:a("store_metrics").notNull(),loyaltySummary:a("loyalty_summary").notNull(),footTraffic:a("foot_traffic").notNull(),timestamp:n("timestamp").defaultNow()}),Su=g("live_orders_activity",{id:y("id").primaryKey(),orderId:D("order_id").notNull(),retailerId:l("retailer_id").references(()=>W.id).notNull(),mallId:l("mall_id").references(()=>pe.id),amount:b("amount",{precision:10,scale:2}).notNull(),itemCount:l("item_count").notNull(),customerName:D("customer_name"),timestamp:n("timestamp").defaultNow()});_(wu).omit({id:!0,createdAt:!0});_(_u).omit({id:!0,timestamp:!0});_(Su).omit({id:!0,timestamp:!0});const Au=g("cart_items",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),productId:a("product_id").notNull(),storeId:l("store_id").notNull().references(()=>W.id),mallId:l("mall_id").references(()=>pe.id),productName:a("product_name").notNull(),productPrice:b("product_price",{precision:10,scale:2}).notNull(),quantity:l("quantity").notNull().default(1),fulfillmentMethod:a("fulfillment_method").notNull(),addedAt:n("added_at").defaultNow()});_(Au).omit({id:!0,addedAt:!0});const fn=g("subscriptions",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),title:a("title").notNull(),description:a("description"),frequency:a("frequency").notNull(),nextDelivery:n("next_delivery").notNull(),status:a("status").notNull().default("active"),totalPrice:b("total_price",{precision:10,scale:2}).notNull(),discountPercentage:l("discount_percentage").default(0),spiralBonusMultiplier:b("spiral_bonus_multiplier",{precision:3,scale:2}).default("1.5"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("subscription_items",{id:y("id").primaryKey(),subscriptionId:l("subscription_id").notNull().references(()=>fn.id),productId:a("product_id").notNull(),productName:a("product_name").notNull(),storeId:l("store_id").notNull().references(()=>W.id),storeName:a("store_name").notNull(),quantity:l("quantity").notNull(),price:b("price",{precision:10,scale:2}).notNull(),fulfillmentMethod:a("fulfillment_method").notNull()});g("subscription_orders",{id:y("id").primaryKey(),subscriptionId:l("subscription_id").notNull().references(()=>fn.id),orderId:l("order_id").notNull().references(()=>ee.id),deliveryDate:n("delivery_date").notNull(),status:a("status").notNull().default("pending"),spiralsEarned:l("spirals_earned").default(0),createdAt:n("created_at").defaultNow()});const ue=g("spiral_centers",{id:y("id").primaryKey(),name:a("name").notNull(),code:a("code").notNull().unique(),type:a("type").notNull(),address:a("address").notNull(),city:a("city").notNull(),state:a("state").notNull(),zipCode:a("zip_code").notNull(),latitude:b("latitude",{precision:10,scale:8}),longitude:b("longitude",{precision:11,scale:8}),mallId:l("mall_id").references(()=>pe.id),capacity:l("capacity").default(1e3),operatingHours:a("operating_hours").default("8AM-8PM"),services:a("services").array().default([]),status:a("status").default("active"),managerName:a("manager_name"),phone:a("phone"),email:a("email"),deliveryRadius:l("delivery_radius").default(15),sameDayCapacity:l("same_day_capacity").default(200),lastMileVehicles:l("last_mile_vehicles").default(5),avgDeliveryTime:l("avg_delivery_time").default(90),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("spiral_center_routes",{id:y("id").primaryKey(),fromCenterId:l("from_center_id").notNull().references(()=>ue.id),toCenterId:l("to_center_id").notNull().references(()=>ue.id),distance:b("distance",{precision:6,scale:2}).notNull(),transportTime:a("transport_time").notNull(),method:a("method").default("ground"),frequency:a("frequency").default("daily"),cost:b("cost",{precision:8,scale:2}),status:a("status").default("active"),createdAt:n("created_at").defaultNow()});g("spiral_shipments",{id:y("id").primaryKey(),trackingNumber:a("tracking_number").notNull().unique(),orderId:l("order_id").notNull().references(()=>ee.id),fromCenterId:l("from_center_id").notNull().references(()=>ue.id),toCenterId:l("to_center_id").notNull().references(()=>ue.id),status:a("status").default("pending"),shipmentType:a("shipment_type").default("standard"),estimatedArrival:n("estimated_arrival"),actualArrival:n("actual_arrival"),finalDeliveryMethod:a("final_delivery_method").default("pickup"),recipientAddress:a("recipient_address"),recipientName:a("recipient_name"),packageCount:l("package_count").default(1),weight:b("weight",{precision:6,scale:2}),dimensions:a("dimensions"),specialInstructions:a("special_instructions"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("spiral_center_inventory",{id:y("id").primaryKey(),centerId:l("center_id").notNull().references(()=>ue.id),productId:a("product_id").notNull(),productName:a("product_name").notNull(),storeId:l("store_id").notNull().references(()=>W.id),quantity:l("quantity").default(0),reserved:l("reserved").default(0),lastRestocked:n("last_restocked"),minimumStock:l("minimum_stock").default(5),storageLocation:a("storage_location"),expiryDate:n("expiry_date"),notes:a("notes"),updatedAt:n("updated_at").defaultNow()});const Iu=g("spiral_delivery_zones",{id:y("id").primaryKey(),centerId:l("center_id").references(()=>ue.id).notNull(),zoneName:a("zone_name").notNull(),zipCodes:a("zip_codes").array().notNull(),deliveryType:a("delivery_type").notNull(),basePrice:b("base_price",{precision:8,scale:2}).default("4.99"),maxDistance:l("max_distance").default(10),estimatedTime:l("estimated_time").notNull(),priority:l("priority").default(1),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),gn=g("spiral_drivers",{id:y("id").primaryKey(),centerId:l("center_id").references(()=>ue.id).notNull(),driverName:a("driver_name").notNull(),phone:a("phone").notNull(),email:a("email").notNull(),vehicleType:a("vehicle_type").notNull(),vehiclePlate:a("vehicle_plate"),status:a("status").default("available"),currentLocation:a("current_location"),todayDeliveries:l("today_deliveries").default(0),totalDeliveries:l("total_deliveries").default(0),rating:b("rating",{precision:3,scale:2}).default("5.00"),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("spiral_deliveries",{id:y("id").primaryKey(),trackingNumber:a("tracking_number").unique().notNull(),centerId:l("center_id").references(()=>ue.id).notNull(),driverId:l("driver_id").references(()=>gn.id),zoneId:l("zone_id").references(()=>Iu.id).notNull(),customerName:a("customer_name").notNull(),customerPhone:a("customer_phone").notNull(),deliveryAddress:a("delivery_address").notNull(),deliveryZipCode:a("delivery_zip_code").notNull(),deliveryType:a("delivery_type").notNull(),packageCount:l("package_count").default(1),totalWeight:b("total_weight",{precision:8,scale:2}),deliveryFee:b("delivery_fee",{precision:8,scale:2}).notNull(),status:a("status").default("scheduled"),scheduledTime:n("scheduled_time").notNull(),pickedUpTime:n("picked_up_time"),deliveredTime:n("delivered_time"),estimatedTime:n("estimated_time").notNull(),deliveryInstructions:a("delivery_instructions"),photoProof:a("photo_proof"),customerSignature:a("customer_signature"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("spiral_delivery_routes",{id:y("id").primaryKey(),driverId:l("driver_id").references(()=>gn.id).notNull(),routeName:a("route_name").notNull(),deliveryIds:a("delivery_ids").array().notNull(),startTime:n("start_time").notNull(),endTime:n("end_time"),totalDistance:b("total_distance",{precision:8,scale:2}),totalDuration:l("total_duration"),status:a("status").default("planned"),waypoints:a("waypoints"),currentStop:l("current_stop").default(0),completedDeliveries:l("completed_deliveries").default(0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});const Pu=g("reviews",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),reviewType:a("review_type").notNull(),targetId:a("target_id").notNull(),storeId:l("store_id").references(()=>W.id),storeName:a("store_name"),productName:a("product_name"),rating:l("rating").notNull(),reviewText:a("review_text").notNull(),reviewerName:a("reviewer_name").notNull(),isVerifiedPurchase:N("is_verified_purchase").default(!1),helpfulVotes:l("helpful_votes").default(0),isReported:N("is_reported").default(!1),orderId:a("order_id"),createdAt:n("created_at").defaultNow()});_(Pu).omit({id:!0,helpfulVotes:!0,isReported:!0,createdAt:!0});g("user_loyalty",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),totalEarned:l("total_earned").default(0).notNull(),currentBalance:l("current_balance").default(0).notNull(),pendingPoints:l("pending_points").default(0).notNull(),tier:a("tier").default("Bronze").notNull(),referralCode:a("referral_code").unique().notNull(),referralCount:l("referral_count").default(0).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("loyalty_transactions",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),orderId:a("order_id"),type:a("type").notNull(),points:l("points").notNull(),description:a("description").notNull(),status:a("status").default("completed").notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("order_tracking",{id:y("id").primaryKey(),orderId:l("order_id").notNull().references(()=>ee.id),orderNumber:a("order_number").notNull(),carrier:a("carrier").notNull(),trackingNumber:a("tracking_number").notNull(),status:a("status").default("label_created").notNull(),lastUpdate:n("last_update").defaultNow(),eta:n("eta"),lastLocation:a("last_location"),deliveryAddress:a("delivery_address"),estimatedDeliveryDate:a("estimated_delivery_date"),actualDeliveryDate:n("actual_delivery_date"),trackingEvents:a("tracking_events"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("retailer_loyalty_settings",{id:y("id").primaryKey(),storeId:l("store_id").notNull().references(()=>W.id),pointsPerDollar:b("points_per_dollar",{precision:4,scale:2}).default("0.10").notNull(),minimumPurchase:b("minimum_purchase",{precision:8,scale:2}).default("0.00"),bonusMultiplier:b("bonus_multiplier",{precision:3,scale:2}).default("1.00"),tierThresholds:a("tier_thresholds"),isActive:N("is_active").default(!0).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("retailer_loyalty_history",{id:y("id").primaryKey(),userId:a("user_id").notNull().references(()=>L.id),storeId:l("store_id").notNull().references(()=>W.id),orderId:l("order_id").references(()=>ee.id),pointsEarned:l("points_earned").default(0).notNull(),pointsRedeemed:l("points_redeemed").default(0).notNull(),transactionType:a("transaction_type").notNull(),description:a("description"),currentTier:a("current_tier").default("bronze"),totalLifetimePoints:l("total_lifetime_points").default(0).notNull(),createdAt:n("created_at").defaultNow()});const Tu=g("mall_perk_campaigns",{id:y("id").primaryKey(),mallId:l("mall_id").notNull().references(()=>pe.id),title:a("title").notNull(),description:a("description"),perkType:a("perk_type").notNull(),bonusPoints:l("bonus_points").default(0),discountPercent:b("discount_percent",{precision:5,scale:2}).default("0.00"),requiredStores:l("required_stores").default(2),minimumSpend:b("minimum_spend",{precision:8,scale:2}).default("0.00"),validFrom:n("valid_from").notNull(),validUntil:n("valid_until").notNull(),maxRedemptions:l("max_redemptions").default(100),currentRedemptions:l("current_redemptions").default(0),isActive:N("is_active").default(!0).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("user_mall_perks",{id:y("id").primaryKey(),userId:a("user_id").notNull().references(()=>L.id),campaignId:l("campaign_id").notNull().references(()=>Tu.id),mallId:l("mall_id").notNull().references(()=>pe.id),storesVisited:a("stores_visited"),totalSpent:b("total_spent",{precision:8,scale:2}).default("0.00"),progress:l("progress").default(0),isCompleted:N("is_completed").default(!1),completedAt:n("completed_at"),rewardClaimed:N("reward_claimed").default(!1),claimedAt:n("claimed_at"),createdAt:n("created_at").defaultNow()});const yn=g("product_reviews",{id:y("id").primaryKey(),productId:a("product_id").notNull(),userId:a("user_id").notNull().references(()=>L.id),orderId:l("order_id").references(()=>ee.id),rating:l("rating").notNull(),title:a("title"),comment:a("comment"),photoUrl:a("photo_url"),isVerifiedPurchase:N("is_verified_purchase").default(!1).notNull(),isApproved:N("is_approved").default(!0).notNull(),helpfulCount:l("helpful_count").default(0).notNull(),reportCount:l("report_count").default(0).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("review_flags",{id:y("id").primaryKey(),reviewId:l("review_id").notNull().references(()=>yn.id),reportedById:a("reported_by_id").notNull().references(()=>L.id),reason:a("reason").notNull(),description:a("description"),status:a("status").default("pending").notNull(),createdAt:n("created_at").defaultNow()});g("user_product_purchases",{id:y("id").primaryKey(),userId:a("user_id").notNull().references(()=>L.id),productId:a("product_id").notNull(),orderId:l("order_id").notNull().references(()=>ee.id),purchaseDate:n("purchase_date").defaultNow(),verified:N("verified").default(!0).notNull()});g("review_helpfulness",{id:y("id").primaryKey(),reviewId:l("review_id").notNull().references(()=>yn.id),userId:a("user_id").notNull().references(()=>L.id),isHelpful:N("is_helpful").notNull(),createdAt:n("created_at").defaultNow()});const Nn=g("retailer_testimonials",{id:y("id").primaryKey(),storeId:a("store_id").notNull(),title:a("title").notNull(),story:a("story").notNull(),imageUrl:a("image_url"),videoUrl:a("video_url"),isApproved:N("is_approved").default(!1).notNull(),isFeatured:N("is_featured").default(!1).notNull(),likesCount:l("likes_count").default(0).notNull(),sharesCount:l("shares_count").default(0).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("testimonial_likes",{id:y("id").primaryKey(),testimonialId:l("testimonial_id").notNull().references(()=>Nn.id),userId:a("user_id").notNull().references(()=>L.id),createdAt:n("created_at").defaultNow()});g("testimonial_comments",{id:y("id").primaryKey(),testimonialId:l("testimonial_id").notNull().references(()=>Nn.id),userId:a("user_id").notNull().references(()=>L.id),comment:a("comment").notNull(),isApproved:N("is_approved").default(!0).notNull(),createdAt:n("created_at").defaultNow()});const Cu=g("mall_events",{id:y("id").primaryKey(),mallId:a("mall_id").notNull(),title:a("title").notNull(),description:a("description").notNull(),startTime:n("start_time").notNull(),endTime:n("end_time").notNull(),imageUrl:a("image_url"),eventType:a("event_type").notNull(),location:a("location").notNull(),maxRsvp:l("max_rsvp").default(100).notNull(),currentRsvp:l("current_rsvp").default(0).notNull(),rewardPoints:l("reward_points").default(10).notNull(),isApproved:N("is_approved").default(!1).notNull(),isPublished:N("is_published").default(!1).notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g("event_rsvps",{id:y("id").primaryKey(),eventId:l("event_id").notNull().references(()=>Cu.id),userId:a("user_id").notNull().references(()=>L.id),status:a("status").notNull().default("pending"),rsvpedAt:n("rsvped_at").defaultNow(),attendedAt:n("attended_at"),rewardClaimed:N("reward_claimed").default(!1).notNull()});const Mu=g("mall_perks",{id:y("id").primaryKey(),mallId:l("mall_id").notNull().references(()=>pe.id),perkType:a("perk_type").notNull(),title:a("title").notNull(),description:a("description"),multiplier:b("multiplier",{precision:3,scale:2}),discountPercent:l("discount_percent"),dayOfWeek:l("day_of_week"),startTime:a("start_time"),endTime:a("end_time"),isActive:N("is_active").default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Lu=g("retailer_applications",{id:y("id").primaryKey(),businessName:a("business_name").notNull(),contactName:a("contact_name").notNull(),email:a("email").notNull(),phone:a("phone"),businessType:a("business_type"),address:a("address"),description:a("description"),logoUrl:a("logo_url"),website:a("website"),status:a("status").default("pending"),approvedBy:l("approved_by").references(()=>L.id),notes:a("notes"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ku=g("wishlist_notifications",{id:y("id").primaryKey(),userId:l("user_id").references(()=>L.id).notNull(),productId:a("product_id").notNull(),notificationType:a("notification_type").notNull(),isEnabled:N("is_enabled").default(!0),originalPrice:b("original_price",{precision:10,scale:2}),targetPrice:b("target_price",{precision:10,scale:2}),lastNotifiedAt:n("last_notified_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Du=g("user_notifications",{id:y("id").primaryKey(),userId:l("user_id").references(()=>L.id).notNull(),type:a("type").notNull(),title:a("title").notNull(),message:a("message").notNull(),isRead:N("is_read").default(!1),actionUrl:a("action_url"),createdAt:n("created_at").defaultNow()});_(Mu).omit({id:!0,createdAt:!0,updatedAt:!0});_(Lu).omit({id:!0,createdAt:!0,updatedAt:!0});_(ku).omit({id:!0,createdAt:!0,updatedAt:!0});_(Du).omit({id:!0,createdAt:!0});const vn=g("return_requests",{id:a("id").primaryKey().$default(()=>crypto.randomUUID()),userId:l("user_id").references(()=>L.id).notNull(),orderId:l("order_id").references(()=>ee.id).notNull(),productId:a("product_id").notNull(),productName:a("product_name").notNull(),originalAmount:l("original_amount").notNull(),reason:a("reason").notNull(),refundType:a("refund_type").notNull(),status:a("status").notNull().default("pending"),imageUrl:a("image_url"),submittedAt:n("submitted_at").defaultNow(),decisionAt:n("decision_at"),decisionNote:a("decision_note"),autoApproved:N("auto_approved").default(!1),adminUserId:l("admin_user_id").references(()=>L.id)}),Fu=g("refund_transactions",{id:a("id").primaryKey().$default(()=>crypto.randomUUID()),returnId:a("return_id").references(()=>vn.id).notNull(),userId:l("user_id").references(()=>L.id).notNull(),method:a("method").notNull(),amount:l("amount").notNull(),spiralPointsAwarded:l("spiral_points_awarded"),status:a("status").notNull().default("processing"),stripeRefundId:a("stripe_refund_id"),createdAt:n("created_at").defaultNow(),completedAt:n("completed_at")});_(vn).omit({id:!0,submittedAt:!0,decisionAt:!0,autoApproved:!0});_(Fu).omit({id:!0,createdAt:!0,completedAt:!0});const bn=g("wishlist_alerts",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),productId:l("product_id").notNull(),productName:a("product_name").notNull(),currentPrice:l("current_price"),targetPrice:l("target_price"),isActive:N("is_active").default(!0),alertType:a("alert_type").notNull(),notificationMethods:a("notification_methods").array().default(["email"]),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ru=g("notification_preferences",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),email:a("email"),phone:a("phone"),pushToken:a("push_token"),enableEmail:N("enable_email").default(!0),enableSms:N("enable_sms").default(!1),enablePush:N("enable_push").default(!0),globalOptOut:N("global_opt_out").default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Eu=g("notification_log",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),alertId:l("alert_id").references(()=>bn.id),notificationType:a("notification_type").notNull(),subject:a("subject"),message:a("message").notNull(),status:a("status").default("pending"),sentAt:n("sent_at"),failureReason:a("failure_reason"),createdAt:n("created_at").defaultNow()});_(bn).omit({id:!0,createdAt:!0,updatedAt:!0});_(Ru).omit({id:!0,createdAt:!0,updatedAt:!0});_(Eu).omit({id:!0,createdAt:!0});const nt=g("gift_cards",{id:y("id").primaryKey(),code:a("code").notNull().unique(),issuerId:l("issuer_id"),issuerType:a("issuer_type").notNull(),amount:b("amount",{precision:10,scale:2}).notNull(),remainingBalance:b("remaining_balance",{precision:10,scale:2}).notNull(),isActive:N("is_active").default(!0),expiresAt:n("expires_at"),usageLimit:l("usage_limit").default(1),usageCount:l("usage_count").default(0),applicableStores:a("applicable_stores").array(),applicableMalls:a("applicable_malls").array(),title:a("title").notNull(),description:a("description"),terms:a("terms"),createdAt:n("created_at").defaultNow(),createdBy:l("created_by")}),Bu=g("user_wallets",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),giftCardId:l("gift_card_id").notNull().references(()=>nt.id),addedAt:n("added_at").defaultNow(),isRedeemed:N("is_redeemed").default(!1),redeemedAt:n("redeemed_at"),redeemedAmount:b("redeemed_amount",{precision:10,scale:2})}),jn=g("mall_credits",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),mallId:a("mall_id").notNull(),mallName:a("mall_name").notNull(),amount:b("amount",{precision:10,scale:2}).notNull(),remainingBalance:b("remaining_balance",{precision:10,scale:2}).notNull(),source:a("source").notNull(),description:a("description"),isActive:N("is_active").default(!0),expiresAt:n("expires_at"),applicableStores:a("applicable_stores").array(),earnedAt:n("earned_at").defaultNow(),usedAt:n("used_at"),usedAmount:b("used_amount",{precision:10,scale:2})}),zu=g("wallet_transactions",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),transactionType:a("transaction_type").notNull(),amount:b("amount",{precision:10,scale:2}).notNull(),giftCardId:l("gift_card_id").references(()=>nt.id),mallCreditId:l("mall_credit_id").references(()=>jn.id),orderId:a("order_id"),description:a("description").notNull(),metadata:R("metadata"),transactionDate:n("transaction_date").defaultNow()});_(nt).omit({id:!0,createdAt:!0,usageCount:!0,remainingBalance:!0});_(Bu).omit({id:!0,addedAt:!0});_(jn).omit({id:!0,earnedAt:!0,usedAt:!0,usedAmount:!0});_(zu).omit({id:!0,transactionDate:!0});const qu=g("user_referrals",{id:D("id").primaryKey(),referrerId:D("referrer_id").notNull(),referredUserId:D("referred_user_id"),referralCode:D("referral_code").notNull().unique(),status:D("status").notNull().default("pending"),spiralsEarned:l("spirals_earned").notNull().default(0),firstPurchaseBonus:N("first_purchase_bonus").notNull().default(!1),createdAt:n("created_at").defaultNow().notNull(),completedAt:n("completed_at")}),Ou=g("invite_leaderboard",{id:D("id").primaryKey(),userId:D("user_id").notNull().unique(),totalInvites:l("total_invites").notNull().default(0),successfulInvites:l("successful_invites").notNull().default(0),totalSpiralEarned:l("total_spiral_earned").notNull().default(0),currentRank:l("current_rank"),badges:a("badges").array().default([]),isPublic:N("is_public").notNull().default(!0),updatedAt:n("updated_at").defaultNow().notNull()}),Vu=g("referral_rewards",{id:D("id").primaryKey(),userId:D("user_id").notNull(),referralId:D("referral_id").notNull(),rewardType:D("reward_type").notNull(),spiralAmount:l("spiral_amount").notNull(),description:D("description").notNull(),createdAt:n("created_at").defaultNow().notNull()});_(qu).omit({id:!0,createdAt:!0,completedAt:!0});_(Ou).omit({id:!0,updatedAt:!0});_(Vu).omit({id:!0,createdAt:!0});const Uu=g("spiral_wallets",{id:y("id").primaryKey(),userId:a("user_id").notNull().unique(),balance:l("balance").default(0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ku=g("spiral_wallet_history",{id:y("id").primaryKey(),userId:a("user_id").notNull(),date:n("date").defaultNow(),type:a("type").notNull(),source:a("source").notNull(),amount:l("amount").notNull(),description:a("description").notNull(),createdAt:n("created_at").defaultNow()});_(Uu).omit({id:!0,createdAt:!0,updatedAt:!0});_(Ku).omit({id:!0,date:!0,createdAt:!0});const wn=g("pickup_windows",{id:y("id").primaryKey(),retailerId:l("retailer_id").references(()=>we.id).notNull(),startTime:n("start_time").notNull(),endTime:n("end_time").notNull(),capacity:l("capacity").default(10).notNull(),booked:l("booked").default(0).notNull(),dayOfWeek:l("day_of_week").notNull(),isActive:N("is_active").default(!0).notNull(),createdAt:n("created_at").defaultNow()}),$u=g("user_pickups",{id:y("id").primaryKey(),userId:D("user_id").notNull(),orderId:l("order_id").references(()=>ee.id),windowId:l("window_id").references(()=>wn.id).notNull(),customerName:D("customer_name").notNull(),customerPhone:D("customer_phone").notNull(),specialInstructions:a("special_instructions"),status:D("status").default("scheduled").notNull(),scheduledAt:n("scheduled_at").defaultNow(),completedAt:n("completed_at")}),Hu=g("messages",{id:y("id").primaryKey(),senderId:D("sender_id").notNull(),receiverId:D("receiver_id").notNull(),senderType:D("sender_type").notNull(),receiverType:D("receiver_type").notNull(),subject:D("subject"),message:a("message").notNull(),isRead:N("is_read").default(!1),isArchived:N("is_archived").default(!1),isFlagged:N("is_flagged").default(!1),timestamp:n("timestamp").defaultNow()}),Qu=g("mall_maps",{id:y("id").primaryKey(),mallId:l("mall_id").unique().notNull(),mallName:D("mall_name").notNull(),svgUrl:D("svg_url"),jsonPathData:R("json_path_data"),mapMetadata:R("map_metadata"),storeLocations:R("store_locations"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Gu=g("retailer_profiles",{id:y("id").primaryKey(),retailerId:l("retailer_id").references(()=>we.id).unique().notNull(),aboutText:a("about_text"),logoUrl:D("logo_url"),website:D("website"),operatingHours:R("operating_hours"),contactInfo:R("contact_info"),socialLinks:R("social_links"),specialties:a("specialties").array(),paymentMethods:a("payment_methods").array(),isVerified:N("is_verified").default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Wu=g("large_retailer_settings",{id:y("id").primaryKey(),userId:D("user_id").unique().notNull(),optedIn:N("opted_in").default(!1).notNull(),preferences:R("preferences"),notificationEnabled:N("notification_enabled").default(!0),timestamp:n("timestamp").defaultNow(),updatedAt:n("updated_at").defaultNow()});_(wn).omit({id:!0,booked:!0,createdAt:!0});_($u).omit({id:!0,scheduledAt:!0,completedAt:!0});_(Hu).omit({id:!0,timestamp:!0});_(Qu).omit({id:!0,createdAt:!0,updatedAt:!0});_(Gu).omit({id:!0,createdAt:!0,updatedAt:!0});_(Wu).omit({id:!0,timestamp:!0,updatedAt:!0});const Zu=g("retailer_follow_system",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id),followType:a("follow_type").notNull(),followId:l("follow_id").notNull(),followedAt:n("followed_at").defaultNow(),notificationsEnabled:N("notifications_enabled").default(!0),tags:a("tags").array()}),Ju=g("retailer_follow_stats",{id:y("id").primaryKey(),storeId:l("store_id").notNull().references(()=>W.id),totalFollowers:l("total_followers").default(0),followersThisWeek:l("followers_this_week").default(0),followersThisMonth:l("followers_this_month").default(0),lastUpdated:n("last_updated").defaultNow()}),Xu=g("follow_notification_preferences",{id:y("id").primaryKey(),userId:l("user_id").notNull().references(()=>L.id).unique(),newProductNotifications:N("new_product_notifications").default(!0),saleNotifications:N("sale_notifications").default(!0),eventNotifications:N("event_notifications").default(!0),weeklyDigest:N("weekly_digest").default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});_(du).omit({id:!0,createdAt:!0,updatedAt:!0});_(cu).omit({id:!0,valuationScore:!0,valuationRisk:!0,effectiveCostPct:!0,recommendedMultiplier:!0,recommendedDurationDays:!0,valuationNotes:!0,decidedBy:!0,decidedAt:!0,decisionReason:!0,createdAt:!0,updatedAt:!0});_(Zu).omit({id:!0,followedAt:!0});_(Ju).omit({id:!0,lastUpdated:!0});_(Xu).omit({id:!0,createdAt:!0,updatedAt:!0});function Yu(){const{toast:r}=me();M.useState("");const t=Ad({resolver:Pd(nu),defaultValues:{businessName:"",firstName:"",lastName:"",email:"",phone:"",address:"",category:"",description:"",zipCode:""}}),s=Td({mutationFn:async d=>(await Pn("POST","/api/retailers",d)).json(),onSuccess:()=>{r({title:"Success!",description:"Your retailer application has been submitted successfully."}),t.reset()},onError:d=>{r({title:"Error",description:"Failed to submit your application. Please try again.",variant:"destructive"})}}),i=d=>{const u=d.address.match(/\b\d{5}\b/),c=u?u[0]:"";s.mutate({...d,zipCode:c})};return e.jsx("section",{className:"py-16 bg-gray-50",id:"retailer-signup",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Join SPIRAL as a Retailer"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Connect with local customers and grow your business with our modern platform designed for local retailers."})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"p-8 lg:p-12",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Get Started Today"}),e.jsx(Id,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"space-y-6",children:[e.jsx(re,{control:t.control,name:"businessName",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Business Name"}),e.jsx(le,{children:e.jsx(G,{placeholder:"Enter your business name",...d})}),e.jsx(ne,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(re,{control:t.control,name:"firstName",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"First Name"}),e.jsx(le,{children:e.jsx(G,{placeholder:"First name",...d})}),e.jsx(ne,{})]})}),e.jsx(re,{control:t.control,name:"lastName",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Last Name"}),e.jsx(le,{children:e.jsx(G,{placeholder:"Last name",...d})}),e.jsx(ne,{})]})})]}),e.jsx(re,{control:t.control,name:"email",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Email Address"}),e.jsx(le,{children:e.jsx(G,{type:"email",placeholder:"your@email.com",...d})}),e.jsx(ne,{})]})}),e.jsx(re,{control:t.control,name:"phone",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Phone Number"}),e.jsx(le,{children:e.jsx(G,{type:"tel",placeholder:"(555) 123-4567",...d})}),e.jsx(ne,{})]})}),e.jsx(re,{control:t.control,name:"address",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Business Address"}),e.jsx(le,{children:e.jsx(G,{placeholder:"123 Main Street, City, State 12345",...d})}),e.jsx(ne,{})]})}),e.jsx(re,{control:t.control,name:"category",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Business Category"}),e.jsxs(ui,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(le,{children:e.jsx(mi,{children:e.jsx(pi,{placeholder:"Select a category"})})}),e.jsxs(hi,{children:[e.jsx(te,{value:"clothing",children:"Clothing & Fashion"}),e.jsx(te,{value:"food",children:"Food & Beverage"}),e.jsx(te,{value:"home",children:"Home & Garden"}),e.jsx(te,{value:"health",children:"Health & Beauty"}),e.jsx(te,{value:"electronics",children:"Electronics"}),e.jsx(te,{value:"books",children:"Books & Media"}),e.jsx(te,{value:"jewelry",children:"Jewelry & Accessories"}),e.jsx(te,{value:"sports",children:"Sports & Recreation"}),e.jsx(te,{value:"other",children:"Other"})]})]}),e.jsx(ne,{})]})}),e.jsx(re,{control:t.control,name:"description",render:({field:d})=>e.jsxs(ae,{children:[e.jsx(ie,{children:"Business Description"}),e.jsx(le,{children:e.jsx(Ye,{placeholder:"Tell customers about your business...",rows:4,...d,value:d.value||""})}),e.jsx(ne,{})]})}),e.jsx(I,{type:"submit",className:"w-full bg-spiral-blue text-white hover:bg-spiral-blue-dark",disabled:s.isPending,children:s.isPending?"Submitting...":"Join SPIRAL"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-spiral-blue-light to-spiral-blue p-8 lg:p-12 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Why Choose SPIRAL?"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 mr-4 mt-1",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Local Community Focus"}),e.jsx("p",{className:"text-blue-100",children:"Connect with customers in your neighborhood who want to support local businesses."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 mr-4 mt-1",children:e.jsx(tt,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Grow Your Business"}),e.jsx("p",{className:"text-blue-100",children:"Increase visibility and reach new customers with our modern platform."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 mr-4 mt-1",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Easy to Use"}),e.jsx("p",{className:"text-blue-100",children:"Manage your store profile and connect with customers through our intuitive interface."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-2 mr-4 mt-1",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Perks & Rewards"}),e.jsx("p",{className:"text-blue-100",children:"Offer exclusive perks to loyal customers and build lasting relationships."})]})]})]})]})]})})]})})}function em(){return e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Store Profile Example"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"See how your business will look on SPIRAL with our professional store profiles."})]}),e.jsxs(O,{className:"overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=400",alt:"Modern retail storefront with large windows",className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:[e.jsx("div",{className:"inline-block w-2 h-2 bg-white rounded-full mr-1"}),"Open Now"]})})]}),e.jsx(U,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"lg:w-2/3",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mr-4",children:"The Modern Store"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((r,t)=>e.jsx(X,{className:"h-4 w-4 fill-current"},t))}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"4.8 (234 reviews)"})]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"A contemporary retail space featuring curated home goods, artisanal products, and unique finds. We pride ourselves on supporting local artisans and offering high-quality, sustainable products."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Store Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{children:"123 Design Street, Creative District"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(mt,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{children:"(555) 123-4567"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cd,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{children:"info@themodernstore.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Hours"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monday - Friday"}),e.jsx("span",{children:"9:00 AM - 7:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Saturday"}),e.jsx("span",{children:"10:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday"}),e.jsx("span",{children:"12:00 PM - 5:00 PM"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Current Perks & Offers"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-spiral-blue bg-opacity-10 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(_e,{className:"h-4 w-4 text-spiral-blue mr-2"}),e.jsx("span",{className:"font-medium text-spiral-blue",children:"New Customer Special"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"15% off your first purchase"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Qd,{className:"h-4 w-4 text-green-600 mr-2"}),e.jsx("span",{className:"font-medium text-green-600",children:"Eco-Friendly Discount"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"10% off sustainable products"})]})]})]})]}),e.jsxs("div",{className:"lg:w-1/3 lg:ml-8 mt-8 lg:mt-0",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(I,{className:"w-full bg-spiral-blue text-white hover:bg-spiral-blue-dark",children:[e.jsx(xi,{className:"h-4 w-4 mr-2"}),"Get Directions"]}),e.jsxs(I,{variant:"outline",className:"w-full",children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Call Store"]}),e.jsxs(I,{variant:"outline",className:"w-full",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Share Store"]})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-4 w-4 text-yellow-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"New 5-star review"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Added new perk offer"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Updated store hours"})]})]})]})]})]})})]})]})})}function tm({className:r}){const s=oi(c=>c.getTotalItems)(),{toast:i}=me(),d=[{icon:rt,label:"Cart",href:"/cart",count:s,color:"bg-[var(--spiral-coral)]",textColor:"text-white"},{icon:Y,label:"Near Me",action:()=>{var c;(c=navigator.geolocation)==null||c.getCurrentPosition(m=>{i({title:"Location found",description:"Showing stores near you"}),window.location.href="/products?location=nearby"},()=>{i({title:"Location access denied",description:"Please enable location services",variant:"destructive"})})},color:"bg-[var(--spiral-sage)]",textColor:"text-white"},{icon:ye,label:"Wishlist",href:"/wishlist",color:"bg-[var(--spiral-gold)]",textColor:"text-white"},{icon:X,label:"Reviews",action:()=>{i({title:"Review Center",description:"Share your local shopping experiences"})},color:"bg-[var(--spiral-navy)]",textColor:"text-white"},{icon:_e,label:"Rewards",href:"/spirals",color:"bg-gradient-to-r from-[var(--spiral-coral)] to-[var(--spiral-gold)]",textColor:"text-white"},{icon:Be,label:"Share",action:()=>{navigator.share?navigator.share({title:"SPIRAL - Everything Local",text:"Discover amazing local businesses in your area!",url:window.location.origin}):(navigator.clipboard.writeText(window.location.origin),i({title:"Link copied",description:"Share SPIRAL with your friends!"}))},color:"bg-[var(--spiral-cream)]",textColor:"text-[var(--spiral-navy)]"}],u=c=>{c.action&&c.action()};return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm p-4 ${r}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-[var(--spiral-navy)] mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:d.map((c,m)=>{const v=e.jsxs("button",{onClick:()=>u(c),className:`relative flex flex-col items-center justify-center p-4 rounded-lg ${c.color} ${c.textColor} hover:scale-105 transition-all duration-200 shadow-sm hover:shadow-md min-h-[80px]`,children:[e.jsx(c.icon,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:c.label}),c.count!==void 0&&c.count>0&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:c.count>99?"99+":c.count})]});return c.href?e.jsx(T,{href:c.href,children:v},m):e.jsx("div",{children:v},m)})}),e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-[var(--spiral-cream)] to-[var(--spiral-sage)]/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[var(--spiral-coral)] rounded-full flex items-center justify-center",children:e.jsx(Tn,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--spiral-navy)]",children:"Enable Notifications"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Get alerts for local deals and new stores"})]})]})})]})}class sm extends M.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("SPIRAL Error Boundary caught an error:",t,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-[var(--spiral-cream)] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ke,{className:"h-8 w-8 text-red-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-[var(--spiral-navy)] mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(I,{onClick:()=>window.location.reload(),className:"w-full bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90 text-white",children:[e.jsx(Md,{className:"h-4 w-4 mr-2"}),"Refresh Page"]}),e.jsx(I,{variant:"outline",onClick:()=>window.location.href="/",className:"w-full border-[var(--spiral-navy)] text-[var(--spiral-navy)]",children:"Go Home"})]}),this.state.error&&!1]})}):this.props.children}}function rm(){const[r,t]=M.useState(!1),[s,i]=M.useState([]),[d,u]=M.useState([]);M.useEffect(()=>{c(),m();const f=setInterval(c,5e3);return()=>clearInterval(f)},[]);const c=()=>{const f=performance.getEntriesByType("navigation")[0],A=performance.memory,P=[{name:"Load Time",value:f?Math.round(f.loadEventEnd-f.fetchStart):1200,unit:"ms",threshold:3e3,status:"good",description:"Time to fully load the page"},{name:"First Contentful Paint",value:f?Math.round(f.responseStart-f.fetchStart):800,unit:"ms",threshold:1800,status:"excellent",description:"Time to first content render"},{name:"Largest Contentful Paint",value:Math.random()*1e3+1e3,unit:"ms",threshold:2500,status:"good",description:"Time to largest content render"},{name:"Memory Usage",value:A?Math.round(A.usedJSHeapSize/1024/1024):179,unit:"MB",threshold:300,status:"good",description:"JavaScript heap memory usage"},{name:"Bundle Size",value:245,unit:"KB",threshold:500,status:"excellent",description:"Total JavaScript bundle size"},{name:"API Response Time",value:Math.random()*200+100,unit:"ms",threshold:500,status:"excellent",description:"Average API response time"}];P.forEach(j=>{const E=j.value/j.threshold;E<=.5?j.status="excellent":E<=.8?j.status="good":j.status="poor"}),i(P)},m=()=>{u([{category:"Performance",score:92,metrics:[{name:"First Contentful Paint",value:1.2,unit:"s",threshold:1.8,status:"excellent",description:"Time to first content"},{name:"Speed Index",value:2.1,unit:"s",threshold:3.4,status:"excellent",description:"How quickly content is visually displayed"},{name:"Total Blocking Time",value:45,unit:"ms",threshold:200,status:"excellent",description:"Time blocked by main thread"}]},{category:"Accessibility",score:98,metrics:[{name:"Color Contrast",value:100,unit:"%",threshold:100,status:"excellent",description:"Sufficient color contrast"},{name:"Alt Text",value:95,unit:"%",threshold:100,status:"good",description:"Images have alt text"},{name:"Keyboard Navigation",value:100,unit:"%",threshold:100,status:"excellent",description:"Keyboard accessible"}]},{category:"Best Practices",score:95,metrics:[{name:"HTTPS Usage",value:100,unit:"%",threshold:100,status:"excellent",description:"Uses HTTPS"},{name:"Modern JS",value:98,unit:"%",threshold:95,status:"excellent",description:"Uses modern JavaScript"},{name:"No Console Errors",value:90,unit:"%",threshold:100,status:"good",description:"No console errors"}]},{category:"SEO",score:89,metrics:[{name:"Meta Description",value:100,unit:"%",threshold:100,status:"excellent",description:"Has meta description"},{name:"Title Tags",value:95,unit:"%",threshold:100,status:"good",description:"Proper title tags"},{name:"Mobile Friendly",value:100,unit:"%",threshold:100,status:"excellent",description:"Mobile optimized"}]}])},v=async()=>{t(!0);for(let f=0;f<=100;f+=10)await new Promise(A=>setTimeout(A,200));c(),m(),t(!1)},S=f=>f>=90?"bg-green-100 text-green-800":f>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",h=f=>{switch(f){case"excellent":return fe;case"good":return fe;case"poor":return Ke;default:return pt}},w=f=>{switch(f){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"poor":return"text-red-600";default:return"text-gray-600"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{children:e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5 text-[var(--spiral-coral)]"}),"Performance Monitor"]}),e.jsx(di,{children:"Real-time performance metrics and optimization insights"})]}),e.jsxs(I,{onClick:v,disabled:r,className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90",children:[r?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(pt,{className:"mr-2 h-4 w-4"}),r?"Running Audit...":"Run Audit"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(f=>{const A=h(f.status);return e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)]",children:f.name}),e.jsx(A,{className:`h-4 w-4 ${w(f.status)}`})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:`text-2xl font-bold ${w(f.status)}`,children:typeof f.value=="number"?f.value.toFixed(0):f.value}),e.jsx("span",{className:"text-sm text-gray-600",children:f.unit})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:f.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Performance"}),e.jsxs("span",{children:[Math.round((1-f.value/f.threshold)*100),"%"]})]}),e.jsx(Pe,{value:Math.min(100,Math.max(0,(1-f.value/f.threshold)*100)),className:"h-2"})]})]})},f.name)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[var(--spiral-navy)] mb-4",children:"Lighthouse Audit Scores"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map(f=>e.jsxs(O,{children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(de,{className:"text-base",children:f.category}),e.jsx(J,{className:S(f.score),children:f.score})]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:f.metrics.map(A=>{const P=h(A.status);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:`h-3 w-3 ${w(A.status)}`}),e.jsx("span",{className:"text-sm",children:A.name})]}),e.jsxs("span",{className:"text-sm font-medium",children:[A.value,A.unit]})]},A.name)})})})]},f.category))})]}),e.jsxs(O,{children:[e.jsx(oe,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5 text-[var(--spiral-coral)]"}),"Optimization Recommendations"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)] mb-3",children:"Performance Optimizations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Image Optimization Active"}),e.jsx("p",{className:"text-xs text-gray-600",children:"WebP format conversion enabled"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Code Splitting Implemented"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Dynamic imports for route chunks"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ke,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Service Worker Caching"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Consider implementing for better offline support"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)] mb-3",children:"User Experience"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Mobile Responsive Design"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Optimized for all device sizes"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Accessibility Features"}),e.jsx("p",{className:"text-xs text-gray-600",children:"WCAG 2.1 compliant design"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Fast Loading Components"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Optimized React component loading"})]})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ld,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)]",children:"Desktop"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Performance Score"}),e.jsx("span",{className:"font-medium text-green-600",children:"95"})]}),e.jsx(Pe,{value:95,className:"h-2"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Excellent performance on desktop devices"})]})]})}),e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(st,{className:"h-5 w-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)]",children:"Mobile"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Performance Score"}),e.jsx("span",{className:"font-medium text-green-600",children:"89"})]}),e.jsx(Pe,{value:89,className:"h-2"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Good mobile performance with room for improvement"})]})]})}),e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ic,{className:"h-5 w-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-[var(--spiral-navy)]",children:"Network"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Load Time (3G)"}),e.jsx("span",{className:"font-medium text-green-600",children:"2.1s"})]}),e.jsx(Pe,{value:78,className:"h-2"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Optimized for slower network conditions"})]})]})})]})]})}function am(){const[r,t]=M.useState(!0),{toast:s}=me();return M.useEffect(()=>{const i=()=>{t(!0),s({title:"Back online",description:"Your connection has been restored.",duration:3e3})},d=()=>{t(!1),s({title:"You're offline",description:"Some features may not work without internet.",variant:"destructive",duration:5e3})};return t(navigator.onLine),window.addEventListener("online",i),window.addEventListener("offline",d),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",d)}},[s]),r?null:e.jsxs("div",{className:"fixed top-20 left-4 right-4 bg-red-500 text-white p-3 rounded-lg shadow-lg z-50 flex items-center gap-3 max-w-sm mx-auto",children:[e.jsx(ac,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm",children:"You're offline"}),e.jsx("p",{className:"text-xs opacity-90",children:"Check your internet connection"})]})]})}function _n(r,t){const[s,i]=M.useState(()=>{try{if(typeof window<"u"){const c=window.localStorage.getItem(r);return c?JSON.parse(c):t}return t}catch(c){return console.error(`Error reading localStorage key "${r}":`,c),t}});return[s,c=>{try{const m=c instanceof Function?c(s):c;i(m),typeof window<"u"&&window.localStorage.setItem(r,JSON.stringify(m))}catch(m){console.error(`Error setting localStorage key "${r}":`,m)}},()=>{try{i(t),typeof window<"u"&&window.localStorage.removeItem(r)}catch(c){console.error(`Error removing localStorage key "${r}":`,c)}}]}function im(){const[r,t]=M.useState(null),[s,i]=M.useState(!1),[d,u]=_n("spiral-pwa-declined",!1);M.useEffect(()=>{const S=w=>{w.preventDefault(),t(w),d||i(!0)},h=()=>{console.log("SPIRAL PWA was installed"),i(!1),t(null)};return window.addEventListener("beforeinstallprompt",S),window.addEventListener("appinstalled",h),()=>{window.removeEventListener("beforeinstallprompt",S),window.removeEventListener("appinstalled",h)}},[d]);const c=async()=>{if(!r)return;await r.prompt();const{outcome:S}=await r.userChoice;S==="accepted"?console.log("User accepted the install prompt"):(console.log("User dismissed the install prompt"),u(!0)),t(null),i(!1)},m=()=>{i(!1),u(!0)},v=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;return!s||!r||v?null:e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-xl shadow-lg p-4 z-50 max-w-sm mx-auto",children:[e.jsx("button",{onClick:m,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ni,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[var(--spiral-navy)] to-[var(--spiral-coral)] rounded-lg flex items-center justify-center",children:e.jsx(st,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)] mb-1",children:"Install SPIRAL App"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add SPIRAL to your home screen for quick access and offline features."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{onClick:c,className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90 text-white text-sm h-8 px-3",children:[e.jsx(kd,{className:"h-3 w-3 mr-1"}),"Install"]}),e.jsx(I,{onClick:m,variant:"outline",className:"text-sm h-8 px-3 border-gray-300",children:"Maybe Later"})]})]})]})]})}function lm(){const[r,t]=M.useState(!1),[s,i]=_n("spiral-accessibility",{fontSize:100,highContrast:!1,reducedMotion:!1,screenReader:!1,focusOutline:!0,colorAdjustment:"normal"}),d=(m,v)=>{i(S=>({...S,[m]:v}))},u=()=>{const m=document.documentElement;m.style.fontSize=`${s.fontSize}%`,s.highContrast?m.classList.add("high-contrast"):m.classList.remove("high-contrast"),s.reducedMotion?(m.style.setProperty("--animation-duration","0ms"),m.classList.add("reduced-motion")):(m.style.removeProperty("--animation-duration"),m.classList.remove("reduced-motion")),s.focusOutline?m.classList.add("focus-visible"):m.classList.remove("focus-visible")};M.useEffect(()=>{u()},[s]);const c=[{id:"fontSize",label:"Text Size",icon:tc,type:"slider",value:s.fontSize,min:75,max:150,step:25,description:"Adjust text size for better readability"},{id:"highContrast",label:"High Contrast",icon:Si,type:"switch",value:s.highContrast,description:"Increase contrast for better visibility"},{id:"reducedMotion",label:"Reduce Motion",icon:Wd,type:"switch",value:s.reducedMotion,description:"Minimize animations and transitions"},{id:"focusOutline",label:"Focus Indicators",icon:lc,type:"switch",value:s.focusOutline,description:"Show focus outlines for keyboard navigation"},{id:"screenReader",label:"Screen Reader Optimized",icon:rc,type:"switch",value:s.screenReader,description:"Optimize for screen reader users"}];return e.jsxs(e.Fragment,{children:[e.jsxs(kn,{open:r,onOpenChange:t,children:[e.jsx(Dn,{asChild:!0,children:e.jsx(I,{variant:"outline",size:"sm",className:"fixed bottom-4 left-4 z-50 bg-white border-2 border-[var(--spiral-navy)] text-[var(--spiral-navy)] hover:bg-[var(--spiral-cream)] shadow-lg","aria-label":"Accessibility Settings",children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsxs(Fn,{side:"left",className:"w-80 bg-white",children:[e.jsx(Rn,{children:e.jsxs(En,{className:"flex items-center gap-2 text-[var(--spiral-navy)]",children:[e.jsx(ot,{className:"h-5 w-5"}),"Accessibility Settings"]})}),e.jsxs("div",{className:"mt-6 space-y-6",children:[c.map(m=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--spiral-coral)]/10 flex items-center justify-center",children:e.jsx(m.icon,{className:"h-4 w-4 text-[var(--spiral-coral)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"font-semibold text-[var(--spiral-navy)]",children:m.label}),e.jsx("p",{className:"text-sm text-gray-600",children:m.description})]})]}),m.type==="switch"&&e.jsx("div",{className:"pl-11",children:e.jsx(ci,{checked:m.value,onCheckedChange:v=>d(m.id,v)})}),m.type==="slider"&&e.jsxs("div",{className:"pl-11 space-y-2",children:[e.jsx(Dd,{value:[m.value],onValueChange:([v])=>d(m.id,v),min:m.min,max:m.max,step:m.step,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[m.min,"%"]}),e.jsxs("span",{className:"font-semibold",children:[m.value,"%"]}),e.jsxs("span",{children:[m.max,"%"]})]})]})]},m.id)),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsx(I,{onClick:()=>{i({fontSize:100,highContrast:!1,reducedMotion:!1,screenReader:!1,focusOutline:!0,colorAdjustment:"normal"})},variant:"outline",className:"w-full",children:"Reset to Default"})}),e.jsx("div",{className:"p-3 bg-[var(--spiral-cream)] rounded-lg",children:e.jsx("p",{className:"text-xs text-gray-600",children:"SPIRAL is committed to accessibility. These settings are saved automatically and will persist across sessions."})})]})]})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .high-contrast {
            filter: contrast(150%) saturate(150%);
          }
          
          .reduced-motion * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
          
          .focus-visible *:focus {
            outline: 2px solid var(--spiral-coral) !important;
            outline-offset: 2px !important;
          }
        `}})]})}const nm=[{id:1,name:"Artisan Coffee Blend",price:24.99,image:"https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=300&h=300&fit=crop",store:"Blue Mountain Roasters",location:"Portland, OR",spiralsEarned:2,category:"Local Exclusive",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.8,description:"Locally roasted premium coffee blend with notes of chocolate and caramel"},{id:2,name:"Handcrafted Ceramic Mug Set",price:45,image:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=300&h=300&fit=crop",store:"Clay & Fire Studio",location:"Austin, TX",spiralsEarned:4,category:"Home Decor",fulfillment:["Ship to Me","Ship to Mall"],rating:4.9,description:"Beautiful handmade ceramic mugs perfect for your morning coffee"},{id:3,name:"Organic Cotton T-Shirt",price:32.5,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=300&h=300&fit=crop",store:"Green Threads",location:"Berkeley, CA",spiralsEarned:3,category:"Apparel",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.6,description:"Sustainably made organic cotton t-shirt in multiple colors"},{id:4,name:"Bluetooth Wireless Earbuds",price:89.99,image:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=300&h=300&fit=crop",store:"TechHub Local",location:"Seattle, WA",spiralsEarned:8,category:"Electronics",fulfillment:["Ship to Me","In-Store Pickup","Ship to Mall"],rating:4.7,description:"High-quality wireless earbuds with noise cancellation"},{id:5,name:"Artisan Chocolate Gift Box",price:28.75,image:"https://images.unsplash.com/photo-1549007994-cb92caebd54b?w=300&h=300&fit=crop",store:"Sweet Creations",location:"Nashville, TN",spiralsEarned:2,category:"Gifts",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.9,description:"Handcrafted artisan chocolates made with local ingredients"},{id:6,name:"Natural Skincare Set",price:52,image:"https://images.unsplash.com/photo-1556228453-efd6c1ff04f6?w=300&h=300&fit=crop",store:"Pure Beauty Co.",location:"Denver, CO",spiralsEarned:5,category:"Beauty",fulfillment:["Ship to Me","Ship to Mall"],rating:4.8,description:"All-natural skincare products made with organic ingredients"},{id:7,name:"Wooden Building Blocks Set",price:39.99,image:"https://images.unsplash.com/photo-1558060370-d644479cb6f7?w=300&h=300&fit=crop",store:"Tiny Treasures",location:"Minneapolis, MN",spiralsEarned:3,category:"Toys",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.7,description:"Educational wooden toys crafted by local artisans"},{id:8,name:"Vintage-Style Table Lamp",price:76.5,image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop",store:"Retro Finds",location:"Charleston, SC",spiralsEarned:7,category:"Home Decor",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.5,description:"Vintage-inspired table lamp perfect for any room"},{id:9,name:"Local Honey Variety Pack",price:18.99,image:"https://images.unsplash.com/photo-1558642452-9d2a7deb7f62?w=300&h=300&fit=crop",store:"Bee Happy Farms",location:"Savannah, GA",spiralsEarned:1,category:"Local Exclusive",fulfillment:["In-Store Pickup","Ship to Mall"],rating:4.9,description:"Pure local honey from regional beekeepers"},{id:10,name:"Leather Crossbody Bag",price:95,image:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=300&h=300&fit=crop",store:"Leather & Lace",location:"Phoenix, AZ",spiralsEarned:9,category:"Apparel",fulfillment:["Ship to Me","In-Store Pickup"],rating:4.8,description:"Handcrafted leather bag perfect for everyday use"},{id:11,name:"Smart Home Starter Kit",price:149.99,image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=300&fit=crop",store:"Future Home Tech",location:"San Jose, CA",spiralsEarned:14,category:"Electronics",fulfillment:["Ship to Me","Ship to Mall"],rating:4.6,description:"Complete smart home automation starter package"},{id:12,name:"Artisan Candle Collection",price:42,image:"https://images.unsplash.com/photo-1602874801006-7dba9f65b32d?w=300&h=300&fit=crop",store:"Flame & Fragrance",location:"Asheville, NC",spiralsEarned:4,category:"Gifts",fulfillment:["Ship to Me","In-Store Pickup","Ship to Mall"],rating:4.7,description:"Hand-poured soy candles with unique local scents"}],om=[{name:"Apparel",icon:"👔",color:"from-blue-500 to-purple-600"},{name:"Home Decor",icon:"🏠",color:"from-green-500 to-teal-600"},{name:"Electronics",icon:"📱",color:"from-purple-500 to-pink-600"},{name:"Gifts",icon:"🎁",color:"from-red-500 to-orange-600"},{name:"Beauty",icon:"💄",color:"from-pink-500 to-rose-600"},{name:"Toys",icon:"🧸",color:"from-yellow-500 to-amber-600"},{name:"Local Exclusive",icon:"⭐",color:"from-indigo-500 to-blue-600"}];function dm({isOpen:r,onClose:t}){const[s,i]=M.useState(0),d=[{title:"Welcome to SPIRAL!",content:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🌟"}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--spiral-navy)] mb-3",children:"Everything Local. Just for You."}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Join thousands of shoppers supporting local businesses while earning amazing rewards."})]})},{title:"Earn SPIRALs Every Purchase",content:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[var(--spiral-coral)] to-[var(--spiral-gold)] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--spiral-navy)] mb-3",children:"Earn Rewards on Every Purchase"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get 5 SPIRALs per $100 spent online, 10 SPIRALs per $100 in-store"}),e.jsx("div",{className:"bg-[var(--spiral-cream)] rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-[var(--spiral-navy)] font-medium",children:"💰 Double Value: SPIRALs earned online are worth 2x when redeemed in physical stores!"})})]})},{title:"Share & Earn More",content:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[var(--spiral-sage)] to-[var(--spiral-coral)] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ce,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--spiral-navy)] mb-3",children:"Grow Your Community"}),e.jsxs("div",{className:"space-y-3 text-gray-600",children:[e.jsx("p",{children:"📱 Share experiences: +5 SPIRALs per social post"}),e.jsx("p",{children:"👥 Invite friends: +20 SPIRALs when they sign up"}),e.jsx("p",{children:"🛍️ First purchase bonus: +50 SPIRALs for referrals"})]})]})},{title:"Flexible Pickup Options",content:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[var(--spiral-navy)] to-[var(--spiral-gold)] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Y,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-[var(--spiral-navy)] mb-3",children:"Choose Your Fulfillment"}),e.jsxs("div",{className:"space-y-2 text-gray-600",children:[e.jsxs("p",{children:["🏪 ",e.jsx("strong",{children:"In-Store Pickup:"})," Ready today, earn double SPIRALs"]}),e.jsxs("p",{children:["🚚 ",e.jsx("strong",{children:"Ship to Me:"})," Standard delivery to your door"]}),e.jsxs("p",{children:["🏬 ",e.jsx("strong",{children:"Ship to Mall:"})," Convenient SPIRAL Center pickup"]})]})]})}],u=()=>{s<d.length-1?i(s+1):t()},c=()=>{s>0&&i(s-1)};return e.jsx(We,{open:r,onOpenChange:t,children:e.jsxs(Ze,{className:"max-w-md",children:[e.jsx(Je,{children:e.jsx(Xe,{className:"text-center text-[var(--spiral-navy)]",children:d[s].title})}),e.jsx("div",{className:"py-6",children:d[s].content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-1",children:d.map((m,v)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${v===s?"bg-[var(--spiral-coral)]":"bg-gray-300"}`},v))}),e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsx(I,{variant:"outline",onClick:c,className:"border-gray-300 text-gray-600",children:"Back"}),e.jsx(I,{onClick:u,className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90 text-white",children:s===d.length-1?"Get Started":"Next"})]})]})]})})}function cm({userId:r,productId:t,context:s="homepage",limit:i=5,title:d="Recommended for You",showReason:u=!0,className:c=""}){var P;const[m,v]=M.useState(null),{data:S,isLoading:h}=Ae({queryKey:["/api/recommend",r,t,s,i],queryFn:async()=>{const j=new URLSearchParams;r&&j.append("userId",r),t&&j.append("productId",t),j.append("context",s),j.append("limit",i.toString());const E=await fetch(`/api/recommend?${j}`);if(!E.ok)throw new Error("Failed to fetch recommendations");return E.json()},staleTime:20*60*1e3,gcTime:60*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1}),w=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j/100),f=()=>{switch(s){case"product":return e.jsx(ye,{className:"h-4 w-4"});case"checkout":return e.jsx(tt,{className:"h-4 w-4"});default:return e.jsx(Se,{className:"h-4 w-4"})}};if(h)return e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:Array.from({length:i}).map((j,E)=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-80 animate-pulse"},E))})]});const A=((P=S==null?void 0:S.data)==null?void 0:P.recommendations)||S||[];return!A||A.length===0?null:e.jsxs("div",{className:`space-y-6 ${c}`,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[#006d77]",children:[f(),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d})]}),e.jsxs(J,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:[e.jsx(Se,{className:"h-3 w-3 mr-1"}),"AI Powered"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:A.map((j,E)=>e.jsx(O,{className:`hover:shadow-lg transition-all duration-200 relative ${m===j.productId?"ring-2 ring-[#006d77]/20 scale-[1.02]":""}`,onMouseEnter:()=>v(j.productId),onMouseLeave:()=>v(null),children:e.jsxs(U,{className:"p-0",children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100 rounded-t-lg overflow-hidden",children:[e.jsx("img",{src:j.product.imageUrl,alt:j.product.title,className:"w-full h-full object-cover",loading:"lazy"}),!j.product.inStock&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 flex items-center justify-center",children:e.jsx(J,{variant:"destructive",children:"Out of Stock"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(J,{className:"bg-[#006d77] text-white",children:[Math.round(j.score*10)/10,"★"]})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 line-clamp-2 leading-tight",children:j.product.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:j.product.storeName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-semibold text-[#006d77]",children:w(j.product.price)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:j.product.rating.toFixed(1)})]})]}),e.jsx(J,{variant:"outline",className:"text-xs",children:j.product.category}),u&&e.jsx("p",{className:"text-xs text-gray-500 italic line-clamp-2",children:j.reason}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(I,{size:"sm",className:"flex-1 bg-[#006d77] hover:bg-[#004d55] text-white",disabled:!j.product.inStock,children:[e.jsx(rt,{className:"h-3 w-3 mr-1"}),"Add to Cart"]}),e.jsx(I,{size:"sm",variant:"outline",className:"px-3",children:e.jsx(ye,{className:"h-3 w-3"})})]})]})]})},j.productId))}),s==="homepage"&&A.length>=i&&e.jsx("div",{className:"text-center",children:e.jsx(T,{href:"/products",children:e.jsx(I,{variant:"outline",size:"lg",className:"border-[#006d77] text-[#006d77] hover:bg-[#006d77] hover:text-white",children:"Discover More Products"})})})]})}function um(){return e.jsxs("div",{className:"flex flex-col items-center w-full bg-white text-gray-900",children:[e.jsxs("section",{className:"w-full bg-gradient-to-br from-yellow-100 to-orange-100 text-center py-12 sm:py-16 md:py-20 px-4 sm:px-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-3 sm:mb-4 leading-tight",children:"Your Main Street isn't gone—it's waiting to come back"}),e.jsx("p",{className:"section-description text-base sm:text-lg md:text-xl mb-6 max-w-2xl mx-auto leading-relaxed",children:"SPIRAL connects shoppers with real local stores, rewarding every purchase that supports a real place and real people."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 max-w-md sm:max-w-none mx-auto",children:[e.jsx(T,{to:"/shopper-dashboard",children:e.jsx("button",{className:"w-full sm:w-auto bg-black text-white px-6 py-3 rounded-full text-base sm:text-lg hover:bg-gray-800 transition-colors",children:"Shopper Dashboard"})}),e.jsx(T,{to:"/retailer-dashboard-new",children:e.jsx("button",{className:"w-full sm:w-auto border border-black px-6 py-3 rounded-full text-base sm:text-lg hover:bg-gray-200 transition-colors",children:"Retailer Dashboard"})})]})]}),e.jsxs("section",{className:"py-12 sm:py-16 md:py-20 px-4 sm:px-6 text-center w-full max-w-5xl",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold mb-6 sm:mb-8 md:mb-10",children:"How SPIRAL Works"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8",children:[e.jsx(T,{to:"/products",className:"group",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-3",children:"🛍️"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 group-hover:text-[var(--spiral-coral)] transition-colors",children:"Shop Local"}),e.jsx("p",{className:"section-description text-sm sm:text-base",children:"Discover and shop from local retailers near you or across the country."})]})}),e.jsx(T,{to:"/loyalty",className:"group",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-3",children:"⭐"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 group-hover:text-[var(--spiral-coral)] transition-colors",children:"Earn SPIRALs"}),e.jsx("p",{className:"section-description text-sm sm:text-base",children:"Earn rewards on every purchase—doubled when redeemed in person."})]})}),e.jsx(T,{to:"/about-spiral",className:"group sm:col-span-2 md:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-3",children:"📖"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 group-hover:text-[var(--spiral-coral)] transition-colors",children:"More About SPIRAL"}),e.jsx("p",{className:"section-description text-sm sm:text-base",children:"Learn how SPIRAL powers local commerce and community connections."})]})})]})]}),e.jsxs("section",{className:"py-20 px-6 bg-gray-50 w-full text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"SPIRAL Wallet"}),e.jsx("p",{className:"section-description mb-6 max-w-xl mx-auto",children:"Track your earnings, see your impact, and redeem rewards easily—all in one place."}),e.jsx(T,{to:"/shopper-dashboard",className:"text-blue-600 underline text-lg",children:"Access Your Wallet"})]}),e.jsxs("section",{className:"py-20 px-6 text-center bg-yellow-50",children:[e.jsx("h2",{className:"text-3xl font-semibold mb-4",children:"Be Part of the Movement"}),e.jsx("p",{className:"section-description mb-6 max-w-xl mx-auto",children:"Whether you're a shopper or a retailer—SPIRAL makes every local connection count."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(T,{to:"/shopper-dashboard",children:e.jsx("button",{className:"bg-black text-white px-6 py-3 rounded-full text-lg hover:bg-gray-800",children:"Start Your SPIRAL Journey"})}),e.jsx(T,{to:"/retailer-dashboard-new",children:e.jsx("button",{className:"bg-white text-black border border-black px-6 py-3 rounded-full text-lg hover:bg-gray-100",children:"Join as Retailer"})})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"#EarnSPIRALs #MainStreetRevival"})]})]})}const mm=[{name:"Fashion & Apparel",subcategories:["Women's Clothing","Men's Clothing","Kids & Baby","Shoes & Footwear","Jewelry & Watches","Handbags & Accessories","Activewear & Athletic","Swimwear & Loungewear"]},{name:"Beauty & Personal Care",subcategories:["Skincare","Makeup & Cosmetics","Hair Care","Fragrance","Men's Grooming","Bath & Body","Nail Care","Personal Care Tools"]},{name:"Home & Kitchen",subcategories:["Kitchen & Dining","Furniture","Home Decor","Bedding & Bath","Storage & Organization","Lighting","Small Appliances","Cookware & Bakeware"]},{name:"Electronics",subcategories:["Cell Phones & Accessories","Computers & Tablets","TV & Audio","Gaming","Cameras & Photo","Wearable Technology","Smart Home","Car Electronics"]},{name:"Sports & Outdoors",subcategories:["Exercise & Fitness","Outdoor Recreation","Team Sports","Golf","Hunting & Fishing","Fan Shop","Water Sports","Winter Sports"]},{name:"Health & Household",subcategories:["Vitamins & Supplements","Personal Care","Baby Care","Household Supplies","Medical Supplies","Sexual Wellness","Vision Care","Oral Care"]},{name:"Toys & Games",subcategories:["Action Figures & Collectibles","Arts & Crafts","Building Toys","Dolls & Accessories","Educational Toys","Electronic Toys","Games & Puzzles","Sports & Outdoor Toys"]},{name:"Automotive",subcategories:["Car Care","Exterior Accessories","Interior Accessories","Replacement Parts","Tools & Equipment","Tires & Wheels","Motorcycle & ATV","Performance Parts"]},{name:"Tools & Hardware",subcategories:["Power Tools","Hand Tools","Building Supplies","Hardware","Safety & Security","Storage & Organization","Measuring & Layout","Tool Sets"]},{name:"Books & Media",subcategories:["Fiction","Non-Fiction","Children's Books","Textbooks","Comics & Graphic Novels","Cooking & Food","Self-Help","Business & Money"]},{name:"Arts, Crafts & Sewing",subcategories:["Painting & Drawing","Sewing & Fabric","Scrapbooking","Beading & Jewelry Making","Knitting & Crochet","Woodworking","Pottery & Ceramics","Party Supplies"]},{name:"Pet Supplies",subcategories:["Dog Supplies","Cat Supplies","Fish & Aquatic Pets","Bird Supplies","Small Animal Supplies","Reptile Supplies","Horse Supplies","Pet Health & Wellness"]},{name:"Baby Products",subcategories:["Diapering","Feeding","Baby Care","Baby Safety","Nursery","Strollers & Car Seats","Baby & Toddler Toys","Maternity"]},{name:"Office & School Supplies",subcategories:["Office Electronics","Paper & Notebooks","Writing & Correction","Desk Accessories","Filing & Organization","School Supplies","Art Supplies","Calendars & Planners"]},{name:"Musical Instruments",subcategories:["Guitars & Bass","Keyboards & Piano","Drums & Percussion","Orchestral Strings","Band & Orchestra","Recording Equipment","DJ & Karaoke","Instrument Accessories"]},{name:"Patio, Lawn & Garden",subcategories:["Outdoor Furniture","Grills & Outdoor Cooking","Gardening & Lawn Care","Outdoor Decor","Patio Heating & Cooling","Pools & Water Fun","Outdoor Storage","Plants & Seeds"]},{name:"Food & Beverages",subcategories:["Pantry Staples","Snacks & Sweets","Beverages","Fresh & Frozen","Gourmet & Specialty","Coffee & Tea","Wine & Spirits","International Foods"]},{name:"Local Favorites",subcategories:["Local Made Products","Mall Exclusives","Regional Specialties","Artisan Crafts","Local Food & Treats","Community Brands","Event Merchandise","Seasonal Local Items"]}],pm={"Fashion & Apparel":Yd,"Beauty & Personal Care":ye,"Home & Kitchen":Fd,Electronics:Hd,"Sports & Outdoors":$d,"Health & Household":ye,"Toys & Games":at,Automotive:xt,"Tools & Hardware":xt,"Books & Media":Ud,"Arts, Crafts & Sewing":Si,"Pet Supplies":Jd,"Baby Products":Vd,"Office & School Supplies":Kd,"Musical Instruments":Zd,"Patio, Lawn & Garden":ec,"Food & Beverages":sc,"Local Favorites":X},wt=["from-pink-500 to-purple-500","from-green-500 to-teal-500","from-blue-500 to-indigo-500","from-purple-500 to-blue-500","from-orange-500 to-red-500","from-teal-500 to-green-500","from-yellow-500 to-orange-500","from-gray-600 to-gray-800","from-amber-600 to-yellow-600","from-indigo-500 to-purple-500","from-rose-500 to-pink-500","from-emerald-500 to-teal-500","from-cyan-500 to-blue-500","from-slate-600 to-gray-700","from-violet-500 to-purple-500","from-lime-500 to-green-500","from-red-500 to-rose-500","from-amber-500 to-orange-500"],hm=mm.map((r,t)=>({name:r.name,icon:pm[r.name]||He,href:`/products?category=${r.name.toLowerCase().replace(/\s+/g,"-").replace(/&/g,"and")}`,color:wt[t%wt.length],subcategories:r.subcategories})).concat([{name:"All Categories",icon:He,href:"/products",color:"from-gray-600 to-gray-800",subcategories:[]}]);function xm(){return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Shop by Category"}),e.jsx("div",{className:"space-y-3",children:hm.map(r=>{const t=r.icon;return e.jsxs("div",{className:"group",children:[e.jsx(T,{to:r.href,children:e.jsxs("div",{className:`flex items-center p-3 rounded-lg bg-gradient-to-r ${r.color} text-white hover:shadow-lg transition-all duration-200 cursor-pointer group-hover:scale-102`,children:[e.jsx(t,{className:"w-5 h-5 mr-3 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"font-medium text-sm",children:r.name})]})}),r.subcategories.length>0&&e.jsx("div",{className:"ml-4 mt-2 space-y-1",children:r.subcategories.map(s=>e.jsx(T,{href:`/products?category=${r.name.toLowerCase().replace(/\s+/g,"-")}&subcategory=${s.toLowerCase().replace(/\s+/g,"-")}`,children:e.jsxs("div",{className:"text-xs text-gray-600 hover:text-blue-600 py-1 px-2 rounded hover:bg-blue-50 transition-colors cursor-pointer",children:["• ",s]})},s))})]},r.name)})})]})}function fm(){const r=oi(m=>m.addItem),{toast:t}=me(),{data:s,isLoading:i,error:d}=Ae({queryKey:["/api/products/featured"],queryFn:async()=>{const m=await fetch("/api/products/featured");if(!m.ok)throw new Error("Failed to fetch featured products");return m.json()},staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchIntervalInBackground:!1}),u=m=>{r({id:m.id,name:m.name,price:m.price,image:m.image,category:m.category}),t({title:"Added to cart!",description:`${m.name} has been added to your cart.`,duration:3e3})};if(i)return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(H,{className:"h-8 w-48"}),e.jsx(H,{className:"h-4 w-24"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(m=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx(H,{className:"w-full h-48 mb-4"}),e.jsx(H,{className:"h-5 mb-2"}),e.jsx(H,{className:"h-4 w-2/3 mb-2"}),e.jsx(H,{className:"h-6 w-20"})]},m))})]});if(d||!(s!=null&&s.success))return e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Featured Products"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load featured products at this time."}),e.jsx(I,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})});const c=s.products||[];return c.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Featured Products"}),e.jsx("p",{className:"text-gray-600 text-center py-8",children:"No featured products available at this time."})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:"Featured Products"}),e.jsx(T,{href:"/products",children:e.jsxs(I,{variant:"outline",size:"sm",children:["View All ",e.jsx(ht,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:c.map(m=>e.jsxs("div",{className:"group bg-white border rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-40 sm:h-48 object-cover group-hover:scale-105 transition-transform duration-300",onError:v=>{v.target.src="/api/placeholder/300/200"}}),m.discount&&e.jsxs(J,{className:"absolute top-2 left-2 bg-[var(--spiral-coral)] text-white",children:[m.discount,"% OFF"]}),e.jsx(J,{variant:"secondary",className:"absolute top-2 right-2 bg-white/90",children:m.category})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:m.store})]}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 group-hover:text-[var(--spiral-navy)] transition-colors",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(X,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:m.rating}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",Math.floor(Math.random()*50)+10," reviews)"]})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-[var(--spiral-navy)]",children:["$",m.price.toFixed(2)]}),m.originalPrice&&e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",m.originalPrice]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{href:`/product/${m.id}`,className:"flex-1",children:e.jsxs(I,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(ht,{className:"w-4 h-4 mr-1"}),"View"]})}),e.jsxs(I,{size:"sm",className:"flex-1 bg-[var(--spiral-teal)] hover:bg-[var(--spiral-teal)]/90",onClick:()=>u(m),children:[e.jsx(rt,{className:"w-4 h-4 mr-1"}),"Add to Cart"]})]})]})]},m.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(T,{href:"/products?featured=true",children:e.jsx(I,{variant:"outline",size:"lg",children:"Explore More Featured Products"})})})]})}function gm(){const{data:r,isLoading:t}=Ae({queryKey:["/api/mall-events"],queryFn:async()=>{const i=await fetch("/api/mall-events");if(!i.ok)throw new Error("Failed to fetch mall events");return i.json()},staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1});if(t)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Upcoming Events"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(i=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx(H,{className:"h-4 mb-2"}),e.jsx(H,{className:"h-3 w-2/3 mb-2"}),e.jsx(H,{className:"h-3 w-1/2"})]},i))})]});const s=(r==null?void 0:r.events)||[{id:1,title:"Holiday Market & Craft Fair",date:"2025-02-15",time:"10:00 AM - 6:00 PM",location:"Main Street Mall",description:"Local artisans showcasing handmade crafts, food vendors, and live music",attendees:125,category:"Shopping",image:"/api/placeholder/300/150"},{id:2,title:"Local Business Showcase",date:"2025-02-20",time:"2:00 PM - 8:00 PM",location:"Heritage Square",description:"Meet local business owners and discover new stores in your community",attendees:89,category:"Business",image:"/api/placeholder/300/150"},{id:3,title:"Community Food Festival",date:"2025-02-25",time:"11:00 AM - 7:00 PM",location:"Downtown Plaza",description:"Taste local cuisine from neighborhood restaurants and food trucks",attendees:203,category:"Food",image:"/api/placeholder/300/150"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upcoming Events"}),e.jsx(T,{href:"/events",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All Events"})]}),e.jsx("div",{className:"space-y-4",children:s.slice(0,3).map(i=>e.jsx(T,{href:`/events/${i.id}`,children:e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:i.title}),e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:i.category})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[e.jsx(Rd,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:new Date(i.date).toLocaleDateString()}),e.jsx(Ee,{className:"w-3 h-3 ml-3 mr-1"}),e.jsx("span",{children:i.time})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:i.location}),e.jsx(ce,{className:"w-3 h-3 ml-3 mr-1"}),e.jsxs("span",{children:[i.attendees," attending"]})]}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:i.description})]})},i.id))})]})}function ym(){var u;const{data:r,isLoading:t}=Ae({queryKey:["/api/promotions"],queryFn:async()=>{const c=await fetch("/api/promotions");if(!c.ok)throw new Error("Failed to fetch promotions");return c.json()},staleTime:9e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1});if(t)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Local Deals & Promotions"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx(H,{className:"h-4 mb-2"}),e.jsx(H,{className:"h-3 w-2/3 mb-2"}),e.jsx(H,{className:"h-3 w-1/2"})]},c))})]});const s=((u=r==null?void 0:r.promotions)==null?void 0:u.map((c,m)=>({id:c.id,title:c.title,store:"SPIRAL Store",discount:c.type==="signup_bonus"?`${c.value} SPIRALs`:c.type==="first_purchase"?`${c.multiplier}x SPIRALs`:`+${c.bonus} SPIRALs`,description:c.description,validUntil:"2025-12-31",category:"SPIRAL Rewards",location:"Platform Wide",rating:4.9,image:"/api/placeholder/300/150"})))||[],i=s.length>0?s:[{id:1,title:"20% Off Winter Collection",store:"Bella's Boutique",discount:"20% OFF",description:"Save on stylish winter wear and accessories. Perfect for the season!",validUntil:"2025-02-28",category:"Fashion",location:"Fashion District",rating:4.7,image:"/api/placeholder/300/150"},{id:2,title:"Buy 2 Get 1 Free Coffee",store:"Morning Brew Cafe",discount:"BOGO",description:"Start your day right with our premium coffee blends and fresh pastries",validUntil:"2025-02-20",category:"Food & Beverage",location:"Downtown",rating:4.9,image:"/api/placeholder/300/150"},{id:3,title:"Free Delivery on Orders $25+",store:"Garden Fresh Market",discount:"FREE DELIVERY",description:"Fresh local produce delivered to your door with qualifying orders",validUntil:"2025-02-25",category:"Grocery",location:"Market Square",rating:4.6,image:"/api/placeholder/300/150"},{id:4,title:"30% Off Home Decor",store:"Cozy Corner Furnishings",discount:"30% OFF",description:"Transform your space with locally-made furniture and decor pieces",validUntil:"2025-03-05",category:"Home & Garden",location:"Arts District",rating:4.8,image:"/api/placeholder/300/150"}],d=c=>c.includes("%")?"bg-red-500":c.includes("BOGO")||c.includes("FREE")?"bg-green-500":"bg-blue-500";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Local Deals & Promotions"}),e.jsx(T,{href:"/promotions",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All Deals"})]}),e.jsx("div",{className:"space-y-4",children:i.slice(0,4).map(c=>{var m;return e.jsx(T,{href:`/store/${((m=c.store)==null?void 0:m.toLowerCase().replace(/\s+/g,"-"))||"spiral-store"}`,children:e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm mb-1",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:c.store||"SPIRAL Platform"})]}),e.jsx("div",{className:`${d(c.discount||"10% OFF")} text-white text-xs px-2 py-1 rounded-full font-bold`,children:c.discount||"SPIRAL Bonus"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:c.description||"Special offer available now"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"w-3 h-3 text-yellow-400 mr-1"}),e.jsx("span",{children:c.rating||4.5}),e.jsx(Y,{className:"w-3 h-3 ml-3 mr-1"}),e.jsx("span",{children:c.location||"Platform Wide"})]}),e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(Ee,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{children:["Until ",new Date(c.validUntil||"2025-12-31").toLocaleDateString()]})]})]}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(Ed,{className:"w-4 h-4 text-red-500"})})]})},c.id)})})]})}function Nm({className:r}){const[t,s]=M.useState(!1),i=c=>{c.preventDefault(),s(!0)},d=c=>{c.preventDefault(),s(!1)},u=c=>{c.preventDefault(),s(!1),Array.from(c.dataTransfer.files).find(S=>S.type.startsWith("image/"))&&(window.location.href="/visual-search")};return e.jsx(O,{className:`relative overflow-hidden bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 border-0 ${r}`,children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx($e,{className:"h-5 w-5 text-purple-600"})}),e.jsx("div",{className:"p-1 bg-yellow-100 rounded-md",children:e.jsx(Se,{className:"h-4 w-4 text-yellow-600"})}),e.jsx("span",{className:"text-xs font-medium text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:"NEW FEATURE"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Shop by Photo with AI Vision"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"Upload any image and our AI will identify the product, then find similar items in nearby stores. Perfect for finding that exact item you saw somewhere!"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{href:"/visual-search",children:e.jsxs(I,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Try Visual Search",e.jsx(Bd,{className:"h-4 w-4 ml-2"})]})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Works with any photo"})]})]}),e.jsxs("div",{className:"ml-6 relative",children:[e.jsx("div",{className:`w-32 h-24 border-2 border-dashed rounded-lg flex items-center justify-center transition-all duration-200 ${t?"border-purple-400 bg-purple-50":"border-gray-300 bg-white/50"}`,onDragOver:i,onDragLeave:d,onDrop:u,children:e.jsxs("div",{className:"text-center",children:[e.jsx(fi,{className:`h-6 w-6 mx-auto mb-1 ${t?"text-purple-600":"text-gray-400"}`}),e.jsx("div",{className:"text-xs text-gray-500",children:"Drag photo here"})]})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-lg shadow-md border p-1",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-200 to-red-300 rounded"})}),e.jsx("div",{className:"absolute -bottom-1 -left-2 w-6 h-6 bg-white rounded-lg shadow-md border p-1",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-200 to-blue-300 rounded"})})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:"✨ AI-powered recognition"}),e.jsx("span",{children:"📍 Location-based results"}),e.jsx("span",{children:"🏪 Real nearby stores"})]}),e.jsx("div",{className:"text-purple-600 font-medium",children:"Free to use"})]})})]})})}function vm({shopperId:r="demo-shopper-001",location:t="Minneapolis Shopping District",trigger:s}){const{toast:i}=me(),[d,u]=M.useState(!1),[c,m]=M.useState(!1),[v,S]=M.useState(!1),[h,w]=M.useState({friends:"",platform:"Instagram",preferences:"",budget:"",message:""}),f=async()=>{if(!h.friends.trim()){i({title:"Friends required",description:"Please add at least one friend to invite",variant:"destructive"});return}S(!0);try{const j=await(await fetch("/api/invite-to-shop/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopperId:r,friends:h.friends.split(",").map(E=>E.trim()).filter(E=>E),platform:h.platform,location:t,preferences:h.preferences.split(",").map(E=>E.trim()).filter(E=>E),budget:h.budget,aiEnabled:c})})).json();if(j.success)i({title:"Invite created successfully!",description:c?"AI has optimized your invite with personalized recommendations":"Your shopping invite is ready to share"}),w({friends:"",platform:"Instagram",preferences:"",budget:"",message:""}),u(!1);else throw new Error(j.error||"Failed to create invite")}catch(P){console.error("Error creating invite:",P),i({title:"Error creating invite",description:"Please try again or check your connection",variant:"destructive"})}finally{S(!1)}},A=e.jsxs(I,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Invite to Shop"]});return e.jsxs(We,{open:d,onOpenChange:u,children:[e.jsx(Cn,{asChild:!0,children:s||A}),e.jsxs(Ze,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Je,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-blue-600"}),"Invite Friends to Shop"]}),e.jsx(li,{children:"Create a personalized shopping invitation with AI-powered recommendations and group coordination"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(O,{className:"border-blue-100 bg-blue-50/50",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qd,{className:"w-5 h-5 text-blue-600"}),e.jsx(de,{className:"text-lg",children:"AI Enhancement"})]}),e.jsx(ci,{checked:c,onCheckedChange:m})]})}),c&&e.jsx(U,{className:"pt-0",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-700",children:[e.jsx(Od,{className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Why Enable AI?"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"• Personalized store recommendations based on group preferences"}),e.jsx("li",{children:"• Optimized social media content for maximum engagement"}),e.jsx("li",{children:"• Coordination with Mall Manager for special group offers"}),e.jsx("li",{children:"• Smart timing and route planning for efficient shopping"}),e.jsx("li",{children:"• SPIRAL rewards optimization for group activities"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{htmlFor:"friends",children:"Friends to Invite"}),e.jsx(Ye,{id:"friends",placeholder:`Enter friend names or emails (comma separated)
Example: Sarah, mike@example.com, Emily Chen`,value:h.friends,onChange:P=>w(j=>({...j,friends:P.target.value})),className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{htmlFor:"platform",children:"Share Platform"}),e.jsxs("select",{id:"platform",value:h.platform,onChange:P=>w(j=>({...j,platform:P.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Instagram",children:"Instagram"}),e.jsx("option",{value:"Facebook",children:"Facebook"}),e.jsx("option",{value:"Twitter",children:"X (Twitter)"}),e.jsx("option",{value:"TikTok",children:"TikTok"}),e.jsx("option",{value:"Messages",children:"Text Messages"}),e.jsx("option",{value:"Email",children:"Email"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{htmlFor:"budget",children:"Budget Range (Optional)"}),e.jsx(G,{id:"budget",placeholder:"e.g., $50-100 per person",value:h.budget,onChange:P=>w(j=>({...j,budget:P.target.value}))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{htmlFor:"preferences",children:"Shopping Interests"}),e.jsx(G,{id:"preferences",placeholder:"e.g., fashion, electronics, home decor, gifts (comma separated)",value:h.preferences,onChange:P=>w(j=>({...j,preferences:P.target.value}))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Y,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Shopping Location"}),e.jsx("p",{className:"text-sm text-gray-600",children:t})]})]}),c&&e.jsxs(O,{className:"border-green-200 bg-green-50/50",children:[e.jsx(oe,{className:"pb-3",children:e.jsxs(de,{className:"text-lg flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-green-600"}),"AI Features Included"]})}),e.jsxs(U,{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Social Media Optimization"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Group Offers & Discounts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{children:"Personalized Store Recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"Group Activity Planning"})]})]})]}),e.jsx(zd,{}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(I,{variant:"outline",onClick:()=>u(!1),disabled:v,children:"Cancel"}),e.jsx(I,{onClick:f,disabled:v||!h.friends.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:v?e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-4 h-4 mr-2 animate-spin"}),c?"AI Processing...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),c?"Create AI-Enhanced Invite":"Create Invite"]})})]})]})]})]})}function bm({shopperId:r="demo-shopper-001",location:t="Minneapolis Shopping District",className:s=""}){return e.jsxs(O,{className:`border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50 ${s}`,children:[e.jsxs(oe,{children:[e.jsxs(de,{className:"flex items-center gap-2 text-purple-800",children:[e.jsx(ce,{className:"w-6 h-6"}),"Invite Friends to Shop"]}),e.jsx(di,{className:"text-purple-600",children:"Create AI-enhanced group shopping experiences with personalized recommendations and social rewards"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[e.jsx(_e,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Group Discounts"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[e.jsx(Se,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"AI Recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[e.jsx(Be,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Social Sharing"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-purple-700",children:[e.jsx(ye,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:"SPIRAL Rewards"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/60 rounded-lg border border-purple-100",children:[e.jsx(Y,{className:"w-4 h-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800 text-sm",children:"Shopping at"}),e.jsx("p",{className:"text-purple-600 text-xs",children:t})]})]}),e.jsx(vm,{shopperId:r,location:t})]})]})}const jm=()=>{const[r,t]=Mn.useState(!1);return{isOnboarding:r,startOnboarding:()=>t(!0),endOnboarding:()=>t(!1)}};function _p(){var he;const[r,t]=M.useState(!1),[s,i]=M.useState(""),[d,u]=M.useState(""),[c,m]=M.useState(!1);M.useState("");const[v,S]=M.useState(!1);Ln();const{toast:h}=me();jm();const w=()=>{S(!1),localStorage.setItem("spiral-onboarding-seen","true")},{data:f,isLoading:A,error:P}=Ae({queryKey:d?["/api/stores/search",d]:["/api/stores"],queryFn:async()=>{const x=d?`/api/stores/search?zipCode=${d}`:"/api/stores",F=await fetch(x);if(!F.ok)throw new Error("Failed to fetch stores");return F.json()}}),j=f!=null&&f.success?((he=f.data)==null?void 0:he.stores)||[]:(f==null?void 0:f.stores)||[],E=()=>{const x=(j==null?void 0:j.length)||0;h({title:"Loading more stores...",description:`Loading stores ${x+1}-${x+10}`}),setTimeout(()=>{h({title:"More stores loaded",description:"Additional local stores are now displayed."})},1500)};return e.jsx(sm,{children:e.jsxs("div",{className:"min-h-screen bg-[var(--spiral-cream)]",children:[e.jsx(Bn,{}),e.jsx(um,{}),e.jsx("div",{className:"px-4 sm:px-6 py-4",children:e.jsx(Nm,{})}),e.jsxs("section",{id:"press-release",className:"bg-gradient-to-r from-gray-50 to-gray-100 px-4 sm:px-6 py-8 sm:py-12 rounded-xl sm:rounded-2xl shadow-lg text-center max-w-5xl mx-auto my-6 sm:my-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 mb-3 sm:mb-4",children:"SPIRAL: The Local Shopping Platform"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-600 mb-4 sm:mb-6 leading-relaxed",children:"SPIRAL connects shoppers with real local stores across the U.S., rewarding every purchase that supports a real place, real jobs, and real communities."}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-700 italic mb-4 sm:mb-6",children:"Our mission is simple: empower small retailers, reinvigorate malls, and make local shopping easier and more rewarding than ever."}),e.jsx("a",{href:"/about-spiral",className:"inline-block px-4 py-3 sm:px-6 bg-black text-white rounded-lg sm:rounded-xl shadow hover:bg-gray-900 transition-colors text-sm sm:text-base touch-target",children:"Learn More About SPIRAL"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 px-4 py-6 sm:py-8",children:[e.jsx("div",{className:"lg:col-span-1 order-2 lg:order-1",children:e.jsx(xm,{})}),e.jsxs("div",{className:"lg:col-span-2 order-1 lg:order-2 space-y-6",children:[e.jsx(fm,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(gm,{}),e.jsx(ym,{})]})]})]}),e.jsx("section",{className:"py-20 bg-[var(--spiral-cream)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--spiral-navy)] mb-4",children:"Your Local Shopping Hub"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Everything you need to discover, shop, and connect with your local community"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 px-4",children:[e.jsx(T,{to:"/trusted-local-stores",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-green-600 to-green-400 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🛡️"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Trusted Local"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Verified businesses you can trust"})]})]})})}),e.jsx(T,{to:"/explore-spirals",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-[var(--spiral-coral)] to-[var(--spiral-gold)] text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🌟"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Explore SPIRALs"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Discover unique local experiences and gems"})]})]})})}),e.jsx(T,{to:"/verified-lookup",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-[var(--spiral-sage)] to-[var(--spiral-navy)] text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🔍"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Verify Store"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Check if a business is SPIRAL verified"})]})]})})}),e.jsx(T,{to:"/products?category=featured",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-[var(--spiral-gold)] to-[var(--spiral-coral)] text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"💎"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Discover Finds"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Explore curated collections and trends"})]})]})})}),e.jsx(T,{to:"/wishlist-demo",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-red-500 to-pink-400 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"❤️"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Wishlist Alerts"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Track prices and get notified of drops"}),e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-white/20 rounded-full mt-1",children:"NEW"})]})]})})}),e.jsx(T,{to:"/cross-retailer",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-indigo-600 to-blue-500 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🔗"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Cross-Retailer"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Search ALL local stores at once"})]})]})]})}),e.jsx(T,{to:"/cross-retailer-customer",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-purple-600 to-pink-600 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-green-400 text-black text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🛍️"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Shop Local Stores"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"One cart, all local retailers"})]})]})]})}),e.jsx(T,{to:"/intelligent-wishlist",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-purple-600 to-violet-500 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"AI"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🧠"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"AI Intelligence"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Smart recommendations & price predictions"})]})]})]})}),e.jsx(T,{to:"/admin/analytics",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-gray-600 to-gray-500 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-green-400 text-black text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"📊"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Analytics Hub"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Real-time business intelligence"})]})]})]})}),e.jsx(T,{to:"/admin/fulfillment",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-blue-600 to-indigo-600 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold animate-pulse",children:"MVP"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🚚"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Fulfillment Hub"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Local logistics & delivery network"})]})]})]})}),e.jsx(T,{to:"/redeem-spirals",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-[var(--spiral-coral)] to-[var(--spiral-sage)] text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🎁"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Redeem SPIRALs"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Use points for exclusive perks and experiences"})]})]})})}),e.jsx(T,{to:"/delivery-options",className:"group",children:e.jsx("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-[var(--spiral-navy)] to-[var(--spiral-gold)] text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target",children:e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🚚"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Delivery Options"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Same-day delivery, pickup, and ship-to-store"})]})]})})}),e.jsx(T,{to:"/social-rewards",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-purple-600 to-pink-500 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🏆"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Social Rewards"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Earn badges and SPIRALs by sharing"})]})]})]})}),e.jsx(T,{to:"/shopper-onboarding-walkthrough",className:"group",children:e.jsxs("div",{className:"w-full max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-green-500 to-teal-600 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer touch-target relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🚀"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Get Started"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Personalize your shopping experience"})]})]})]})}),e.jsx(T,{to:"/retailer-apply",className:"group",children:e.jsxs("div",{className:"max-w-[300px] mx-auto md:mx-0 py-4 px-4 rounded-xl shadow-md bg-gradient-to-br from-orange-500 to-red-500 text-white transform transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"NEW"}),e.jsxs("div",{className:"flex items-center gap-4 text-left",children:[e.jsx("div",{className:"text-3xl",children:"🏪"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 font-['Poppins']",children:"Join as Retailer"}),e.jsx("p",{className:"text-sm text-white/90 font-['Inter']",children:"Apply to sell on SPIRAL"})]})]})]})})]})]})}),e.jsx("section",{className:"section-modern bg-gradient-to-br from-[var(--spiral-cream)] to-white border-b border-gray-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(tm,{})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-[var(--spiral-navy)] mb-4",children:"Find Your Local Mall"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Discover shopping centers and stores near you"})]}),e.jsx(nc,{className:"max-w-2xl mx-auto"})]})]})})}),e.jsx("section",{className:"section-modern bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"Shop by Category"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Discover local products across all categories"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-6",children:om.map(x=>e.jsx(T,{to:`/products?category=${x.name.toLowerCase().replace(" ","-")}`,className:"group",children:e.jsxs("div",{className:"flex flex-col items-center p-6 rounded-full bg-gradient-to-br hover:scale-105 transition-all duration-300 cursor-pointer shadow-md hover:shadow-lg",children:[e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${x.color} flex items-center justify-center text-2xl mb-3 group-hover:scale-110 transition-transform`,children:e.jsx("span",{children:x.icon})}),e.jsx("span",{className:"text-sm font-medium text-[var(--spiral-navy)] text-center group-hover:text-[var(--spiral-coral)] transition-colors",children:x.name})]})},x.name))})]})}),e.jsx("section",{className:"section-modern bg-gradient-to-br from-purple-50 to-blue-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"Shop Together, Save Together"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Invite friends for group shopping experiences with AI-powered coordination"})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(bm,{shopperId:"demo-shopper-001",location:"Minneapolis Shopping District",className:"shadow-lg"})})]})}),e.jsx("section",{className:"section-modern bg-[var(--spiral-cream)]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(cm,{context:"homepage",title:"AI-Powered Recommendations for You",limit:5,showReason:!0,className:"mb-16"})})}),e.jsx("section",{className:"section-modern bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"Featured Local Finds"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Discover amazing products from local businesses near you"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12",children:nm.slice(0,8).map(x=>e.jsxs("div",{className:"card-product group",children:[e.jsx("div",{className:"aspect-square overflow-hidden",children:e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs px-3 py-1 bg-[var(--spiral-coral)]/10 text-[var(--spiral-coral)] rounded-full font-medium",children:x.category}),e.jsxs("div",{className:"flex items-center text-yellow-400",children:["★".repeat(Math.floor(x.rating)),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",x.rating,")"]})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--spiral-navy)] mb-2 group-hover:text-[var(--spiral-coral)] transition-colors line-clamp-2",children:x.name}),e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:x.store}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:x.location}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:["$",x.price]}),e.jsx("div",{className:"flex items-center text-[var(--spiral-coral)] bg-[var(--spiral-coral)]/10 px-2 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-semibold",children:["+",x.spiralsEarned," SPIRALs"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:x.fulfillment.map(F=>e.jsx("span",{className:"text-xs px-2 py-1 bg-[var(--spiral-sage)]/15 text-[var(--spiral-sage)] rounded-md font-medium",children:F},F))}),e.jsx(I,{className:"w-full button-primary",children:"Add to Cart"})]})]},x.id))}),e.jsx("div",{className:"text-center",children:e.jsx(T,{to:"/products",children:e.jsx(I,{className:"button-secondary px-8 py-4 text-lg",children:"View All Products"})})})]})}),e.jsx("section",{className:"section-modern bg-[var(--spiral-cream)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"Featured Malls"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Discover local shopping destinations with the best stores and experiences"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[{name:"Downtown Plaza",location:"Downtown District",stores:45,image:"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300",featured:"Fashion & Electronics",href:"/mall/downtown-plaza"},{name:"Riverside Shopping Center",location:"Riverside Area",stores:32,image:"https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300",featured:"Home & Lifestyle",href:"/mall/riverside-center"},{name:"Heritage Square Mall",location:"Historic Quarter",stores:28,image:"https://images.unsplash.com/photo-1519567241046-7f570eee3ce6?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300",featured:"Local Artisans & Food",href:"/mall/heritage-square"}].map((x,F)=>e.jsx(T,{href:x.href,className:"group",children:e.jsxs("div",{className:"card-modern overflow-hidden",children:[e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--spiral-navy)] mb-2 group-hover:text-[var(--spiral-coral)] transition-colors",children:x.name}),e.jsx("p",{className:"text-gray-600 mb-2",children:x.location}),e.jsxs("p",{className:"text-sm text-[var(--spiral-coral)] font-medium mb-3",children:[x.stores," stores • ",x.featured]}),e.jsx(I,{className:"w-full button-secondary",children:"Explore Mall"})]})]})},F))}),e.jsx("div",{className:"text-center",children:e.jsx(T,{to:"/mall-directory",children:e.jsx(I,{className:"button-secondary px-8 py-4 text-lg",children:"View All Malls"})})})]})}),e.jsx("section",{className:"section-modern bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"Local Picks"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Handpicked favorites from your neighborhood stores"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[{name:"Artisan Coffee Roast",price:28.99,image:"https://images.unsplash.com/photo-1559056199-641a0ac8b55e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300",store:"Local Roasters Co.",category:"Featured",spiralsEarned:15,badge:"Staff Pick"},{name:"Handwoven Scarf",price:42.5,image:"https://images.unsplash.com/photo-1519810409259-73e5a5c00adf?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300",store:"Artisan Threads",category:"Featured",spiralsEarned:20,badge:"Local Favorite"},{name:"Organic Honey Set",price:18.99,image:"https://images.unsplash.com/photo-1587049352846-4a222e784d38?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300",store:"Valley Bee Farm",category:"Featured",spiralsEarned:10,badge:"Best Value"},{name:"Ceramic Plant Pot",price:24.99,image:"https://images.unsplash.com/photo-1485955900006-10f4d324d411?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=300",store:"Garden Studio",category:"Featured",spiralsEarned:12,badge:"Trending"}].map((x,F)=>e.jsxs("div",{className:"card-product group",children:[e.jsxs("div",{className:"aspect-square overflow-hidden relative",children:[e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"text-xs px-3 py-1 bg-[var(--spiral-gold)] text-white rounded-full font-medium",children:x.badge})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-[var(--spiral-navy)] mb-2 group-hover:text-[var(--spiral-coral)] transition-colors line-clamp-2",children:x.name}),e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:x.store}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:["$",x.price]}),e.jsx("div",{className:"flex items-center text-[var(--spiral-coral)] bg-[var(--spiral-coral)]/10 px-2 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-semibold",children:["+",x.spiralsEarned," SPIRALs"]})})]}),e.jsx(I,{className:"w-full button-primary",children:"Add to Cart"})]})]},F))}),e.jsx("div",{className:"text-center",children:e.jsx(T,{to:"/products?category=featured",children:e.jsx(I,{className:"button-secondary px-8 py-4 text-lg",children:"View All Local Picks"})})})]})}),e.jsx("section",{className:"section-modern bg-[var(--spiral-cream)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"SPIRAL Stories"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Real experiences from our community of local shoppers"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[{name:"Sarah M.",location:"Downtown",story:"Found the most amazing handmade jewelry at Artisan Corner. The owner even customized a piece for my anniversary!",image:"https://images.unsplash.com/photo-1494790108755-2616b612b1e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150",badge:"SPIRAL Spotlight",spiralsEarned:45,store:"Artisan Corner"},{name:"Mike R.",location:"Riverside",story:"The coffee at Local Roasters is incredible! Plus I love earning SPIRALs while supporting my neighborhood cafe.",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150",badge:"Trending Story",spiralsEarned:32,store:"Local Roasters Co."},{name:"Emma L.",location:"Heritage Quarter",story:"Heritage Market has the freshest produce! Shopping local has never felt so rewarding with SPIRAL points.",image:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150",badge:"Community Favorite",spiralsEarned:28,store:"Heritage Market"}].map((x,F)=>e.jsx("div",{className:"card-modern group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:x.image,alt:x.name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--spiral-navy)]",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500",children:x.location})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("span",{className:"text-xs px-2 py-1 bg-[var(--spiral-gold)] text-white rounded-full font-medium",children:x.badge})})]}),e.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',x.story,'"']}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-[var(--spiral-coral)]",children:x.store}),e.jsx("div",{className:"flex items-center text-[var(--spiral-coral)] bg-[var(--spiral-coral)]/10 px-2 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-semibold",children:["+",x.spiralsEarned," SPIRALs"]})})]})]})},F))}),e.jsx("div",{className:"text-center",children:e.jsx(I,{className:"button-primary px-8 py-4 text-lg",onClick:()=>t(!0),children:"Share My SPIRAL Story"})})]})}),e.jsx("section",{className:"section-modern bg-[var(--spiral-cream)]",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-[var(--spiral-navy)] mb-6",children:"What Local Retailers Say"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Hear from business owners who've joined the SPIRAL community"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[{quote:"SPIRAL has brought so many new customers to our store. The community engagement is incredible, and we love seeing families discover our handmade products.",name:"Maria Rodriguez",title:"Owner",business:"Artisan Corner",location:"Downtown District",logo:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",spiralsBusiness:"2,450 SPIRALs given to customers"},{quote:"The SPIRAL loyalty program helps us compete with big chains while keeping our neighborhood charm. Our regular customers love earning points!",name:"David Chen",title:"Co-founder",business:"Local Roasters Co.",location:"Riverside Area",logo:"https://images.unsplash.com/photo-1559056199-641a0ac8b55e?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100",spiralsBusiness:"1,890 SPIRALs given to customers"}].map((x,F)=>e.jsx("div",{className:"card-modern bg-white",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"text-4xl text-[var(--spiral-coral)] mb-4",children:'"'}),e.jsx("p",{className:"text-lg text-gray-700 mb-6 italic",children:x.quote}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:x.logo,alt:x.business,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)]",children:x.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.title,", ",x.business]}),e.jsx("p",{className:"text-xs text-gray-500",children:x.location}),e.jsx("p",{className:"text-xs text-[var(--spiral-coral)] font-medium mt-1",children:x.spiralsBusiness})]})]})]})},F))})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[var(--spiral-coral)] to-[var(--spiral-gold)] rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-all duration-300 shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"⭐"})}),e.jsx("h3",{className:"text-2xl font-bold text-[var(--spiral-navy)] mb-4",children:"Earn SPIRALs"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Collect reward points with every purchase from local businesses. The more you shop local, the more you earn."})]}),e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[var(--spiral-sage)] to-[var(--spiral-navy)] rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-all duration-300 shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"🏪"})}),e.jsx("h3",{className:"text-2xl font-bold text-[var(--spiral-navy)] mb-4",children:"Find Stores"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Discover amazing local businesses in your neighborhood. From cafes to boutiques, find everything nearby."})]}),e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-[var(--spiral-navy)] to-[var(--spiral-coral)] rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-all duration-300 shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"🎁"})}),e.jsx("h3",{className:"text-2xl font-bold text-[var(--spiral-navy)] mb-4",children:"Local Perks"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Unlock exclusive deals, early access to sales, and special experiences available only to SPIRAL members."})]})]})})}),e.jsx("section",{className:"py-20 bg-[var(--spiral-cream)]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-6",children:"💫"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[var(--spiral-navy)] mb-8",children:"Introducing SPIRAL Rewards"}),e.jsx("p",{className:"text-xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-12",children:"Earn SPIRALs when you shop in-store or online with SPIRAL. Redeem SPIRALs for exclusive perks, discounts, and mall rewards."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[var(--spiral-coral)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"🛒"})}),e.jsx("h3",{className:"text-xl font-bold text-[var(--spiral-navy)] mb-2",children:"Shop & Earn"}),e.jsx("p",{className:"text-gray-600",children:"Collect SPIRALs with every purchase"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[var(--spiral-gold)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"🎁"})}),e.jsx("h3",{className:"text-xl font-bold text-[var(--spiral-navy)] mb-2",children:"Unlock Rewards"}),e.jsx("p",{className:"text-gray-600",children:"Redeem for discounts and exclusive offers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[var(--spiral-sage)]/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"⭐"})}),e.jsx("h3",{className:"text-xl font-bold text-[var(--spiral-navy)] mb-2",children:"VIP Perks"}),e.jsx("p",{className:"text-gray-600",children:"Early access to sales and special events"})]})]})]})})}),e.jsx("section",{className:"py-24 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-12",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6 font-['Poppins']",children:d?`Stores in ${d}`:"Featured Local Stores"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed font-['Inter']",children:d?`Discover unique businesses in ZIP code ${d}`:"Discover unique businesses in your neighborhood and support local entrepreneurs."})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"verifiedToggle",type:"checkbox",checked:c,onChange:()=>m(!c),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"}),e.jsxs("label",{htmlFor:"verifiedToggle",className:"ml-2 text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx("span",{children:"🛡️"}),"Show only SPIRAL Verified Stores"]})]}),c&&e.jsx("div",{className:"text-sm text-green-600 bg-green-50 px-3 py-1 rounded-full",children:"Showing verified businesses only"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:j&&j.length>0&&e.jsx(e.Fragment,{children:c?`${j.filter(x=>x.isVerified).length} verified stores`:`${j.length} total stores`})})]}),A?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:[...Array(6)].map((x,F)=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(H,{className:"h-52 w-full rounded-xl"}),e.jsx(H,{className:"h-4 w-3/4"}),e.jsx(H,{className:"h-4 w-1/2"}),e.jsx(H,{className:"h-10 w-full"})]},F))}):P?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load stores. Please try again."}),e.jsx(I,{onClick:()=>window.location.reload(),children:"Retry"})]}):!Array.isArray(j)||j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:d?`No stores found in ZIP code ${d}. Try a different ZIP code.`:"No stores available at the moment."}),d&&e.jsx(I,{onClick:()=>{u(""),i("")},children:"View All Stores"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",children:(Array.isArray(j)?c?j.filter(x=>x.isVerified):j:[]).map(x=>e.jsx(cc,{store:x},x.id))}),Array.isArray(j)&&j.length>=6&&e.jsx("div",{className:"text-center mt-16",children:e.jsx(I,{onClick:E,className:"bg-[hsl(183,100%,23%)] hover:bg-[hsl(183,60%,40%)] text-white px-8 py-4 rounded-full font-semibold shadow-lg transition-all duration-300",children:"Load More Stores"})})]})]})}),e.jsx(Yu,{}),e.jsx(em,{}),e.jsx(zn,{}),e.jsx(dm,{isOpen:v,onClose:w}),e.jsx(oc,{isOpen:r,onClose:()=>t(!1)}),e.jsx(dc,{}),e.jsx(rm,{}),e.jsx(am,{}),e.jsx(im,{}),e.jsx(lm,{})]})})}export{_p as default};
