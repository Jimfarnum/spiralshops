import{c as B,r as u,u as K,U as H,j as e,B as j,C as c,a as o,b as d,d as m,e as x,F as J,J as Q,K as v,M as N,q as y,s as P,f as V}from"./index-sTi6BLPu.js";import{P as D}from"./progress-Cf362TSq.js";import{S as $,a as Z,b as X,c as z,d as b}from"./select-U2_IWgob.js";import{u as E}from"./useQuery-4av79AcX.js";import{u as g}from"./useMutation-DaiJly-X.js";import{R as G}from"./rocket-45aKcxBS.js";import{Z as W}from"./zap-1vep6Tn5.js";import{A}from"./activity-_qjqvmcS.js";import{P as Y}from"./play-iEIZvRqg.js";import{S as _}from"./square-C0TPHeSi.js";import{T as ee}from"./trending-up-CRcGIWQN.js";import{C as O}from"./chart-column-DFfP8Ytq.js";import{T as se}from"./target-fQiuIzjo.js";import{U as te}from"./users-n91sDYUr.js";import{C as I}from"./circle-x-WVieisiF.js";import"./index-BdQq_4o_.js";import"./chevron-down-BDj7HIg7.js";import"./check-Cok4To_4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=B("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);function be(){const[h,q]=u.useState("investor"),[i,n]=u.useState(!1),[w,L]=u.useState([]),{toast:l}=K();H();const{data:r,refetch:p}=E({queryKey:["/api/function-agent/status"],queryFn:async()=>{const s=await fetch("/api/function-agent/status");if(!s.ok)throw new Error("Failed to get status");return(await s.json()).data},refetchInterval:i?1e3:!1}),{data:t,refetch:f}=E({queryKey:["/api/function-agent/results"],queryFn:async()=>{const s=await fetch("/api/function-agent/results");if(!s.ok)throw new Error("Failed to get results");return s.json()},enabled:!1}),S=g({mutationFn:async s=>{const a=await fetch("/api/function-agent/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:s})});if(!a.ok)throw new Error("Failed to start demonstration");return a.json()},onSuccess:()=>{n(!0),l({title:"Function Agent Started",description:"Platform demonstration is now running"}),p()},onError:s=>{l({title:"Start Failed",description:s.message,variant:"destructive"})}}),M=g({mutationFn:async()=>{const s=await fetch("/api/function-agent/stop",{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to stop demonstration");return s.json()},onSuccess:()=>{n(!1),l({title:"Function Agent Stopped",description:"Platform demonstration has been stopped"}),p(),f()}}),C=g({mutationFn:async()=>{const s=await fetch("/api/function-agent/next",{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to execute next step");return s.json()},onSuccess:s=>{var a,k;s.currentStep&&L(U=>[...U,s.currentStep]),((a=s.progress)==null?void 0:a.completed)===((k=s.progress)==null?void 0:k.total)&&(n(!1),l({title:"Demonstration Complete!",description:`${s.progress.completed} functions tested successfully`}),f()),p()}}),R=g({mutationFn:async s=>{const a=await fetch("/api/function-agent/demo/auto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:s})});if(!a.ok)throw new Error("Failed to run auto demonstration");return a.json()},onSuccess:s=>{n(!1),l({title:"Auto Demo Complete!",description:`${s.summary.successfulSteps} of ${s.summary.totalSteps} functions passed`}),p(),f()},onError:s=>{l({title:"Auto Demo Failed",description:s.message,variant:"destructive"}),n(!1)}}),T=s=>{switch(s){case"SUCCESS":return"bg-green-100 text-green-800";case"FAILED":return"bg-red-100 text-red-800";case"ERROR":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},F=s=>{switch(s){case"SUCCESS":return e.jsx(P,{className:"h-4 w-4"});case"FAILED":return e.jsx(I,{className:"h-4 w-4"});case"ERROR":return e.jsx(I,{className:"h-4 w-4"});default:return e.jsx(V,{className:"h-4 w-4"})}};return u.useEffect(()=>{r!=null&&r.isActive?n(!0):n(!1)},[r==null?void 0:r.isActive]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(G,{className:"h-8 w-8 text-teal-600"}),"Function Agent Dashboard"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive platform demonstration for investors and stakeholders"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs($,{value:h,onValueChange:q,children:[e.jsx(Z,{className:"w-32",children:e.jsx(X,{})}),e.jsxs(z,{children:[e.jsx(b,{value:"investor",children:"Investor"}),e.jsx(b,{value:"developer",children:"Developer"}),e.jsx(b,{value:"full",children:"Full Demo"})]})]}),e.jsxs(j,{onClick:()=>R.mutate(h),disabled:i||R.isPending,className:"bg-teal-600 hover:bg-teal-700",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Auto Demo"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Control Panel"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{onClick:()=>S.mutate(h),disabled:i||S.isPending,className:"w-full",variant:i?"secondary":"default",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Start Demo (",h,")"]}),e.jsxs(j,{onClick:()=>C.mutate(),disabled:!i||C.isPending,className:"w-full",variant:"outline",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Next Step"]}),e.jsxs(j,{onClick:()=>M.mutate(),disabled:!i,className:"w-full",variant:"destructive",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Stop Demo"]})]}),r&&e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Status:"}),e.jsx(x,{variant:r.isActive?"default":"secondary",children:r.isActive?"Running":"Stopped"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Mode:"}),e.jsx("span",{className:"font-medium",children:r.mode})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[r.currentStep,"/",r.totalSteps]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Progress"]})}),e.jsx(m,{children:r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[r.progress,"%"]})]}),e.jsx(D,{value:r.progress,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.currentStep}),e.jsx("div",{className:"text-xs text-blue-600",children:"Current Step"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.totalSteps}),e.jsx("div",{className:"text-xs text-green-600",children:"Total Steps"})]})]}),r.uptime>0&&e.jsx("div",{className:"text-center p-2 bg-gray-50 rounded",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Runtime: ",Math.round(r.uptime),"s"]})})]})})]}),e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Quick Stats"]})}),e.jsxs(m,{children:[(t==null?void 0:t.summary)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Success Rate:"}),e.jsx(x,{className:"bg-green-100 text-green-800",children:t.summary.successRate})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Functions Tested:"}),e.jsx("span",{className:"font-medium",children:t.summary.totalSteps})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:t.summary.duration})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Failed:"}),e.jsx("span",{className:"font-medium text-red-600",children:t.summary.failedSteps})]})]}),!(t!=null&&t.summary)&&e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(se,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No results yet"}),e.jsx("p",{className:"text-xs",children:"Run a demonstration to see stats"})]})]})]})]}),e.jsxs(J,{defaultValue:"live",className:"space-y-6",children:[e.jsxs(Q,{className:"grid w-full grid-cols-3",children:[e.jsx(v,{value:"live",children:"Live Progress"}),e.jsx(v,{value:"results",children:"Test Results"}),e.jsx(v,{value:"report",children:"Investor Report"})]}),e.jsx(N,{value:"live",className:"space-y-6",children:e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Live Function Testing"}),e.jsx(y,{children:"Real-time view of function execution and results"})]}),e.jsx(m,{children:w.length>0?e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:w.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F(s.status),e.jsx(x,{className:T(s.status),children:s.status})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:s.responseTime}),e.jsx("div",{className:"text-xs text-gray-500",children:s.method})]})]},a))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Start a demonstration to see live progress"})]})})]})}),e.jsx(N,{value:"results",children:e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Detailed Test Results"}),e.jsx(y,{children:"Complete breakdown of all function tests"})]}),e.jsx(m,{children:t!=null&&t.results&&t.results.length>0?e.jsx("div",{className:"space-y-4",children:t.results.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium",children:["Step ",s.step]}),e.jsxs(x,{className:T(s.status),children:[F(s.status),s.status]}),e.jsx(x,{variant:"outline",children:s.category})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.responseTime," • ",s.method]})]}),e.jsx("h4",{className:"font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e.jsx("code",{children:s.endpoint})}),s.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 text-sm text-red-800",children:s.error})]},a))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(O,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No test results available"}),e.jsx("p",{className:"text-sm",children:"Complete a demonstration to see detailed results"})]})})]})}),e.jsx(N,{value:"report",children:e.jsxs(c,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Investor Report"}),e.jsx(y,{children:"Comprehensive platform overview for stakeholders"})]}),e.jsx(m,{children:t!=null&&t.investorReport?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Platform Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.investorReport.platformOverview.totalFunctionsTested}),e.jsx("div",{className:"text-sm text-blue-600",children:"Functions Tested"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.investorReport.platformOverview.overallSuccessRate}),e.jsx("div",{className:"text-sm text-green-600",children:"Success Rate"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.investorReport.platformOverview.categoriesCovered}),e.jsx("div",{className:"text-sm text-purple-600",children:"Categories"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Key Platform Highlights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.investorReport.keyHighlights.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx(P,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:s})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Category Performance"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.investorReport.categoryBreakdown).map(([s,a])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"outline",children:[a.successful,"/",a.total," passed"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Avg: ",a.avgResponseTime]})]})]}),e.jsx(D,{value:a.successful/a.total*100,className:"h-2"})]},s))})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(te,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No investor report available"}),e.jsx("p",{className:"text-sm",children:"Complete a demonstration to generate the report"})]})})]})})]})]})]})}export{be as default};
