import{u as B,r as u,j as e,e as p,B as f,C as r,d as o,a as q,b as R,N as D,q as U,o as v,t as N,I as S,f as z,P as F,s as H}from"./index-sTi6BLPu.js";import{M as y}from"./mail-DqqPECWJ.js";import{S as C}from"./smartphone-CbteIkmi.js";import{T as O}from"./triangle-alert-CgctdoVb.js";import{C as Z}from"./circle-x-WVieisiF.js";function Y(){const{toast:g}=B(),[n,m]=u.useState([{id:"1",productId:"prod-123",productName:"Artisan Leather Wallet",currentStock:2,lowStockThreshold:5,isOutOfStock:!1,alertEnabled:!0,alertMethods:["browser","email"],lastChecked:"2025-01-22T11:30:00Z",imageUrl:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=100&h=100&fit=crop",storeId:"store-1",storeName:"Local Artisan Goods"},{id:"2",productId:"prod-456",productName:"Organic Coffee Blend",currentStock:0,lowStockThreshold:10,isOutOfStock:!0,alertEnabled:!0,alertMethods:["browser","email","sms"],lastChecked:"2025-01-22T11:25:00Z",imageUrl:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=100&h=100&fit=crop",storeId:"store-2",storeName:"Heritage Roasters"},{id:"3",productId:"prod-789",productName:"Hand-Painted Ceramic Mug",currentStock:8,lowStockThreshold:3,isOutOfStock:!1,alertEnabled:!1,alertMethods:["browser"],lastChecked:"2025-01-22T11:32:00Z",imageUrl:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=100&h=100&fit=crop",storeId:"store-3",storeName:"Clay & Co Pottery"}]),[d,x]=u.useState({browserEnabled:!0,emailEnabled:!0,smsEnabled:!1,checkFrequency:15}),[i,k]=u.useState(!0);u.useEffect(()=>{if(!i)return;const s=setInterval(()=>{m(a=>a.map(t=>{const c=Math.floor(Math.random()*3)-1,l=Math.max(0,t.currentStock+c),w=t.isOutOfStock,h=l===0,$=l>0&&l<=t.lowStockThreshold;return t.alertEnabled&&(!w&&h?j(t,"out_of_stock"):w&&!h?j(t,"back_in_stock"):!t.isOutOfStock&&!h&&$&&t.currentStock>t.lowStockThreshold&&j(t,"low_stock")),{...t,currentStock:l,isOutOfStock:h,lastChecked:new Date().toISOString()}}))},3e4);return()=>clearInterval(s)},[i]);const j=(s,a)=>{if(!s.alertEnabled)return;const t={out_of_stock:`${s.productName} is now out of stock at ${s.storeName}`,back_in_stock:`${s.productName} is back in stock at ${s.storeName}!`,low_stock:`${s.productName} is running low (${s.currentStock} left) at ${s.storeName}`},c={out_of_stock:"destructive",back_in_stock:"default",low_stock:"default"};s.alertMethods.includes("browser")&&d.browserEnabled&&(g({title:a==="back_in_stock"?"Back in Stock!":a==="low_stock"?"Low Stock Alert":"Out of Stock",description:t[a],variant:c[a],duration:5e3}),"Notification"in window&&Notification.permission==="granted"&&new Notification(`SPIRAL - ${a.replace("_"," ").toUpperCase()}`,{body:t[a],icon:s.imageUrl}))},M=(s,a)=>{m(t=>t.map(c=>c.id===s?{...c,alertEnabled:a}:c)),g({title:a?"Alert Enabled":"Alert Disabled",description:`Inventory monitoring ${a?"enabled":"disabled"} for this item`,duration:3e3})},E=(s,a)=>{m(t=>t.map(c=>c.id===s?{...c,alertMethods:a}:c))},A=(s,a)=>{m(t=>t.map(c=>c.id===s?{...c,lowStockThreshold:a}:c))},b=async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&g({title:"Notifications Enabled",description:"You'll now receive browser notifications for inventory alerts",duration:3e3})},I=s=>s.isOutOfStock?{status:"Out of Stock",color:"bg-red-100 text-red-800",icon:e.jsx(Z,{className:"h-3 w-3"})}:s.currentStock<=s.lowStockThreshold?{status:"Low Stock",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(O,{className:"h-3 w-3"})}:{status:"In Stock",color:"bg-green-100 text-green-800",icon:e.jsx(H,{className:"h-3 w-3"})},T=s=>{const a=new Date(s),c=Math.floor((new Date().getTime()-a.getTime())/(1e3*60));return c<1?"Just now":c<60?`${c}m ago`:c<1440?`${Math.floor(c/60)}h ago`:a.toLocaleDateString()},_=n.filter(s=>s.alertEnabled),P=n.filter(s=>s.isOutOfStock&&s.alertEnabled),L=n.filter(s=>!s.isOutOfStock&&s.currentStock<=s.lowStockThreshold&&s.alertEnabled);return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-[var(--spiral-navy)]",children:"Inventory Alerts"}),e.jsx("p",{className:"text-gray-600",children:"Real-time monitoring of your watched products"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:i?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:i?"Monitoring Active":"Monitoring Paused"}),e.jsx(f,{onClick:()=>k(!i),variant:i?"outline":"default",size:"sm",children:i?"Pause":"Resume"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(r,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:n.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Watched Items"})]})}),e.jsx(r,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Alerts"})]})}),e.jsx(r,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:P.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]})}),e.jsx(r,{children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:L.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock"})]})})]}),e.jsxs(r,{className:"mb-8",children:[e.jsxs(q,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-[var(--spiral-coral)]"}),"Alert Preferences"]}),e.jsx(U,{children:"Configure how you receive inventory notifications"})]}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)]",children:"Notification Methods"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Browser Notifications"})]}),e.jsx(N,{checked:d.browserEnabled,onCheckedChange:s=>{x(a=>({...a,browserEnabled:s})),s&&b()}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Email Alerts"})]}),e.jsx(N,{checked:d.emailEnabled,onCheckedChange:s=>x(a=>({...a,emailEnabled:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"SMS Alerts"})]}),e.jsx(N,{checked:d.smsEnabled,onCheckedChange:s=>x(a=>({...a,smsEnabled:s}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)]",children:"Monitoring Frequency"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Check every (minutes)"}),e.jsx(S,{type:"number",min:"1",max:"60",value:d.checkFrequency,onChange:s=>x(a=>({...a,checkFrequency:parseInt(s.target.value)||15})),className:"w-24"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Real-time monitoring for critical alerts"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-[var(--spiral-navy)]",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{onClick:b,variant:"outline",size:"sm",className:"w-full",children:"Enable Browser Notifications"}),e.jsx(f,{onClick:()=>k(!i),variant:"outline",size:"sm",className:"w-full",children:i?"Pause All Monitoring":"Resume All Monitoring"})]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[n.map(s=>{const a=I(s);return e.jsx(r,{className:s.isOutOfStock?"border-red-200 bg-red-50":s.currentStock<=s.lowStockThreshold?"border-yellow-200 bg-yellow-50":"",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:s.imageUrl,alt:s.productName,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--spiral-navy)] mb-1",children:s.productName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.storeName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{className:a.color,children:[a.icon,e.jsx("span",{className:"ml-1",children:a.status})]}),e.jsx(N,{checked:s.alertEnabled,onCheckedChange:t=>M(s.id,t)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),e.jsxs("div",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:[s.currentStock,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"units"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Low Stock Threshold"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{type:"number",min:"0",value:s.lowStockThreshold,onChange:t=>A(s.id,parseInt(t.target.value)||0),className:"w-20 h-8 text-sm",disabled:!s.alertEnabled}),e.jsx("span",{className:"text-sm text-gray-500",children:"units"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Alert Methods"}),e.jsx("div",{className:"flex gap-2",children:["browser","email","sms"].map(t=>e.jsxs(f,{onClick:()=>{const c=s.alertMethods.includes(t)?s.alertMethods.filter(l=>l!==t):[...s.alertMethods,t];E(s.id,c)},variant:s.alertMethods.includes(t)?"default":"outline",size:"sm",className:"h-8 px-2 text-xs",disabled:!s.alertEnabled,children:[t==="browser"&&e.jsx(v,{className:"h-3 w-3"}),t==="email"&&e.jsx(y,{className:"h-3 w-3"}),t==="sms"&&e.jsx(C,{className:"h-3 w-3"}),e.jsx("span",{className:"ml-1 capitalize",children:t})]},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last checked ",T(s.lastChecked)]})]}),s.isOutOfStock&&e.jsxs(p,{className:"bg-red-100 text-red-800",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Action Required"]})]})]})]})})},s.id)}),n.length===0&&e.jsx(r,{children:e.jsxs(o,{className:"text-center py-12",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Items Being Monitored"}),e.jsx("p",{className:"text-gray-500",children:"Add items to your wishlist to start monitoring their inventory levels!"})]})})]})]})}export{Y as I};
