import{c as Y,u as M,U as J,r as h,j as e,C as j,a as k,b as $,B as i,X as K,d as v,s as re,q as Z,e as L,I as Q,p as ie,S as R,n as X,P as O,x as le,L as H,m as ne,H as ce}from"./index-sTi6BLPu.js";import{S as G,a as _,b as ee,c as se,d as T}from"./select-U2_IWgob.js";import{H as U}from"./header-DCxgILpP.js";import{u as z}from"./useQuery-4av79AcX.js";import{u as W}from"./useMutation-DaiJly-X.js";import{P as oe}from"./progress-Cf362TSq.js";import{T as de}from"./textarea-DwFaTdzp.js";import{A as D,a as V}from"./alert-BVbwNNU_.js";import{S as A}from"./shield-DYGAM3k4.js";import{U as me}from"./upload-BkvHDh3T.js";import{F as he}from"./filter-DY8H5kjh.js";import{U as xe}from"./user-DzNM48-o.js";import{C as pe}from"./calendar-CZXggfH7.js";import{C as ue}from"./chevron-down-BDj7HIg7.js";import{I as ge}from"./image-DR1GDgjR.js";import{F as je}from"./flag-DV31KCjT.js";import{S as ae}from"./shopping-cart-DjSog6GS.js";import{Z as ve}from"./zap-1vep6Tn5.js";import{A as fe}from"./arrow-left-DtuWXA6b.js";import{M as Ne}from"./minus-CE-EuZ5a.js";import{P as ye}from"./plus-BZ4McPqT.js";import{T as we}from"./truck-CNzMFiRQ.js";import{S as be}from"./store-fvM_Wsk5.js";import{M as Se}from"./map-pin-DZnENn3K.js";import"./index-BdQq_4o_.js";import"./check-Cok4To_4.js";import"./authStore-CZi0z4It.js";import"./house-CU825Ekn.js";import"./building-2-CmMn_uHF.js";import"./users-n91sDYUr.js";import"./phone-BLNZn_t1.js";import"./shopping-bag-B6bbBeT-.js";import"./rocket-45aKcxBS.js";import"./activity-_qjqvmcS.js";import"./search-BDvTlR0f.js";import"./credit-card-B1A0ZWNg.js";import"./globe-xPv-iFng.js";import"./eye-BfDIBTgL.js";import"./wallet-CrGmaB25.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=Y("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Y("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function Re({productId:m,productName:S,canReview:a,hasPurchased:C,hasExistingReview:f,isVerifiedPurchase:P,onClose:o,onSubmitSuccess:u}){const{toast:p}=M(),w=J(),[t,l]=h.useState(0),[g,c]=h.useState(0),[b,F]=h.useState(""),[N,E]=h.useState(""),[n,r]=h.useState(""),s=W({mutationFn:async x=>{const B=await fetch(`/api/products/${m}/reviews`,{method:"POST",headers:{"Content-Type":"application/json","user-id":"1"},body:JSON.stringify(x)});if(!B.ok){const I=await B.json();throw new Error(I.error||"Failed to submit review")}return B.json()},onSuccess:()=>{p({title:"Review Submitted!",description:"Thank you for sharing your experience with other shoppers.",variant:"default"}),w.invalidateQueries({queryKey:[`/api/products/${m}/reviews`]}),w.invalidateQueries({queryKey:[`/api/products/${m}/rating-stats`]}),u()},onError:x=>{p({title:"Submission Failed",description:x.message||"Failed to submit review",variant:"destructive"})}}),d=x=>{if(x.preventDefault(),t===0){p({title:"Rating Required",description:"Please select a star rating before submitting.",variant:"destructive"});return}s.mutate({rating:t,title:b.trim()||null,comment:N.trim()||null,photoUrl:n.trim()||null})},y=({value:x,onRate:B,onHover:I,onLeave:te})=>e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(q=>e.jsx("button",{type:"button",onClick:()=>B(q),onMouseEnter:()=>I(q),onMouseLeave:te,className:"p-1 transition-colors",children:e.jsx(R,{className:`h-6 w-6 ${q<=(g||x)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},q)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:t>0?`${t} star${t!==1?"s":""}`:"Select rating"})]});return a?e.jsxs(j,{className:"w-full max-w-lg mx-auto",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:"Write a Review"}),e.jsx(Z,{children:S})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(K,{className:"h-4 w-4"})})]}),P&&e.jsxs(L,{className:"w-fit bg-green-100 text-green-800 border-green-200",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Verified Purchase"]})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(y,{value:t,onRate:l,onHover:c,onLeave:()=>c(0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Review Title (Optional)"}),e.jsx(Q,{value:b,onChange:x=>F(x.target.value),placeholder:"Summarize your experience...",maxLength:100}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/100 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Your Review (Optional)"}),e.jsx(de,{value:N,onChange:x=>E(x.target.value),placeholder:"Share details about your experience with this product...",rows:4,maxLength:1e3}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[N.length,"/1000 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Photo URL (Optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{type:"url",value:n,onChange:x=>r(x.target.value),placeholder:"https://example.com/photo.jpg"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Add a photo to help other shoppers see the product in use"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(i,{type:"submit",disabled:t===0||s.isPending,className:"flex-1",children:s.isPending?"Submitting...":"Submit Review"}),e.jsx(i,{type:"button",variant:"outline",onClick:o,children:"Cancel"})]}),e.jsxs(D,{children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx(V,{className:"text-xs",children:"Reviews should be honest, helpful, and respectful. Reviews that violate our community guidelines may be removed."})]})]})})]}):e.jsxs(j,{className:"w-full max-w-lg mx-auto",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"text-lg",children:"Write a Review"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(K,{className:"h-4 w-4"})})]})}),e.jsxs(v,{className:"space-y-4",children:[!C&&e.jsxs(D,{children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx(V,{children:"You can only review products you have purchased. This helps ensure authentic, verified reviews for other shoppers."})]}),f&&e.jsxs(D,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx(V,{children:"You have already reviewed this product. Each customer can only submit one review per product."})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(i,{variant:"outline",onClick:o,children:"Close"})})]})]})}function ke({productId:m,productName:S}){const{toast:a}=M(),C=J(),[f,P]=h.useState("newest"),[o,u]=h.useState(!1),[p,w]=h.useState(new Set),{data:t}=z({queryKey:[`/api/products/${m}/can-review`],queryFn:async()=>(await fetch(`/api/products/${m}/can-review`,{headers:{"user-id":"1"}})).json()}),{data:l,isLoading:g}=z({queryKey:[`/api/products/${m}/reviews`,f],queryFn:async()=>(await fetch(`/api/products/${m}/reviews?sort=${f}&limit=20`)).json()}),{data:c}=z({queryKey:[`/api/products/${m}/rating-stats`],queryFn:async()=>(await fetch(`/api/products/${m}/rating-stats`)).json()}),b=W({mutationFn:async({reviewId:s,isHelpful:d})=>(await fetch(`/api/reviews/${s}/helpful`,{method:"POST",headers:{"Content-Type":"application/json","user-id":"1"},body:JSON.stringify({isHelpful:d})})).json(),onSuccess:()=>{C.invalidateQueries({queryKey:[`/api/products/${m}/reviews`]}),a({title:"Thanks for your feedback!",description:"Your vote helps other shoppers find the most helpful reviews."})}}),F=W({mutationFn:async({reviewId:s,reason:d})=>(await fetch(`/api/reviews/${s}/report`,{method:"POST",headers:{"Content-Type":"application/json","user-id":"1"},body:JSON.stringify({reason:d,description:"Reported by user"})})).json(),onSuccess:()=>{a({title:"Review Reported",description:"Thank you for helping maintain review quality. Our team will review this shortly."})}}),N=({rating:s,showNumber:d=!0})=>e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(y=>e.jsx(R,{className:`h-4 w-4 ${y<=s?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},y)),d&&e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:s.toFixed(1)})]}),E=s=>{const d=new Set(p);d.has(s)?d.delete(s):d.add(s),w(d)},n=c==null?void 0:c.stats,r=(l==null?void 0:l.reviews)||[];return g?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"})]}):e.jsxs("div",{className:"space-y-6",children:[n&&n.totalReviews>0&&e.jsxs(j,{children:[e.jsx(k,{children:e.jsx($,{className:"text-lg",children:"Customer Reviews"})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl font-bold",children:n.averageRating}),e.jsxs("div",{children:[e.jsx(N,{rating:n.averageRating,showNumber:!1}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Based on ",n.totalReviews," review",n.totalReviews!==1?"s":""]}),n.verifiedPurchaseCount>0&&e.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[e.jsx(A,{className:"h-3 w-3"}),n.verifiedPurchaseCount," verified purchase",n.verifiedPurchaseCount!==1?"s":""]})]})]})}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 w-12",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx(R,{className:"h-3 w-3 text-yellow-400 fill-yellow-400"})]}),e.jsx(oe,{value:n.ratingDistribution[s]/n.totalReviews*100,className:"flex-1 h-2"}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:n.ratingDistribution[s]})]},s))})]})})]}),e.jsx(j,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Share Your Experience"}),e.jsx("p",{className:"text-sm text-gray-600",children:t!=null&&t.canReview?"Tell other shoppers about this product":t!=null&&t.hasExistingReview?"You've already reviewed this product":"Purchase this product to leave a verified review"})]}),e.jsx(i,{onClick:()=>u(!0),disabled:!(t!=null&&t.canReview),className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/80",children:"Write Review"})]})})}),o&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx(Re,{productId:m,productName:S,canReview:t.canReview,hasPurchased:t.hasPurchased,hasExistingReview:t.hasExistingReview,isVerifiedPurchase:t.isVerifiedPurchase,onClose:()=>u(!1),onSubmitSuccess:()=>u(!1)})}),r.length>0&&e.jsxs(j,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{children:["Reviews (",r.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-gray-400"}),e.jsxs(G,{value:f,onValueChange:P,children:[e.jsx(_,{className:"w-48",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(T,{value:"newest",children:"Most Recent"}),e.jsx(T,{value:"oldest",children:"Oldest First"}),e.jsx(T,{value:"highest",children:"Highest Rated"}),e.jsx(T,{value:"lowest",children:"Lowest Rated"}),e.jsx(T,{value:"helpful",children:"Most Helpful"})]})]})]})]})}),e.jsx(v,{className:"space-y-4",children:r.map(s=>{const d=p.has(s.id),y=s.comment&&s.comment.length>200;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[var(--spiral-coral)]/10 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"h-4 w-4 text-[var(--spiral-coral)]"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.user.firstName&&s.user.lastName?`${s.user.firstName} ${s.user.lastName.charAt(0)}.`:"Anonymous User"}),s.isVerifiedPurchase&&e.jsxs(L,{className:"bg-green-100 text-green-800 border-green-200 text-xs",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Verified Purchase"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pe,{className:"h-3 w-3"}),new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx(i,{variant:"ghost",size:"sm",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{rating:s.rating,showNumber:!1}),s.title&&e.jsx("h4",{className:"font-semibold",children:s.title})]}),s.comment&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-700",children:y&&!d?`${s.comment.substring(0,200)}...`:s.comment}),y&&e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>E(s.id),className:"text-[var(--spiral-coral)] p-0 h-auto",children:[d?"Show Less":"Read More",e.jsx(ue,{className:`h-3 w-3 ml-1 transition-transform ${d?"rotate-180":""}`})]})]}),s.photoUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ge,{className:"h-4 w-4"}),"Customer Photo"]}),e.jsx("img",{src:s.photoUrl,alt:"Customer review photo",className:"w-32 h-32 object-cover rounded-lg border"})]}),e.jsx("div",{className:"flex items-center justify-between pt-2 border-t",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>b.mutate({reviewId:s.id,isHelpful:!0}),disabled:b.isPending,className:"text-gray-600 hover:text-green-600",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Helpful (",s.helpfulCount,")"]}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>F.mutate({reviewId:s.id,reason:"inappropriate"}),disabled:F.isPending,className:"text-gray-600 hover:text-red-600",children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"Report"]})]})})]},s.id)})})]}),r.length===0&&e.jsx(j,{children:e.jsxs(v,{className:"text-center py-12",children:[e.jsx(R,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Be the first to share your experience with this product"}),(t==null?void 0:t.canReview)&&e.jsx(i,{onClick:()=>u(!0),className:"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/80",children:"Write the First Review"})]})})]})}function $e({currentProductId:m,currentProductCategory:S}){const{addItem:a}=X(),{toast:C}=M(),[f,P]=h.useState([]),o=[{id:"frequently-bought-1",title:"Frequently Bought Together",description:"Customers who bought this item also purchased:",bundleType:"frequently-bought",products:[{id:101,name:"Coffee Filter Papers",price:8.99,image:"https://images.unsplash.com/photo-1516024851043-bdf063c21bf1?w=100&h=100&fit=crop",store:"Coffee Essentials",rating:4.5,category:"food"},{id:102,name:"Milk Frother",price:19.99,image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=100&h=100&fit=crop",store:"Kitchen Tools Co",rating:4.7,category:"home"}],originalPrice:28.98,bundlePrice:24.99,savings:3.99},{id:"similar-items-1",title:"Similar Items You Might Like",description:"Based on your interests and browsing history:",bundleType:"similar-items",products:[{id:103,name:"Artisan Tea Collection",price:22.5,image:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=100&h=100&fit=crop",store:"Tea & More",rating:4.6,category:"food"},{id:104,name:"Bamboo Coasters Set",price:12.99,image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=100&h=100&fit=crop",store:"Eco Living",rating:4.4,category:"home"}],originalPrice:35.49,bundlePrice:29.99,savings:5.5},{id:"complete-set-1",title:"Complete Coffee Experience",description:"Everything you need for the perfect morning routine:",bundleType:"complete-set",products:[{id:105,name:"Premium Coffee Beans",price:16.99,image:"https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=100&h=100&fit=crop",store:"Local Roasters",rating:4.8,category:"food"},{id:106,name:"Coffee Storage Jar",price:14.99,image:"https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=100&h=100&fit=crop",store:"Storage Solutions",rating:4.3,category:"home"},{id:107,name:"Coffee Measuring Spoon",price:6.99,image:"https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=100&h=100&fit=crop",store:"Kitchen Basics",rating:4.2,category:"home"}],originalPrice:38.97,bundlePrice:32.99,savings:5.98}],u=t=>{t.products.forEach(l=>{a({id:l.id,name:l.name,price:l.price*(t.bundlePrice/t.originalPrice),image:l.image,store:l.store,quantity:1,storeId:`store-${l.id}`,category:l.category})}),C({title:"Bundle added to cart!",description:`Added ${t.products.length} items with $${t.savings.toFixed(2)} savings`}),P(l=>[...l,t.id])},p=t=>{switch(t){case"frequently-bought":return O;case"similar-items":return R;case"complete-set":return ve;default:return O}},w=t=>{switch(t){case"frequently-bought":return"text-blue-600";case"similar-items":return"text-purple-600";case"complete-set":return"text-green-600";default:return"text-gray-600"}};return e.jsx("div",{className:"space-y-6",children:o.map(t=>{const l=p(t.bundleType),g=f.includes(t.id);return e.jsxs(j,{className:`${g?"ring-2 ring-[var(--spiral-coral)] bg-orange-50":""}`,children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(l,{className:`h-5 w-5 ${w(t.bundleType)}`}),t.title]}),e.jsx(Z,{className:"mt-1",children:t.description})]}),e.jsxs(L,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Save $",t.savings.toFixed(2)]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.products.map(c=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-[var(--spiral-navy)] truncate",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500",children:c.store}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(R,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-xs text-gray-600",children:c.rating})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-semibold text-[var(--spiral-navy)]",children:["$",c.price.toFixed(2)]})})]},c.id))}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Individual prices:"}),e.jsxs("span",{className:"text-sm line-through text-gray-500",children:["$",t.originalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-[var(--spiral-navy)]",children:"Bundle price:"}),e.jsxs("span",{className:"text-lg font-bold text-[var(--spiral-coral)]",children:["$",t.bundlePrice.toFixed(2)]})]}),e.jsx(i,{onClick:()=>u(t),disabled:g,className:`w-full ${g?"bg-green-600 hover:bg-green-600":"bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Added to Cart"]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Add Bundle to Cart"]})})]})]})})]},t.id)})})}function us(){var n;const[,m]=le("/product/:id"),{id:S}=m||{},[a,C]=h.useState(null),[f,P]=h.useState(!0),[o,u]=h.useState(1),[p,w]=h.useState(0),[t,l]=h.useState("ship-to-me"),{addItem:g}=X(),{toast:c}=M();h.useEffect(()=>{setTimeout(()=>{C({id:S||"1",name:"Premium Wireless Headphones",price:199.99,originalPrice:249.99,images:["/api/placeholder/600/600","/api/placeholder/600/600","/api/placeholder/600/600"],description:"Experience superior sound quality with these premium wireless headphones featuring active noise cancellation, 30-hour battery life, and premium comfort padding.",category:"Electronics",inStock:!0,stockLevel:15,rating:4.5,reviewCount:127,store:{id:"1",name:"TechWorld Electronics",location:"Level 2, Suite 245"},mall:{id:"westfield-valley",name:"Westfield Valley Fair"},specifications:[{name:"Battery Life",value:"30 hours"},{name:"Noise Cancellation",value:"Active ANC"},{name:"Connectivity",value:"Bluetooth 5.0"},{name:"Weight",value:"250g"},{name:"Warranty",value:"2 years"}],shippingOptions:[{type:"Standard Shipping",timeframe:"3-5 business days",cost:0},{type:"Express Shipping",timeframe:"1-2 business days",cost:12.99},{type:"In-Store Pickup",timeframe:"Ready today",cost:0},{type:"Mall SPIRAL Center",timeframe:"Ready tomorrow",cost:0}]}),P(!1)},500)},[S]);const b=()=>{var r,s;a&&(g({id:parseInt(a.id),name:a.name,price:a.price,image:a.images[0],category:a.category,store:a.store.name,mallId:((r=a.mall)==null?void 0:r.id)||"",mallName:((s=a.mall)==null?void 0:s.name)||""},o),c({title:"Added to cart",description:`${o}x ${a.name} added to your cart.`}))},F=()=>{navigator.clipboard.writeText(window.location.href),c({title:"Link copied",description:"Product link copied to clipboard."})},N=r=>{const s=o+r;s>=1&&s<=((a==null?void 0:a.stockLevel)||1)&&u(s)};if(f)return e.jsxs("div",{className:"min-h-screen bg-[var(--spiral-cream)]",children:[e.jsx(U,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--spiral-navy)] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})})]});if(!a)return e.jsxs("div",{className:"min-h-screen bg-[var(--spiral-cream)]",children:[e.jsx(U,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600",children:"The requested product could not be found."})]})})]});const E=Math.floor(a.price*o/20);return e.jsxs("div",{className:"min-h-screen bg-[var(--spiral-cream)]",children:[e.jsx(U,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-6",children:[e.jsx(H,{href:"/",className:"hover:text-[var(--spiral-coral)]",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(H,{href:"/products",className:"hover:text-[var(--spiral-coral)]",children:"Products"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-800",children:a.name})]}),e.jsxs(i,{variant:"ghost",className:"mb-6",onClick:()=>window.history.back(),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-white rounded-lg overflow-hidden",children:e.jsx("img",{src:a.images[p],alt:a.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"flex gap-2",children:a.images.map((r,s)=>e.jsx("button",{onClick:()=>w(s),className:`w-20 h-20 rounded-lg overflow-hidden border-2 ${p===s?"border-[var(--spiral-coral)]":"border-gray-200"}`,children:e.jsx("img",{src:r,alt:"",className:"w-full h-full object-cover"})},s))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{variant:"outline",children:a.category}),a.inStock?e.jsx(L,{className:"bg-green-100 text-green-800",children:"In Stock"}):e.jsx(L,{variant:"destructive",children:"Out of Stock"})]}),e.jsx("h1",{className:"text-3xl font-bold text-[var(--spiral-navy)] mb-2",children:a.name}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:a.rating}),e.jsxs("span",{className:"text-gray-500",children:["(",a.reviewCount," reviews)"]})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxs("span",{className:"text-3xl font-bold text-[var(--spiral-navy)]",children:["$",a.price.toFixed(2)]}),a.originalPrice&&e.jsxs("span",{className:"text-xl text-gray-500 line-through",children:["$",a.originalPrice.toFixed(2)]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.description}),e.jsx(j,{children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Sold by ",a.store.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.store.location}),a.mall&&e.jsxs("p",{className:"text-sm text-gray-600",children:["at ",a.mall.name]})]}),e.jsx(H,{href:`/mall/${(n=a.mall)==null?void 0:n.id}/store/${a.store.id}`,children:e.jsx(i,{variant:"outline",size:"sm",children:"View Store"})})]})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Fulfillment Options"}),e.jsxs(G,{value:t,onValueChange:l,children:[e.jsx(_,{children:e.jsx(ee,{})}),e.jsx(se,{children:a.shippingOptions.map(r=>e.jsx(T,{value:r.type.toLowerCase().replace(/\s+/g,"-"),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:r.type}),e.jsxs("span",{className:"text-sm text-gray-500 ml-4",children:[r.cost>0?`$${r.cost}`:"Free"," â€¢ ",r.timeframe]})]})},r.type))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>N(-1),disabled:o<=1,children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-4 py-2 font-medium",children:o}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>N(1),disabled:o>=a.stockLevel,children:e.jsx(ye,{className:"h-4 w-4"})})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.stockLevel," available"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(i,{onClick:b,disabled:!a.inStock,className:"flex-1 bg-[var(--spiral-coral)] hover:bg-[var(--spiral-coral)]/90",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),e.jsx(i,{variant:"outline",onClick:F,children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",children:e.jsx(ce,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"bg-[var(--spiral-gold)]/10 border border-[var(--spiral-gold)]/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:["Earn ",E," SPIRALs"]})," with this purchase",t==="in-store-pickup"&&e.jsx("span",{className:"text-[var(--spiral-coral)]",children:" (Double value when used in-store!)"})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs(j,{children:[e.jsx(k,{children:e.jsx($,{children:"Specifications"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-3",children:a.specifications.map((r,s)=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsx("span",{className:"font-medium",children:r.name}),e.jsx("span",{className:"text-gray-600",children:r.value})]},s))})})]}),e.jsxs(j,{children:[e.jsx(k,{children:e.jsx($,{children:"Shipping & Returns"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(we,{className:"h-5 w-5 text-[var(--spiral-coral)] mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Free Standard Shipping"}),e.jsx("p",{className:"text-sm text-gray-600",children:"On orders over $50"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(be,{className:"h-5 w-5 text-[var(--spiral-coral)] mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"In-Store Pickup"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available at ",a.store.name]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Se,{className:"h-5 w-5 text-[var(--spiral-coral)] mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"SPIRAL Center Pickup"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Convenient mall pickup location"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-[var(--spiral-navy)] mb-6",children:"Bundle Deals & Suggestions"}),e.jsx($e,{currentProductId:parseInt(a.id),currentProductCategory:a.category})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[var(--spiral-navy)]",children:"Customer Reviews"}),e.jsx(ke,{productId:a.id,productName:a.name})]})]})]})}export{us as ProductDetailPage,us as default};
