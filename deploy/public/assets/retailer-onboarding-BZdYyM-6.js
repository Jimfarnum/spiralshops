import{u as M,r as m,j as e,s as I,C as y,a as f,b as N,q as C,d as S,e as P,I as n,B as c,S as V,l as w}from"./index-sTi6BLPu.js";import{L as r}from"./label-DXgakF6_.js";import{T as O}from"./textarea-DwFaTdzp.js";import{S as H,a as W,b as z,c as G,d as h}from"./select-U2_IWgob.js";import{M as R}from"./message-circle-DYSFoP14.js";import{S as Y}from"./store-fvM_Wsk5.js";import"./index-BdQq_4o_.js";import"./chevron-down-BDj7HIg7.js";import"./check-Cok4To_4.js";function te(){const{toast:d}=M(),[x,p]=m.useState(1),[g,A]=m.useState(null),[b,T]=m.useState([]),[j,B]=m.useState(""),[o,u]=m.useState(!1),[t,k]=m.useState({businessName:"",businessType:"",description:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",website:"",revenue:0,employees:0,locations:1,productCount:0,techSavvy:"medium"}),F=[{id:1,title:"Welcome & Chat",description:"AI-guided introduction and business overview",completed:!1},{id:2,title:"Business Details",description:"Complete your business information",completed:!1},{id:3,title:"Tier Selection",description:"Choose your SPIRAL plan",completed:!1},{id:4,title:"Payment Setup",description:"Configure Stripe Connect for payments",completed:!1},{id:5,title:"Launch Ready",description:"Start selling on SPIRAL",completed:!1}],D=[{name:"Bronze",price:"$29/month",features:["Basic listing","Standard support","Basic analytics"],color:"bg-amber-500"},{name:"Silver",price:"$59/month",features:["Enhanced visibility","Priority support","Advanced analytics"],color:"bg-gray-400"},{name:"Gold",price:"$99/month",features:["Premium features","Marketing tools","Custom branding"],color:"bg-yellow-500"},{name:"Platinum",price:"$199/month",features:["White-glove service","Dedicated support","Custom features"],color:"bg-purple-500"}],L=async s=>{if(s.preventDefault(),!j.trim())return;u(!0);const a=[...b,{role:"user",content:j}];T(a);try{const l=await w("POST","/api/ai-agents/retailer-onboard/chat",{query:j,context:{step:x,businessType:t.businessType,history:b,collectedData:t}});if(l.ok){const v=await l.json();A(v.data),T(q=>[...q,{role:"assistant",content:v.data.message}]),v.data.nextStep&&d({title:"Next Step",description:v.data.nextStep})}}catch{d({title:"Error",description:"Failed to get AI response. Please try again.",variant:"destructive"})}finally{u(!1),B("")}},i=(s,a)=>{k(l=>({...l,[s]:a}))},E=async()=>{u(!0);try{const s=await w("POST","/api/ai-agents/retailer-onboard/validate",{businessData:t});if(s.ok){const a=await s.json();d({title:"Validation Complete",description:a.data.isValid?"Business data looks good!":"Please review the suggestions"}),a.data.isValid&&p(3)}}catch{d({title:"Error",description:"Failed to validate business data.",variant:"destructive"})}finally{u(!1)}},$=async()=>{u(!0);try{const s=await w("POST","/api/ai-agents/retailer-onboard/suggest-tier",{businessProfile:t});if(s.ok){const a=await s.json();d({title:"Tier Recommendation",description:`We recommend ${a.data.suggestedTier} tier for your business`})}}catch{d({title:"Error",description:"Failed to get tier recommendation.",variant:"destructive"})}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to SPIRAL Retailer Platform"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Let our AI guide you through a personalized onboarding experience"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"flex space-x-4",children:F.map(s=>e.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg ${x===s.id?"bg-blue-100 border-2 border-blue-500":s.completed?"bg-green-100 border-2 border-green-500":"bg-gray-100 border-2 border-gray-300"}`,children:[s.completed?e.jsx(I,{className:"h-5 w-5 text-green-600"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-400 text-white text-xs flex items-center justify-center",children:s.id}),e.jsx("span",{className:"text-sm font-medium",children:s.title})]},s.id))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[x===1&&e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(f,{children:[e.jsxs(N,{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{children:"Chat with SPIRAL AI Assistant"})]}),e.jsx(C,{children:"Tell us about your business and let our AI guide you through the setup process"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-64 overflow-y-auto border rounded-lg p-4 bg-gray-50",children:b.length===0?e.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[e.jsx(R,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Start by telling us about your business!"}),e.jsx("p",{className:"text-sm mt-2",children:'Try: "I run a small boutique clothing store"'})]}):e.jsx("div",{className:"space-y-4",children:b.map((s,a)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-sm p-3 rounded-lg ${s.role==="user"?"bg-blue-600 text-white":"bg-white border"}`,children:s.content})},a))})}),g&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx(P,{variant:"secondary",children:"AI Suggestion"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Confidence: ",Math.round(g.confidence*100),"%"]})]}),g.suggestedTier&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Recommended Tier: "}),e.jsx(P,{variant:"outline",children:g.suggestedTier})]})]}),e.jsxs("form",{onSubmit:L,className:"flex space-x-2",children:[e.jsx(n,{value:j,onChange:s=>B(s.target.value),placeholder:"Tell us about your business...",disabled:o}),e.jsx(c,{type:"submit",disabled:o||!j.trim(),children:o?"Sending...":"Send"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(c,{onClick:()=>p(2),children:"Continue to Business Details"})})]})})]}),x===2&&e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(f,{children:[e.jsxs(N,{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{children:"Business Information"})]}),e.jsx(C,{children:"Complete your business profile for accurate tier recommendations"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"businessName",children:"Business Name *"}),e.jsx(n,{id:"businessName",value:t.businessName,onChange:s=>i("businessName",s.target.value),placeholder:"Your Business Name"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"businessType",children:"Business Type *"}),e.jsxs(H,{onValueChange:s=>i("businessType",s),children:[e.jsx(W,{children:e.jsx(z,{placeholder:"Select business type"})}),e.jsxs(G,{children:[e.jsx(h,{value:"retail",children:"Retail Store"}),e.jsx(h,{value:"restaurant",children:"Restaurant/Food"}),e.jsx(h,{value:"service",children:"Service Business"}),e.jsx(h,{value:"boutique",children:"Boutique/Fashion"}),e.jsx(h,{value:"electronics",children:"Electronics"}),e.jsx(h,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",children:"Business Description"}),e.jsx(O,{id:"description",value:t.description,onChange:s=>i("description",s.target.value),placeholder:"Describe your business..."})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"revenue",children:"Annual Revenue"}),e.jsx(n,{id:"revenue",type:"number",value:t.revenue,onChange:s=>i("revenue",parseInt(s.target.value)||0),placeholder:"0"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"address",children:"Address *"}),e.jsx(n,{id:"address",value:t.address,onChange:s=>i("address",s.target.value),placeholder:"Street Address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"city",children:"City *"}),e.jsx(n,{id:"city",value:t.city,onChange:s=>i("city",s.target.value),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"state",children:"State *"}),e.jsx(n,{id:"state",value:t.state,onChange:s=>i("state",s.target.value),placeholder:"State"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"employees",children:"Number of Employees"}),e.jsx(n,{id:"employees",type:"number",value:t.employees,onChange:s=>i("employees",parseInt(s.target.value)||0),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"productCount",children:"Estimated Product Count"}),e.jsx(n,{id:"productCount",type:"number",value:t.productCount,onChange:s=>i("productCount",parseInt(s.target.value)||0),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(c,{variant:"outline",onClick:()=>p(1),children:"Back to Chat"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{variant:"outline",onClick:$,disabled:o,children:"Get Tier Recommendation"}),e.jsx(c,{onClick:E,disabled:o,children:o?"Validating...":"Continue"})]})]})]})]}),x===3&&e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(f,{children:[e.jsxs(N,{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{children:"Choose Your SPIRAL Plan"})]}),e.jsx(C,{children:"Select the tier that best fits your business needs"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:D.map(s=>e.jsxs(y,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsxs(f,{children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${s.color} mb-2`}),e.jsx(N,{className:"text-xl",children:s.name}),e.jsx(C,{className:"text-2xl font-bold",children:s.price})]}),e.jsxs(S,{children:[e.jsx("ul",{className:"space-y-2",children:s.features.map((a,l)=>e.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(I,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:a})]},l))}),e.jsxs(c,{className:"w-full mt-4",onClick:()=>p(4),children:["Select ",s.name]})]})]},s.name))}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(c,{variant:"outline",onClick:()=>p(2),children:"Back to Business Details"})})]})]})]})]})})}export{te as default};
