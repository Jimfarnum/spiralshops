import{r as l}from"./index-sTi6BLPu.js";function g(){const[e,n]=l.useState({coordinates:null,loading:!1,error:null,hasPermission:!1}),a=()=>new Promise((i,s)=>{if(!("geolocation"in navigator)){const t="Geolocation is not supported by this browser";n(o=>({...o,error:t,loading:!1})),s(new Error(t));return}n(t=>({...t,loading:!0,error:null})),navigator.geolocation.getCurrentPosition(t=>{const o={lat:t.coords.latitude,lng:t.coords.longitude};n(c=>({...c,coordinates:o,loading:!1,hasPermission:!0,error:null})),i(o)},t=>{let o="Failed to get location";switch(t.code){case t.PERMISSION_DENIED:o="Location access denied by user";break;case t.POSITION_UNAVAILABLE:o="Location information is unavailable";break;case t.TIMEOUT:o="Location request timed out";break}n(c=>({...c,loading:!1,error:o,hasPermission:t.code!==t.PERMISSION_DENIED})),s(new Error(o))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),r=()=>{n(i=>({...i,error:null}))};return l.useEffect(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(i=>{i.state==="granted"&&a().catch(()=>{})})},[]),{...e,getCurrentLocation:a,clearError:r}}function d(e,n,a,r){const s=(a-e)*Math.PI/180,t=(r-n)*Math.PI/180,o=Math.sin(s/2)**2+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(t/2)**2;return 3958.8*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function m(e){return e<.1?"< 0.1 mi":e<1?`${e.toFixed(1)} mi`:`${e.toFixed(1)} mi`}function f(e,n,a){return`https://www.google.com/maps/dir/?api=1&destination=${a?encodeURIComponent(a):`${e},${n}`}`}export{f as a,m as f,d as g,g as u};
