import{r as p,u as D,j as e,H as f,C as l,d as i,o as j,O as v,P as n,L as y,B as g,e as u,t as w,z as I,a as F,b as W,q as R}from"./index-sTi6BLPu.js";import{S as E}from"./shopping-cart-DjSog6GS.js";import{E as H}from"./eye-BfDIBTgL.js";function O(){const[d,o]=p.useState([]),[k,S]=p.useState(!0),[x,A]=p.useState({totalItems:0,activeAlerts:0,potentialSavings:0,avgSavings:0}),{toast:c}=D();p.useEffect(()=>{C()},[]);const C=async()=>{try{const t=await(await fetch("/api/wishlist")).json();t.success&&(o(t.data),h(t.data))}catch{const t=[{id:"1",productId:"prod_1",name:"Wireless Bluetooth Headphones",price:89.99,originalPrice:129.99,image:"/api/placeholder/300/300",category:"Electronics",retailer:"Tech Hub Electronics",inStock:!0,priceDropAlert:!0,restockAlert:!1,spiralsBonus:150,addedAt:"2025-01-05T10:00:00Z",lastPriceCheck:"2025-01-07T12:00:00Z",alertsTriggered:1},{id:"2",productId:"prod_2",name:"Organic Coffee Beans - Dark Roast",price:24.99,originalPrice:24.99,image:"/api/placeholder/300/300",category:"Food & Beverages",retailer:"Local Coffee Roasters",inStock:!1,priceDropAlert:!1,restockAlert:!0,addedAt:"2025-01-06T14:30:00Z",lastPriceCheck:"2025-01-07T11:45:00Z",alertsTriggered:0},{id:"3",productId:"prod_3",name:"Summer Fashion Dress",price:79.99,originalPrice:99.99,image:"/api/placeholder/300/300",category:"Fashion",retailer:"Fashion Forward Boutique",inStock:!0,priceDropAlert:!0,restockAlert:!0,spiralsBonus:200,addedAt:"2025-01-04T16:20:00Z",lastPriceCheck:"2025-01-07T13:00:00Z",alertsTriggered:2}];o(t),h(t)}finally{S(!1)}},h=s=>{const t=s.length,a=s.filter(m=>m.priceDropAlert||m.restockAlert).length,r=s.reduce((m,N)=>m+(N.originalPrice?N.originalPrice-N.price:0),0),B=t>0?r/t:0;A({totalItems:t,activeAlerts:a,potentialSavings:r,avgSavings:B})},b=async(s,t)=>{try{const a=d.map(r=>r.id===s?{...r,[t]:!r[t]}:r);o(a),h(a),c({title:"Alert Updated",description:"Your notification preferences have been saved."})}catch{c({title:"Update Failed",description:"Could not update alert settings.",variant:"destructive"})}},P=async s=>{try{const t=d.filter(a=>a.id!==s);o(t),h(t),c({title:"Item Removed",description:"Product removed from your wishlist."})}catch{c({title:"Remove Failed",description:"Could not remove item from wishlist.",variant:"destructive"})}},T=async s=>{if(!s.inStock){c({title:"Out of Stock",description:"This item is currently unavailable.",variant:"destructive"});return}c({title:"Added to Cart",description:`${s.name} has been added to your cart.`})};return k?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-teal-600 flex items-center gap-2",children:[e.jsx(f,{className:"w-8 h-8 text-red-500"}),"Your Wishlist"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Track your favorite products and get notified about price drops"})]})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalItems})]}),e.jsx(f,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.activeAlerts})]}),e.jsx(j,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",x.potentialSavings.toFixed(2)]})]}),e.jsx(v,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Savings"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["$",x.avgSavings.toFixed(2)]})]}),e.jsx(n,{className:"w-8 h-8 text-purple-500"})]})})})]}),d.length===0?e.jsx(l,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Your wishlist is empty"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start adding products you love to track prices and get notified about deals!"}),e.jsx(y,{href:"/products",children:e.jsx(g,{children:"Browse Products"})})]})}):e.jsx("div",{className:"grid gap-4",children:d.map(s=>e.jsx(l,{className:"overflow-hidden",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.retailer}),e.jsx(u,{variant:"outline",className:"mt-1",children:s.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-teal-600",children:["$",s.price]}),s.originalPrice&&s.originalPrice>s.price&&e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",s.originalPrice]})]}),s.spiralsBonus&&e.jsxs(u,{className:"bg-orange-100 text-orange-800 mt-1",children:["+",s.spiralsBonus," SPIRALs"]})]})]}),e.jsx("div",{className:"mb-3",children:s.inStock?e.jsxs(u,{className:"bg-green-100 text-green-800",children:[e.jsx(n,{className:"w-3 h-3 mr-1"}),"In Stock"]}):e.jsxs(u,{className:"bg-red-100 text-red-800",children:[e.jsx(n,{className:"w-3 h-3 mr-1"}),"Out of Stock"]})}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{checked:s.priceDropAlert,onCheckedChange:()=>b(s.id,"priceDropAlert")}),e.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4"}),"Price Drop Alert"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{checked:s.restockAlert,onCheckedChange:()=>b(s.id,"restockAlert")}),e.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(n,{className:"w-4 h-4"}),"Restock Alert"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:()=>T(s),disabled:!s.inStock,className:"flex-1",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),s.inStock?"Add to Cart":"Out of Stock"]}),e.jsx(y,{href:`/product/${s.productId}`,children:e.jsxs(g,{variant:"outline",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"View"]})}),e.jsx(g,{variant:"outline",onClick:()=>P(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(I,{className:"w-4 h-4"})})]}),s.alertsTriggered>0&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx(j,{className:"w-4 h-4 inline mr-1"}),s.alertsTriggered," alert",s.alertsTriggered>1?"s":""," triggered"]})})]})]})})},s.id))}),e.jsxs(l,{children:[e.jsxs(F,{children:[e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-blue-500"}),"How Price Alerts Work"]}),e.jsx(R,{children:"Stay informed about your favorite products with our smart notification system"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Price Drop Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when prices decrease"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(n,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Restock Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Know when out-of-stock items return"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"SPIRALS Bonus"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get alerted about loyalty point bonuses"})]})]})})]})]})}export{O as default};
