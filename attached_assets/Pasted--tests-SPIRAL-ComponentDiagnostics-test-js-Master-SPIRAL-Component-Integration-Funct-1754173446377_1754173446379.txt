// 📁 __tests__/SPIRAL_ComponentDiagnostics.test.js
// ✅ Master SPIRAL Component Integration & Functionality Test Suite

import React from 'react';
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom';

// Import key SPIRAL components
import Cart from '../components/Cart';
import InviteToShop from '../components/InviteToShop';
import GuestInvite from '../pages/GuestInvite';
import ProductList from '../components/ProductList';
import ProductCard from '../components/ProductCard';
import StoreLocator from '../components/StoreLocator';
import TripNotifications from '../components/TripNotifications';
import RetailerIncentiveScheduler from '../components/PerkScheduler';
import SpiralsEarned from '../components/SpiralsEarned';

// Mock props (adjust as needed)
const mockTripId = "trip-test-001";
const mockStoreId = "store123";
const mockMallId = "mall789";

describe("🧪 SPIRAL Platform Component Diagnostics", () => {
  test("Cart renders without crash", () => {
    render(<Cart />);
    expect(screen.getByText(/Cart/i)).toBeInTheDocument();
  });

  test("InviteToShop renders and copies link", () => {
    render(<InviteToShop tripId={mockTripId} />);
    expect(screen.getByText(/Invite Others to Shop/i)).toBeInTheDocument();
  });

  test("GuestInvite renders trip join state", () => {
    render(<GuestInvite />);
    expect(screen.getByText(/Joining your shopping trip/i)).toBeInTheDocument();
  });

  test("ProductList renders with product cards", () => {
    const mockProducts = [
      { id: 1, name: "Boots", price: "$199", image: "url" },
      { id: 2, name: "Shoes", price: "$129", image: "url" }
    ];
    render(<ProductList products={mockProducts} />);
    expect(screen.getByText(/Boots/i)).toBeInTheDocument();
  });

  test("ProductCard displays product info", () => {
    const mockProduct = { id: 1, name: "Boots", price: "$199", image: "url" };
    render(<ProductCard product={mockProduct} />);
    expect(screen.getByText(/Boots/i)).toBeInTheDocument();
  });

  test("StoreLocator renders", () => {
    render(<StoreLocator />);
    expect(screen.getByText(/Find a Store/i)).toBeInTheDocument();
  });

  test("TripNotifications renders with props", () => {
    render(<TripNotifications storeId={mockStoreId} mallId={mockMallId} />);
    expect(screen.getByText(/Upcoming SPIRAL Trips/i)).toBeInTheDocument();
  });

  test("Retailer Incentive Scheduler loads", () => {
    render(<RetailerIncentiveScheduler storeId={mockStoreId} />);
    expect(screen.getByText(/Retailer Perk Scheduler/i)).toBeInTheDocument();
  });

  test("SpiralsEarned shows perk summary", () => {
    render(<SpiralsEarned spirals={15} />);
    expect(screen.getByText(/15 SPIRALS/i)).toBeInTheDocument();
  });
});